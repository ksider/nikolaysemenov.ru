<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@700&display=swap" rel="stylesheet">
    <style>
        html {
        font-family: serif;
        font-size: 137.5%;
        -webkit-font-smoothing: antialiased;
        }
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Noto Sans', sans-serif;
        }

        p {
                line-height: 1.5rem;
                margin-top: 1.5rem;
                margin-bottom: 0;
            }

        #meme-container {
            text-align: center;
            margin-bottom: 20px;
            width: 80%;
            margin: 0 auto;
        }

        #meme-text {
            font-size: 24px;
            margin-bottom: 20px;

        }

        .emoji {
            font-size: 24px;
            cursor: pointer;
            margin: 0 5px;
        }
    </style>
 <script>

async function fetchAndFlattenEmojiArrays(jsonUrl) {
    try {
        const response = await fetch(jsonUrl);
        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }
        const jsonData = await response.json();
        if (typeof jsonData === 'object' && jsonData !== null) {
            const flattenedArray = Object.values(jsonData).flat();
            return flattenedArray;
        } else {
            throw new Error('Invalid JSON structure. Please provide a valid JSON object with nested arrays.');
        }
    } catch (error) {
        console.error('Error:', error.message);
        return null;
    }
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const jsonUrl = 'https://gist.githubusercontent.com/leon-do/8dfcb6ffefb9bb0c20e5b74e080177b1/raw/609bb63932c4c4f8effe950921850acbdadba331/emojis.json';

fetchAndFlattenEmojiArrays(jsonUrl)
    .then(flattenedArray => {
        if (flattenedArray !== null) {
            console.log(flattenedArray);
            emojis = flattenedArray;
        } else {
            emojis = [
        "üòÇ", "‚ù§Ô∏è", "üòç", "üëç", "üòä", "üî•", "üôå", "üíØ", "üëè", "üéâ",
        "üòé", "ü§î", "üòò", "ü§£", "üëå", "üôè", "üî¥", "üåü", "üòÅ", "üí™",
        "üòú", "üíï", "üò≠", "ü§ó", "üíñ", "‚ú®", "üé∂", "üòÖ", "üòã", "üëÄ",
        "üöÄ", "ü§©", "üëâ", "üòè", "üëä", "üí•", "üò±", "üòÉ", "üëá", "üíî",
        "üåπ", "üåà", "ü§∑", "ü§¶", "ü§ë", "üòá", "ü§¢", "üí©", "üôà", "üôä",
        "üò¥", "üëÖ", "üí¶", "üçë", "üçï", "üç¶", "üçª", "üéÅ", "üéà", "üéä",
        "üéÆ", "üöó", "üèÜ", "üèÖ", "üèÄ", "üèùÔ∏è", "üçæ", "üëë", "üì∑", "üìö",
        "üîë", "üíº", "üíª", "üì±", "üéì", "üé§", "üèãÔ∏è", "üç∏", "üö≤", "üé®",
        "üöÅ", "‚õµ", "üç©", "üçî", "üå≠", "üçü", "üçø", "üç∑", "üçπ", "üç∫",
        "üé∏", "üé§", "üé≠", "üé¨", "üìΩÔ∏è", "üéº", "üéµ", "üçé", "üçå", "üçá",
        "üçì", "üçí", "üçç", "üçà", "üçÖ", "üçã", "ü•ë", "ü•ï", "ü•í", "ü•î",
        "ü•ñ", "ü•ì", "ü•û", "üßÄ", "üçï", "üçü", "üå≠", "üçî", "üçü", "üçó",
        "üçñ", "üç§", "üç±", "üç£", "üçõ", "üçú", "üçù", "üç†", "üç¢", "üç§",
        "üç•", "üç°", "üç¶", "üçß", "üç®", "üç©", "üç™", "üéÇ", "üç∞", "üßÅ",
        "üç´", "üç¨", "üç≠", "üçÆ", "üçØ", "üç∞", "üç±", "üç≤", "üç≥", "üç¥"
    ];
            console.log('Failed to fetch and flatten JSON data.');
        }
    })
    .catch(error => console.error('Error:', error));



    function changeAllEmojis() {
        const emojiElements = document.querySelectorAll(".emoji");

        emojiElements.forEach((element, index) => {
            const nextIndex = Math.floor(Math.random() * emojis.length);
            element.textContent = emojis[nextIndex];
        });
    }

    function changeEmoji(index) {
        const emojiElement = document.getElementById(`emoji${index}`);
        const nextIndex = Math.floor(Math.random() * emojis.length);
        emojiElement.textContent = emojis[nextIndex];
    }

    function postToTwitter() {
        const tweetText = document.getElementById("meme-text").innerText;
        const tweetUrl = "https://twitter.com/intent/tweet?text=" + encodeURIComponent(tweetText);
        window.open(tweetUrl, "_blank");
    }

    function resetEmojis() {
        const emojiElements = document.querySelectorAll(".emoji");
        emojiElements.forEach((element, index) => {
            element.textContent = emojis[index % emojis.length];
        });
    }
</script>
</head>
<body>
    <div id="meme-container">
        <div id="meme-text"> <p>
            <span id="emoji0" class="emoji" onclick="changeEmoji(0)">ü¶Ñ</span>
            –º–µ–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ –º–æ—á–∞—Ç
            –ù—É —Ç–æ –µ—Å—Ç—å –µ—Å–ª–∏ –∫—Ç–æ —Å–æ–≤—Å–µ–º –≤ —Ç–∞–Ω–∫–µ –∏ –Ω–µ –ø–æ–Ω—è–ª, —á—Ç–æ —ç—Ç–æ —Å–∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞–º–ø–∞–Ω–∏—è
            <span id="emoji1" class="emoji" onclick="changeEmoji(1)">ü´∞</span>
            –Ω–∏—á–µ–≥–æ –±–µ–∑
            <span id="emoji2" class="emoji" onclick="changeEmoji(2)">üßå</span>
            –∏ –∫–æ–º–∞–Ω–¥—ã –¥–µ–ª–∞—Ç—å –Ω–µ –±—É–¥—É—Ç
        </div>

        <button class="pure-button" onclick="changeAllEmojis()">–ò–∑–º–µ–Ω–∏—Ç—å –≤—Å–µ —ç–º–æ–¥–∂–∏</button>
      <!-- <button class="pure-button" onclick="resetEmojis()">–†–µ—Å–µ—Ç</button>--> 
        <button class="pure-button" onclick="postToTwitter()">–ü–æ—Å—Ç–∏–Ω–≥ –≤ –¢–≤–∏—Ç—Ç–µ—Ä</button>
    </div>
</body>
</html>
