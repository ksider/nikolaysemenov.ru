(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tn(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var a=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return r[i]}})}),t}var Ei={exports:{}};/*!
 * Materialize v1.0.0-rc.2 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */(function(r,e){var t=function u(p,y,w){p===null&&(p=Function.prototype);var d=Object.getOwnPropertyDescriptor(p,y);if(d===void 0){var n=Object.getPrototypeOf(p);return n===null?void 0:u(n,y,w)}if("value"in d)return d.value;var s=d.get;return s!==void 0?s.call(w):void 0},i=function(){function u(p,y){for(var w=0;w<y.length;w++){var d=y[w];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,d.key,d)}}return function(p,y,w){return y&&u(p.prototype,y),w&&u(p,w),p}}();function a(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||typeof p!="object"&&typeof p!="function"?u:p}function l(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}function c(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}window.cash=function(){var u,p=document,y=window,w=Array.prototype,d=w.slice,n=w.filter,s=w.push,o=function(){},h=function(v){return typeof v==typeof o&&v.call},m=function(v){return typeof v=="string"},C=/^#[\w-]*$/,S=/^\.[\w-]*$/,B=/<.+>/,R=/^\w+$/;function H(v,_){_=_||p;var T=S.test(v)?_.getElementsByClassName(v.slice(1)):R.test(v)?_.getElementsByTagName(v):_.querySelectorAll(v);return T}function W(v){if(!u){var _=(u=p.implementation.createHTMLDocument(null)).createElement("base");_.href=p.location.href,u.head.appendChild(_)}return u.body.innerHTML=v,u.body.childNodes}function F(v){p.readyState!=="loading"?v():p.addEventListener("DOMContentLoaded",v)}function oe(v,_){if(!v)return this;if(v.cash&&v!==y)return v;var T,D=v,Q=0;if(m(v))D=C.test(v)?p.getElementById(v.slice(1)):B.test(v)?W(v):H(v,_);else if(h(v))return F(v),this;if(!D)return this;if(D.nodeType||D===y)this[0]=D,this.length=1;else for(T=this.length=D.length;Q<T;Q++)this[Q]=D[Q];return this}function q(v,_){return new oe(v,_)}var G=q.fn=q.prototype=oe.prototype={cash:!0,length:0,push:s,splice:w.splice,map:w.map,init:oe};function te(v,_){for(var T=v.length,D=0;D<T&&_.call(v[D],v[D],D,v)!==!1;D++);}function re(v,_){var T=v&&(v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector);return!!T&&T.call(v,_)}function Z(v){return m(v)?re:v.cash?function(_){return v.is(_)}:function(_,T){return _===T}}function me(v){return q(d.call(v).filter(function(_,T,D){return D.indexOf(_)===T}))}Object.defineProperty(G,"constructor",{value:q}),q.parseHTML=W,q.noop=o,q.isFunction=h,q.isString=m,q.extend=G.extend=function(v){v=v||{};var _=d.call(arguments),T=_.length,D=1;for(_.length===1&&(v=this,D=0);D<T;D++)if(_[D])for(var Q in _[D])_[D].hasOwnProperty(Q)&&(v[Q]=_[D][Q]);return v},q.extend({merge:function(v,_){for(var T=+_.length,D=v.length,Q=0;Q<T;D++,Q++)v[D]=_[Q];return v.length=D,v},each:te,matches:re,unique:me,isArray:Array.isArray,isNumeric:function(v){return!isNaN(parseFloat(v))&&isFinite(v)}});var ie=q.uid="_cash"+Date.now();function we(v){return v[ie]=v[ie]||{}}function We(v,_,T){return we(v)[_]=T}function $e(v,_){var T=we(v);return T[_]===void 0&&(T[_]=v.dataset?v.dataset[_]:q(v).attr("data-"+_)),T[_]}G.extend({data:function(v,_){if(m(v))return _===void 0?$e(this[0],v):this.each(function(D){return We(D,v,_)});for(var T in v)this.data(T,v[T]);return this},removeData:function(v){return this.each(function(_){return D=v,void((Q=we(T=_))?delete Q[D]:T.dataset?delete T.dataset[D]:q(T).removeAttr("data-"+name));var T,D,Q})}});var Ne=/\S+/g;function J(v){return m(v)&&v.match(Ne)}function Te(v,_){return v.classList?v.classList.contains(_):new RegExp("(^| )"+_+"( |$)","gi").test(v.className)}function Oe(v,_,T){v.classList?v.classList.add(_):T.indexOf(" "+_+" ")&&(v.className+=" "+_)}function Ae(v,_){v.classList?v.classList.remove(_):v.className=v.className.replace(_,"")}G.extend({addClass:function(v){var _=J(v);return _?this.each(function(T){var D=" "+T.className+" ";te(_,function(Q){Oe(T,Q,D)})}):this},attr:function(v,_){if(v){if(m(v))return _===void 0?this[0]?this[0].getAttribute?this[0].getAttribute(v):this[0][v]:void 0:this.each(function(D){D.setAttribute?D.setAttribute(v,_):D[v]=_});for(var T in v)this.attr(T,v[T]);return this}},hasClass:function(v){var _=!1,T=J(v);return T&&T.length&&this.each(function(D){return!(_=Te(D,T[0]))}),_},prop:function(v,_){if(m(v))return _===void 0?this[0][v]:this.each(function(D){D[v]=_});for(var T in v)this.prop(T,v[T]);return this},removeAttr:function(v){return this.each(function(_){_.removeAttribute?_.removeAttribute(v):delete _[v]})},removeClass:function(v){if(!arguments.length)return this.attr("class","");var _=J(v);return _?this.each(function(T){te(_,function(D){Ae(T,D)})}):this},removeProp:function(v){return this.each(function(_){delete _[v]})},toggleClass:function(v,_){if(_!==void 0)return this[_?"addClass":"removeClass"](v);var T=J(v);return T?this.each(function(D){var Q=" "+D.className+" ";te(T,function(ne){Te(D,ne)?Ae(D,ne):Oe(D,ne,Q)})}):this}}),G.extend({add:function(v,_){return me(q.merge(this,q(v,_)))},each:function(v){return te(this,v),this},eq:function(v){return q(this.get(v))},filter:function(v){if(!v)return this;var _=h(v)?v:Z(v);return q(n.call(this,function(T){return _(T,v)}))},first:function(){return this.eq(0)},get:function(v){return v===void 0?d.call(this):v<0?this[v+this.length]:this[v]},index:function(v){var _=v?q(v)[0]:this[0],T=v?this:q(_).parent().children();return d.call(T).indexOf(_)},last:function(){return this.eq(-1)}});var ue,xe,qe,k,x,I,P=(x=/(?:^\w|[A-Z]|\b\w)/g,I=/[\s-_]+/g,function(v){return v.replace(x,function(_,T){return _[T===0?"toLowerCase":"toUpperCase"]()}).replace(I,"")}),j=(ue={},xe=document,qe=xe.createElement("div"),k=qe.style,function(v){if(v=P(v),ue[v])return ue[v];var _=v.charAt(0).toUpperCase()+v.slice(1),T=(v+" "+["webkit","moz","ms","o"].join(_+" ")+_).split(" ");return te(T,function(D){if(D in k)return ue[D]=v=ue[v]=D,!1}),ue[v]});function N(v,_){return parseInt(y.getComputedStyle(v[0],null)[_],10)||0}function V(v,_,T){var D,Q=$e(v,"_cashEvents"),ne=Q&&Q[_];ne&&(T?(v.removeEventListener(_,T),0<=(D=ne.indexOf(T))&&ne.splice(D,1)):(te(ne,function(fe){v.removeEventListener(_,fe)}),ne=[]))}function z(v,_){return"&"+encodeURIComponent(v)+"="+encodeURIComponent(_).replace(/%20/g,"+")}function X(v){var _,T,D,Q=v.type;if(!Q)return null;switch(Q.toLowerCase()){case"select-one":return 0<=(D=(T=v).selectedIndex)?T.options[D].value:null;case"select-multiple":return _=[],te(v.options,function(ne){ne.selected&&_.push(ne.value)}),_.length?_:null;case"radio":case"checkbox":return v.checked?v.value:null;default:return v.value?v.value:null}}function K(v,_,T){var D=m(_);D||!_.length?te(v,D?function(Q){return Q.insertAdjacentHTML(T?"afterbegin":"beforeend",_)}:function(Q,ne){return function(fe,he,ce){if(ce){var de=fe.childNodes[0];fe.insertBefore(he,de)}else fe.appendChild(he)}(Q,ne===0?_:_.cloneNode(!0),T)}):te(_,function(Q){return K(v,Q,T)})}q.prefixedProp=j,q.camelCase=P,G.extend({css:function(v,_){if(m(v))return v=j(v),1<arguments.length?this.each(function(D){return D.style[v]=_}):y.getComputedStyle(this[0])[v];for(var T in v)this.css(T,v[T]);return this}}),te(["Width","Height"],function(v){var _=v.toLowerCase();G[_]=function(){return this[0].getBoundingClientRect()[_]},G["inner"+v]=function(){return this[0]["client"+v]},G["outer"+v]=function(T){return this[0]["offset"+v]+(T?N(this,"margin"+(v==="Width"?"Left":"Top"))+N(this,"margin"+(v==="Width"?"Right":"Bottom")):0)}}),G.extend({off:function(v,_){return this.each(function(T){return V(T,v,_)})},on:function(v,_,T,D){var Q;if(!m(v)){for(var ne in v)this.on(ne,_,v[ne]);return this}return h(_)&&(T=_,_=null),v==="ready"?(F(T),this):(_&&(Q=T,T=function(fe){for(var he=fe.target;!re(he,_);){if(he===this||he===null)return he=!1;he=he.parentNode}he&&Q.call(he,fe)}),this.each(function(fe){var he,ce,de,be,ae=T;D&&(ae=function(){T.apply(this,arguments),V(fe,v,ae)}),ce=v,de=ae,(be=$e(he=fe,"_cashEvents")||We(he,"_cashEvents",{}))[ce]=be[ce]||[],be[ce].push(de),he.addEventListener(ce,de)}))},one:function(v,_,T){return this.on(v,_,T,!0)},ready:F,trigger:function(v,_){if(document.createEvent){var T=document.createEvent("HTMLEvents");return T.initEvent(v,!0,!1),T=this.extend(T,_),this.each(function(D){return D.dispatchEvent(T)})}}}),G.extend({serialize:function(){var v="";return te(this[0].elements||this,function(_){if(!_.disabled&&_.tagName!=="FIELDSET"){var T=_.name;switch(_.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var D=X(_);D!==null&&te(D,function(ne){v+=z(T,ne)});break;default:var Q=X(_);Q!==null&&(v+=z(T,Q))}}}),v.substr(1)},val:function(v){return v===void 0?X(this[0]):this.each(function(_){return _.value=v})}}),G.extend({after:function(v){return q(v).insertAfter(this),this},append:function(v){return K(this,v),this},appendTo:function(v){return K(q(v),this),this},before:function(v){return q(v).insertBefore(this),this},clone:function(){return q(this.map(function(v){return v.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(v){if(v===void 0)return this[0].innerHTML;var _=v.nodeType?v[0].outerHTML:v;return this.each(function(T){return T.innerHTML=_})},insertAfter:function(v){var _=this;return q(v).each(function(T,D){var Q=T.parentNode,ne=T.nextSibling;_.each(function(fe){Q.insertBefore(D===0?fe:fe.cloneNode(!0),ne)})}),this},insertBefore:function(v){var _=this;return q(v).each(function(T,D){var Q=T.parentNode;_.each(function(ne){Q.insertBefore(D===0?ne:ne.cloneNode(!0),T)})}),this},prepend:function(v){return K(this,v,!0),this},prependTo:function(v){return K(q(v),this,!0),this},remove:function(){return this.each(function(v){if(v.parentNode)return v.parentNode.removeChild(v)})},text:function(v){return v===void 0?this[0].textContent:this.each(function(_){return _.textContent=v})}});var se=p.documentElement;return G.extend({position:function(){var v=this[0];return{left:v.offsetLeft,top:v.offsetTop}},offset:function(){var v=this[0].getBoundingClientRect();return{top:v.top+y.pageYOffset-se.clientTop,left:v.left+y.pageXOffset-se.clientLeft}},offsetParent:function(){return q(this[0].offsetParent)}}),G.extend({children:function(v){var _=[];return this.each(function(T){s.apply(_,T.children)}),_=me(_),v?_.filter(function(T){return re(T,v)}):_},closest:function(v){return!v||this.length<1?q():this.is(v)?this.filter(v):this.parent().closest(v)},is:function(v){if(!v)return!1;var _=!1,T=Z(v);return this.each(function(D){return!(_=T(D,v))}),_},find:function(v){if(!v||v.nodeType)return q(v&&this.has(v).length?v:null);var _=[];return this.each(function(T){s.apply(_,H(v,T))}),me(_)},has:function(v){var _=m(v)?function(T){return H(v,T).length!==0}:function(T){return T.contains(v)};return this.filter(_)},next:function(){return q(this[0].nextElementSibling)},not:function(v){if(!v)return this;var _=Z(v);return this.filter(function(T){return!_(T,v)})},parent:function(){var v=[];return this.each(function(_){_&&_.parentNode&&v.push(_.parentNode)}),me(v)},parents:function(v){var _,T=[];return this.each(function(D){for(_=D;_&&_.parentNode&&_!==p.body.parentNode;)_=_.parentNode,(!v||v&&re(_,v))&&T.push(_)}),me(T)},prev:function(){return q(this[0].previousElementSibling)},siblings:function(v){var _=this.parent().children(v),T=this[0];return _.filter(function(D){return D!==T})}}),q}();var f=function(){function u(p,y,w){c(this,u),y instanceof Element||console.error(Error(y+" is not an HTML Element"));var d=p.getInstance(y);d&&d.destroy(),this.el=y,this.$el=cash(y)}return i(u,null,[{key:"init",value:function(p,y,w){var d=null;if(y instanceof Element)d=new p(y,w);else if(y&&(y.jquery||y.cash||y instanceof NodeList)){for(var n=[],s=0;s<y.length;s++)n.push(new p(y[s],w));d=n}return d}}]),u}();(function(u){u.Package?M={}:u.M={},M.jQueryLoaded=!!u.jQuery})(window),e.nodeType||(!r.nodeType&&r.exports&&(e=r.exports=M),e.default=M),M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var g=function(u){M.keyDown=!0,u.which!==M.keys.TAB&&u.which!==M.keys.ARROW_DOWN&&u.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},b=function(u){M.keyDown=!1,u.which!==M.keys.TAB&&u.which!==M.keys.ARROW_DOWN&&u.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},E=function(u){M.keyDown&&document.body.classList.add("keyboard-focused")},O=function(u){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",g,!0),document.addEventListener("keyup",b,!0),document.addEventListener("focus",E,!0),document.addEventListener("blur",O,!0),M.initializeJqueryWrapper=function(u,p,y){jQuery.fn[p]=function(w){if(u.prototype[w]){var d=Array.prototype.slice.call(arguments,1);if(w.slice(0,3)==="get"){var n=this.first()[0][y];return n[w].apply(n,d)}return this.each(function(){var s=this[y];s[w].apply(s,d)})}if(typeof w=="object"||!w)return u.init(this,w),this;jQuery.error("Method "+w+" does not exist on jQuery."+p)}},M.AutoInit=function(u){var p=u||document.body,y={Autocomplete:p.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:p.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:p.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:p.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:p.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:p.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:p.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:p.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:p.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:p.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:p.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:p.querySelectorAll("select:not(.no-autoinit)"),Sidenav:p.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:p.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:p.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:p.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:p.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:p.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var w in y)M[w].init(y[w])},M.objectSelectorString=function(u){return((u.prop("tagName")||"")+(u.attr("id")||"")+(u.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function u(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return u()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u()}}(),M.escapeHash=function(u){return u.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(u){var p=$(u),y=p.add(p.parents()),w=!1;return y.each(function(){if($(this).css("position")==="fixed")return!(w=!0)}),w},M.checkWithinContainer=function(u,p,y){var w={top:!1,right:!1,bottom:!1,left:!1},d=u.getBoundingClientRect(),n=u===document.body?Math.max(d.bottom,window.innerHeight):d.bottom,s=u.scrollLeft,o=u.scrollTop,h=p.left-s,m=p.top-o;return(h<d.left+y||h<y)&&(w.left=!0),(h+p.width>d.right-y||h+p.width>window.innerWidth-y)&&(w.right=!0),(m<d.top+y||m<y)&&(w.top=!0),(m+p.height>n-y||m+p.height>window.innerHeight-y)&&(w.bottom=!0),w},M.checkPossibleAlignments=function(u,p,y,w){var d={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},n=getComputedStyle(p).overflow==="visible",s=p.getBoundingClientRect(),o=Math.min(s.height,window.innerHeight),h=Math.min(s.width,window.innerWidth),m=u.getBoundingClientRect(),C=p.scrollLeft,S=p.scrollTop,B=y.left-C,R=y.top-S,H=y.top+m.height-S;return d.spaceOnRight=n?window.innerWidth-(m.left+y.width):h-(B+y.width),d.spaceOnRight<0&&(d.left=!1),d.spaceOnLeft=n?m.right-y.width:B-y.width+m.width,d.spaceOnLeft<0&&(d.right=!1),d.spaceOnBottom=n?window.innerHeight-(m.top+y.height+w):o-(R+y.height+w),d.spaceOnBottom<0&&(d.top=!1),d.spaceOnTop=n?m.bottom-(y.height+w):H-(y.height-w),d.spaceOnTop<0&&(d.bottom=!1),d},M.getOverflowParent=function(u){return u==null?null:u===document.body||getComputedStyle(u).overflow!=="visible"?u:M.getOverflowParent(u.parentElement)},M.getIdFromTrigger=function(u){var p=u.getAttribute("data-target");return p||(p=(p=u.getAttribute("href"))?p.slice(1):""),p},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var L=Date.now||function(){return new Date().getTime()};M.throttle=function(u,p,y){var w=void 0,d=void 0,n=void 0,s=null,o=0;y||(y={});var h=function(){o=y.leading===!1?0:L(),s=null,n=u.apply(w,d),w=d=null};return function(){var m=L();o||y.leading!==!1||(o=m);var C=p-(m-o);return w=this,d=arguments,C<=0?(clearTimeout(s),s=null,o=m,n=u.apply(w,d),w=d=null):s||y.trailing===!1||(s=setTimeout(h,C)),n}};var A={scope:{}};A.defineProperty=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){if(y.get||y.set)throw new TypeError("ES3 does not support getters and setters.");u!=Array.prototype&&u!=Object.prototype&&(u[p]=y.value)},A.getGlobal=function(u){return typeof window<"u"&&window===u?u:typeof ge<"u"&&ge!=null?ge:u},A.global=A.getGlobal(ge),A.SYMBOL_PREFIX="jscomp_symbol_",A.initSymbol=function(){A.initSymbol=function(){},A.global.Symbol||(A.global.Symbol=A.Symbol)},A.symbolCounter_=0,A.Symbol=function(u){return A.SYMBOL_PREFIX+(u||"")+A.symbolCounter_++},A.initSymbolIterator=function(){A.initSymbol();var u=A.global.Symbol.iterator;u||(u=A.global.Symbol.iterator=A.global.Symbol("iterator")),typeof Array.prototype[u]!="function"&&A.defineProperty(Array.prototype,u,{configurable:!0,writable:!0,value:function(){return A.arrayIterator(this)}}),A.initSymbolIterator=function(){}},A.arrayIterator=function(u){var p=0;return A.iteratorPrototype(function(){return p<u.length?{done:!1,value:u[p++]}:{done:!0}})},A.iteratorPrototype=function(u){return A.initSymbolIterator(),(u={next:u})[A.global.Symbol.iterator]=function(){return this},u},A.array=A.array||{},A.iteratorFromArray=function(u,p){A.initSymbolIterator(),u instanceof String&&(u+="");var y=0,w={next:function(){if(y<u.length){var d=y++;return{value:p(d,u[d]),done:!1}}return w.next=function(){return{done:!0,value:void 0}},w.next()}};return w[Symbol.iterator]=function(){return w},w},A.polyfill=function(u,p,y,w){if(p){for(y=A.global,u=u.split("."),w=0;w<u.length-1;w++){var d=u[w];d in y||(y[d]={}),y=y[d]}(p=p(w=y[u=u[u.length-1]]))!=w&&p!=null&&A.defineProperty(y,u,{configurable:!0,writable:!0,value:p})}},A.polyfill("Array.prototype.keys",function(u){return u||function(){return A.iteratorFromArray(this,function(p){return p})}},"es6-impl","es3");var U=ge;M.anime=function(){function u(k){if(!J.col(k))try{return document.querySelectorAll(k)}catch{}}function p(k,x){for(var I=k.length,P=2<=arguments.length?x:void 0,j=[],N=0;N<I;N++)if(N in k){var V=k[N];x.call(P,V,N,k)&&j.push(V)}return j}function y(k){return k.reduce(function(x,I){return x.concat(J.arr(I)?y(I):I)},[])}function w(k){return J.arr(k)?k:(J.str(k)&&(k=u(k)||k),k instanceof NodeList||k instanceof HTMLCollection?[].slice.call(k):[k])}function d(k,x){return k.some(function(I){return I===x})}function n(k){var x,I={};for(x in k)I[x]=k[x];return I}function s(k,x){var I,P=n(k);for(I in k)P[I]=x.hasOwnProperty(I)?x[I]:k[I];return P}function o(k,x){var I,P=n(k);for(I in x)P[I]=J.und(k[I])?x[I]:k[I];return P}function h(k){if(k=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(k))return k[2]}function m(k,x){return J.fnc(k)?k(x.target,x.id,x.total):k}function C(k,x){if(x in k.style)return getComputedStyle(k).getPropertyValue(x.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function S(k,x){return J.dom(k)&&d(Ne,x)?"transform":J.dom(k)&&(k.getAttribute(x)||J.svg(k)&&k[x])?"attribute":J.dom(k)&&x!=="transform"&&C(k,x)?"css":k[x]!=null?"object":void 0}function B(k,x){switch(S(k,x)){case"transform":return function(I,P){var j,N=-1<(j=P).indexOf("translate")||j==="perspective"?"px":-1<j.indexOf("rotate")||-1<j.indexOf("skew")?"deg":void 0,N=-1<P.indexOf("scale")?1:0+N;if(!(I=I.style.transform))return N;for(var V=[],z=[],X=[],K=/(\w+)\((.+?)\)/g;V=K.exec(I);)z.push(V[1]),X.push(V[2]);return(I=p(X,function(se,v){return z[v]===P})).length?I[0]:N}(k,x);case"css":return C(k,x);case"attribute":return k.getAttribute(x)}return k[x]||0}function R(k,x){var I=/^(\*=|\+=|-=)/.exec(k);if(!I)return k;var P=h(k)||0;switch(x=parseFloat(x),k=parseFloat(k.replace(I[0],"")),I[0][0]){case"+":return x+k+P;case"-":return x-k+P;case"*":return x*k+P}}function H(k,x){return Math.sqrt(Math.pow(x.x-k.x,2)+Math.pow(x.y-k.y,2))}function W(k){k=k.points;for(var x,I=0,P=0;P<k.numberOfItems;P++){var j=k.getItem(P);0<P&&(I+=H(x,j)),x=j}return I}function F(k){if(k.getTotalLength)return k.getTotalLength();switch(k.tagName.toLowerCase()){case"circle":return 2*Math.PI*k.getAttribute("r");case"rect":return 2*k.getAttribute("width")+2*k.getAttribute("height");case"line":return H({x:k.getAttribute("x1"),y:k.getAttribute("y1")},{x:k.getAttribute("x2"),y:k.getAttribute("y2")});case"polyline":return W(k);case"polygon":var x=k.points;return W(k)+H(x.getItem(x.numberOfItems-1),x.getItem(0))}}function oe(k,x){function I(V){return V=V===void 0?0:V,k.el.getPointAtLength(1<=x+V?x+V:0)}var P=I(),j=I(-1),N=I(1);switch(k.property){case"x":return P.x;case"y":return P.y;case"angle":return 180*Math.atan2(N.y-j.y,N.x-j.x)/Math.PI}}function q(k,x){var I,P=/-?\d*\.?\d+/g;if(I=J.pth(k)?k.totalLength:k,J.col(I))if(J.rgb(I)){var j=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(I);I=j?"rgba("+j[1]+",1)":I}else I=J.hex(I)?function(N){N=N.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(X,K,se,v){return K+K+se+se+v+v});var z=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(N);N=parseInt(z[1],16);var V=parseInt(z[2],16),z=parseInt(z[3],16);return"rgba("+N+","+V+","+z+",1)"}(I):J.hsl(I)?function(N){function V(_,T,D){return D<0&&(D+=1),1<D&&--D,D<1/6?_+6*(T-_)*D:D<.5?T:D<2/3?_+(T-_)*(2/3-D)*6:_}var K=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(N)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(N);N=parseInt(K[1])/360;var z=parseInt(K[2])/100,X=parseInt(K[3])/100,K=K[4]||1;if(z==0)X=z=N=X;else{var se=X<.5?X*(1+z):X+z-X*z,v=2*X-se,X=V(v,se,N+1/3),z=V(v,se,N);N=V(v,se,N-1/3)}return"rgba("+255*X+","+255*z+","+255*N+","+K+")"}(I):void 0;else j=(j=h(I))?I.substr(0,I.length-j.length):I,I=x&&!/\s/g.test(I)?j+x:j;return{original:I+="",numbers:I.match(P)?I.match(P).map(Number):[0],strings:J.str(k)||x?I.split(P):[]}}function G(k){return p(k=k?y(J.arr(k)?k.map(w):w(k)):[],function(x,I,P){return P.indexOf(x)===I})}function te(k,x){var I=n(x);if(J.arr(k)){var P=k.length;P!==2||J.obj(k[0])?J.fnc(x.duration)||(I.duration=x.duration/P):k={value:k}}return w(k).map(function(j,N){return N=N?0:x.delay,j=J.obj(j)&&!J.pth(j)?j:{value:j},J.und(j.delay)&&(j.delay=N),j}).map(function(j){return o(j,I)})}function re(k,x){var I;return k.tweens.map(function(P){var j=(P=function(X,K){var se,v={};for(se in X){var _=m(X[se],K);J.arr(_)&&(_=_.map(function(T){return m(T,K)})).length===1&&(_=_[0]),v[se]=_}return v.duration=parseFloat(v.duration),v.delay=parseFloat(v.delay),v}(P,x)).value,z=B(x.target,k.name),N=I?I.to.original:z,N=J.arr(j)?j[0]:N,V=R(J.arr(j)?j[1]:j,N),z=h(V)||h(N)||h(z);return P.from=q(N,z),P.to=q(V,z),P.start=I?I.end:k.offset,P.end=P.start+P.delay+P.duration,P.easing=function(X){return J.arr(X)?Te.apply(this,X):Oe[X]}(P.easing),P.elasticity=(1e3-Math.min(Math.max(P.elasticity,1),999))/1e3,P.isPath=J.pth(j),P.isColor=J.col(P.from.original),P.isColor&&(P.round=1),I=P})}function Z(k,x,I,P){var j=k==="delay";return x.length?(j?Math.min:Math.max).apply(Math,x.map(function(N){return N[k]})):j?P.delay:I.offset+P.delay+P.duration}function me(k){var x,I,P,j,N=s(We,k),V=s($e,k),z=(I=k.targets,(P=G(I)).map(function(se,v){return{target:se,id:v,total:P.length}})),X=[],K=o(N,V);for(x in k)K.hasOwnProperty(x)||x==="targets"||X.push({name:x,offset:K.offset,tweens:te(k[x],V)});return j=X,k=p(y(z.map(function(se){return j.map(function(v){var _=S(se.target,v.name);if(_){var T=re(v,se);v={type:_,property:v.name,animatable:se,tweens:T,duration:T[T.length-1].end,delay:T[0].delay}}else v=void 0;return v})})),function(se){return!J.und(se)}),o(N,{children:[],animatables:z,animations:k,duration:Z("duration",k,N,V),delay:Z("delay",k,N,V)})}function ie(k){function x(){return window.Promise&&new Promise(function(T){return se=T})}function I(T){return _.reversed?_.duration-T:T}function P(T){for(var D=0,Q={},ne=_.animations,fe=ne.length;D<fe;){var he=ne[D],ce=he.animatable,de=he.tweens,be=de.length-1,ae=de[be];be&&(ae=p(de,function(Cn){return T<Cn.end})[0]||ae);for(var de=Math.min(Math.max(T-ae.start-ae.delay,0),ae.duration)/ae.duration,Je=isNaN(de)?1:ae.easing(de,ae.elasticity),de=ae.to.strings,tt=ae.round,be=[],De=void 0,De=ae.to.numbers.length,Pe=0;Pe<De;Pe++){var Qe=void 0,Qe=ae.to.numbers[Pe],ki=ae.from.numbers[Pe],Qe=ae.isPath?oe(ae.value,Je*Qe):ki+Je*(Qe-ki);tt&&(ae.isColor&&2<Pe||(Qe=Math.round(Qe*tt)/tt)),be.push(Qe)}if(ae=de.length)for(De=de[0],Je=0;Je<ae;Je++)tt=de[Je+1],Pe=be[Je],isNaN(Pe)||(De=tt?De+(Pe+tt):De+(Pe+" "));else De=be[0];Ae[he.type](ce.target,he.property,De,Q,ce.id),he.currentValue=De,D++}if(D=Object.keys(Q).length)for(ne=0;ne<D;ne++)we||(we=C(document.body,"transform")?"transform":"-webkit-transform"),_.animatables[ne].target.style[we]=Q[ne].join(" ");_.currentTime=T,_.progress=T/_.duration*100}function j(T){_[T]&&_[T](_)}function N(){_.remaining&&_.remaining!==!0&&_.remaining--}function V(T){var D=_.duration,Q=_.offset,ne=Q+_.delay,fe=_.currentTime,he=_.reversed,ce=I(T);if(_.children.length){var de=_.children,be=de.length;if(ce>=_.currentTime)for(var ae=0;ae<be;ae++)de[ae].seek(ce);else for(;be--;)de[be].seek(ce)}(ne<=ce||!D)&&(_.began||(_.began=!0,j("begin")),j("run")),Q<ce&&ce<D?P(ce):(ce<=Q&&fe!==0&&(P(0),he&&N()),(D<=ce&&fe!==D||!D)&&(P(D),he||N())),j("update"),D<=T&&(_.remaining?(X=z,_.direction==="alternate"&&(_.reversed=!_.reversed)):(_.pause(),_.completed||(_.completed=!0,j("complete"),"Promise"in window&&(se(),v=x()))),K=0)}k=k===void 0?{}:k;var z,X,K=0,se=null,v=x(),_=me(k);return _.reset=function(){var T=_.direction,D=_.loop;for(_.currentTime=0,_.progress=0,_.paused=!0,_.began=!1,_.completed=!1,_.reversed=T==="reverse",_.remaining=T==="alternate"&&D===1?2:D,P(0),T=_.children.length;T--;)_.children[T].reset()},_.tick=function(T){z=T,X||(X=z),V((K+z-X)*ie.speed)},_.seek=function(T){V(I(T))},_.pause=function(){var T=ue.indexOf(_);-1<T&&ue.splice(T,1),_.paused=!0},_.play=function(){_.paused&&(_.paused=!1,X=0,K=I(_.currentTime),ue.push(_),xe||qe())},_.reverse=function(){_.reversed=!_.reversed,X=0,K=I(_.currentTime)},_.restart=function(){_.pause(),_.reset(),_.play()},_.finished=v,_.reset(),_.autoplay&&_.play(),_}var we,We={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},$e={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},Ne="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),J={arr:function(k){return Array.isArray(k)},obj:function(k){return-1<Object.prototype.toString.call(k).indexOf("Object")},pth:function(k){return J.obj(k)&&k.hasOwnProperty("totalLength")},svg:function(k){return k instanceof SVGElement},dom:function(k){return k.nodeType||J.svg(k)},str:function(k){return typeof k=="string"},fnc:function(k){return typeof k=="function"},und:function(k){return k===void 0},hex:function(k){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(k)},rgb:function(k){return/^rgb/.test(k)},hsl:function(k){return/^hsl/.test(k)},col:function(k){return J.hex(k)||J.rgb(k)||J.hsl(k)}},Te=function(){function k(x,I,P){return(((1-3*P+3*I)*x+(3*P-6*I))*x+3*I)*x}return function(x,I,P,j){if(0<=x&&x<=1&&0<=P&&P<=1){var N=new Float32Array(11);if(x!==I||P!==j)for(var V=0;V<11;++V)N[V]=k(.1*V,x,P);return function(z){if(x===I&&P===j)return z;if(z===0)return 0;if(z===1)return 1;for(var X=0,K=1;K!==10&&N[K]<=z;++K)X+=.1;var K=X+(z-N[--K])/(N[K+1]-N[K])*.1,se=3*(1-3*P+3*x)*K*K+2*(3*P-6*x)*K+3*x;if(.001<=se){for(X=0;X<4&&(se=3*(1-3*P+3*x)*K*K+2*(3*P-6*x)*K+3*x)!=0;++X)var v=k(K,x,P)-z,K=K-v/se;z=K}else if(se===0)z=K;else{for(var K=X,X=X+.1,_=0;0<(se=k(v=K+(X-K)/2,x,P)-z)?X=v:K=v,1e-7<Math.abs(se)&&++_<10;);z=v}return k(z,I,j)}}}}(),Oe=function(){function k(V,z){return V===0||V===1?V:-Math.pow(2,10*(V-1))*Math.sin(2*(V-1-z/(2*Math.PI)*Math.asin(1))*Math.PI/z)}var x,I="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),P={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],k],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(V,z){return 1-k(1-V,z)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(V,z){return V<.5?k(2*V,z)/2:1-k(-2*V+2,z)/2}]},j={linear:Te(.25,.25,.75,.75)},N={};for(x in P)N.type=x,P[N.type].forEach(function(V){return function(z,X){j["ease"+V.type+I[X]]=J.fnc(z)?z:Te.apply(U,z)}}(N)),N={type:N.type};return j}(),Ae={css:function(k,x,I){return k.style[x]=I},attribute:function(k,x,I){return k.setAttribute(x,I)},object:function(k,x,I){return k[x]=I},transform:function(k,x,I,P,j){P[j]||(P[j]=[]),P[j].push(x+"("+I+")")}},ue=[],xe=0,qe=function(){function k(){xe=requestAnimationFrame(x)}function x(I){var P=ue.length;if(P){for(var j=0;j<P;)ue[j]&&ue[j].tick(I),j++;k()}else cancelAnimationFrame(xe),xe=0}return k}();return ie.version="2.2.0",ie.speed=1,ie.running=ue,ie.remove=function(k){k=G(k);for(var x=ue.length;x--;)for(var I=ue[x],P=I.animations,j=P.length;j--;)d(k,P[j].animatable.target)&&(P.splice(j,1),P.length||I.pause())},ie.getValue=B,ie.path=function(k,x){var I=J.str(k)?u(k)[0]:k,P=x||100;return function(j){return{el:I,property:j,totalLength:F(I)*(P/100)}}},ie.setDashoffset=function(k){var x=F(k);return k.setAttribute("stroke-dasharray",x),x},ie.bezier=Te,ie.easings=Oe,ie.timeline=function(k){var x=ie(k);return x.pause(),x.duration=0,x.add=function(I){return x.children.forEach(function(P){P.began=!0,P.completed=!0}),w(I).forEach(function(P){var j=o(P,s($e,k||{}));j.targets=j.targets||k.targets,P=x.duration;var N=j.offset;j.autoplay=!1,j.direction=x.direction,j.offset=J.und(N)?P:R(N,P),x.began=!0,x.completed=!0,x.seek(j.offset),(j=ie(j)).began=!0,j.completed=!0,j.duration>P&&(x.duration=j.duration),x.children.push(j)}),x.seek(0),x.reset(),x.autoplay&&x.restart(),x},x},ie.random=function(k,x){return Math.floor(Math.random()*(x-k+1))+k},ie}(),function(u,p){var y={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));(h.el.M_Collapsible=h).options=u.extend({},n.defaults,o),h.$headers=h.$el.children("li").children(".collapsible-header"),h.$headers.attr("tabindex",0),h._setupEventHandlers();var m=h.$el.children("li.active").children(".collapsible-body");return h.options.accordion?m.first().css("display","block"):m.css("display","block"),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var s=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(o){o.addEventListener("keydown",s._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var s=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(o){o.removeEventListener("keydown",s._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(s){var o=u(s.target).closest(".collapsible-header");if(s.target&&o.length){var h=o.closest(".collapsible");if(h[0]===this.el){var m=o.closest("li"),C=h.children("li"),S=m[0].classList.contains("active"),B=C.index(m);S?this.close(B):this.open(B)}}}},{key:"_handleCollapsibleKeydown",value:function(s){s.keyCode===13&&this._handleCollapsibleClickBound(s)}},{key:"_animateIn",value:function(s){var o=this,h=this.$el.children("li").eq(s);if(h.length){var m=h.children(".collapsible-body");p.remove(m[0]),m.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var C=m.css("padding-top"),S=m.css("padding-bottom"),B=m[0].scrollHeight;m.css({paddingTop:0,paddingBottom:0}),p({targets:m[0],height:B,paddingTop:C,paddingBottom:S,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(R){m.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),typeof o.options.onOpenEnd=="function"&&o.options.onOpenEnd.call(o,h[0])}})}}},{key:"_animateOut",value:function(s){var o=this,h=this.$el.children("li").eq(s);if(h.length){var m=h.children(".collapsible-body");p.remove(m[0]),m.css("overflow","hidden"),p({targets:m[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){m.css({height:"",overflow:"",padding:"",display:""}),typeof o.options.onCloseEnd=="function"&&o.options.onCloseEnd.call(o,h[0])}})}}},{key:"open",value:function(s){var o=this,h=this.$el.children("li").eq(s);if(h.length&&!h[0].classList.contains("active")){if(typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,h[0]),this.options.accordion){var m=this.$el.children("li");this.$el.children("li.active").each(function(C){var S=m.index(u(C));o.close(S)})}h[0].classList.add("active"),this._animateIn(s)}}},{key:"close",value:function(s){var o=this.$el.children("li").eq(s);o.length&&o[0].classList.contains("active")&&(typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,o[0]),o[0].classList.remove("active"),this._animateOut(s))}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Collapsible}},{key:"defaults",get:function(){return y}}]),n}();M.Collapsible=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"collapsible","M_Collapsible")}(cash,M.anime),function(u,p){var y={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return h.el.M_Dropdown=h,n._dropdowns.push(h),h.id=M.getIdFromTrigger(s),h.dropdownEl=document.getElementById(h.id),h.$dropdownEl=u(h.dropdownEl),h.options=u.extend({},n.defaults,o),h.isOpen=!1,h.isScrollable=!1,h.isTouchMoving=!1,h.focusedIndex=-1,h.filterQuery=[],h.options.container?u(h.options.container).append(h.dropdownEl):h.$el.after(h.dropdownEl),h._makeDropdownFocusable(),h._resetFilterQueryBound=h._resetFilterQuery.bind(h),h._handleDocumentClickBound=h._handleDocumentClick.bind(h),h._handleDocumentTouchmoveBound=h._handleDocumentTouchmove.bind(h),h._handleDropdownClickBound=h._handleDropdownClick.bind(h),h._handleDropdownKeydownBound=h._handleDropdownKeydown.bind(h),h._handleTriggerKeydownBound=h._handleTriggerKeydown.bind(h),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),n._dropdowns.splice(n._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(s){s.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(s){var o=s.toElement||s.relatedTarget,h=!!u(o).closest(".dropdown-content").length,m=!1,C=u(o).closest(".dropdown-trigger");C.length&&C[0].M_Dropdown&&C[0].M_Dropdown.isOpen&&(m=!0),m||h||this.close()}},{key:"_handleDocumentClick",value:function(s){var o=this,h=u(s.target);this.options.closeOnClick&&h.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){o.close()},0):!h.closest(".dropdown-trigger").length&&h.closest(".dropdown-content").length||setTimeout(function(){o.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(s){s.which!==M.keys.ARROW_DOWN&&s.which!==M.keys.ENTER||this.isOpen||(s.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(s){u(s.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(s){if(typeof this.options.onItemClick=="function"){var o=u(s.target).closest("li")[0];this.options.onItemClick.call(this,o)}}},{key:"_handleDropdownKeydown",value:function(s){if(s.which===M.keys.TAB)s.preventDefault(),this.close();else if(s.which!==M.keys.ARROW_DOWN&&s.which!==M.keys.ARROW_UP||!this.isOpen)if(s.which===M.keys.ENTER&&this.isOpen){var o=this.dropdownEl.children[this.focusedIndex],h=u(o).find("a, button").first();h.length?h[0].click():o.click()}else s.which===M.keys.ESC&&this.isOpen&&(s.preventDefault(),this.close());else{s.preventDefault();var m=s.which===M.keys.ARROW_DOWN?1:-1,C=this.focusedIndex,S=!1;do if(C+=m,this.dropdownEl.children[C]&&this.dropdownEl.children[C].tabIndex!==-1){S=!0;break}while(C<this.dropdownEl.children.length&&0<=C);S&&(this.focusedIndex=C,this._focusFocusedItem())}var B=String.fromCharCode(s.which).toLowerCase();if(B&&[9,13,27,38,40].indexOf(s.which)===-1){this.filterQuery.push(B);var R=this.filterQuery.join(""),H=u(this.dropdownEl).find("li").filter(function(W){return u(W).text().toLowerCase().indexOf(R)===0})[0];H&&(this.focusedIndex=u(H).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,u(this.dropdownEl).children().each(function(s){s.getAttribute("tabindex")||s.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){0<=this.focusedIndex&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var s=this.el.getBoundingClientRect(),o=this.dropdownEl.getBoundingClientRect(),h=o.height,m=o.width,C=s.left-o.left,S=s.top-o.top,B={left:C,top:S,height:h,width:m},R=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,H=M.checkPossibleAlignments(this.el,R,B,this.options.coverTrigger?0:s.height),W="top",F=this.options.alignment;if(S+=this.options.coverTrigger?0:s.height,this.isScrollable=!1,H.top||(H.bottom?W="bottom":(this.isScrollable=!0,H.spaceOnTop>H.spaceOnBottom?(W="bottom",h+=H.spaceOnTop,S-=H.spaceOnTop):h+=H.spaceOnBottom)),!H[F]){var oe=F==="left"?"right":"left";H[oe]?F=oe:H.spaceOnLeft>H.spaceOnRight?(F="right",m+=H.spaceOnLeft,C-=H.spaceOnLeft):(F="left",m+=H.spaceOnRight)}return W==="bottom"&&(S=S-o.height+(this.options.coverTrigger?s.height:0)),F==="right"&&(C=C-o.width+s.width),{x:C,y:S,verticalAlignment:W,horizontalAlignment:F,height:h,width:m}}},{key:"_animateIn",value:function(){var s=this;p.remove(this.dropdownEl),p({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(o){if(s.options.autoFocus&&s.dropdownEl.focus(),typeof s.options.onOpenEnd=="function"){var h=o.animatables[0].target;s.options.onOpenEnd.call(h,s.el)}}})}},{key:"_animateOut",value:function(){var s=this;p.remove(this.dropdownEl),p({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(o){s._resetDropdownStyles(),typeof s.options.onCloseEnd=="function"&&(o.animatables[0].target,s.options.onCloseEnd.call(s,s.el))}})}},{key:"_placeDropdown",value:function(){var s=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=s+"px";var o=this._getDropdownPosition();this.dropdownEl.style.left=o.x+"px",this.dropdownEl.style.top=o.y+"px",this.dropdownEl.style.height=o.height+"px",this.dropdownEl.style.width=o.width+"px",this.dropdownEl.style.transformOrigin=(o.horizontalAlignment==="left"?"0":"100%")+" "+(o.verticalAlignment==="top"?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Dropdown}},{key:"defaults",get:function(){return y}}]),n}();w._dropdowns=[],window.M.Dropdown=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"dropdown","M_Dropdown")}(cash,M.anime),function(u,p){var y={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_Modal=h).options=u.extend({},n.defaults,o),h.isOpen=!1,h.id=h.$el.attr("id"),h._openingTrigger=void 0,h.$overlay=u('<div class="modal-overlay"></div>'),h.el.tabIndex=0,h._nthModalOpened=0,n._count++,h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){n._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),n._count===1&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){n._count===0&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(s){var o=u(s.target).closest(".modal-trigger");if(o.length){var h=M.getIdFromTrigger(o[0]),m=document.getElementById(h).M_Modal;m&&m.open(o),s.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(s){u(s.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(s){s.keyCode===27&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(s){this.el.contains(s.target)||this._nthModalOpened!==n._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var s=this;u.extend(this.el.style,{display:"block",opacity:0}),u.extend(this.$overlay[0].style,{display:"block",opacity:0}),p({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var o={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){typeof s.options.onOpenEnd=="function"&&s.options.onOpenEnd.call(s,s.el,s._openingTrigger)}};this.el.classList.contains("bottom-sheet")?u.extend(o,{bottom:0,opacity:1}):u.extend(o,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),p(o)}},{key:"_animateOut",value:function(){var s=this;p({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var o={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){s.el.style.display="none",s.$overlay.remove(),typeof s.options.onCloseEnd=="function"&&s.options.onCloseEnd.call(s,s.el)}};this.el.classList.contains("bottom-sheet")?u.extend(o,{bottom:"-100%",opacity:0}):u.extend(o,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),p(o)}},{key:"open",value:function(s){if(!this.isOpen)return this.isOpen=!0,n._modalsOpen++,this._nthModalOpened=n._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*n._modalsOpen,this.el.style.zIndex=1e3+2*n._modalsOpen+1,this._openingTrigger=s?s[0]:void 0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),p.remove(this.el),p.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,n._modalsOpen--,this._nthModalOpened=0,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),n._modalsOpen===0&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),p.remove(this.el),p.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Modal}},{key:"defaults",get:function(){return y}}]),n}();w._modalsOpen=0,w._count=0,M.Modal=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"modal","M_Modal")}(cash,M.anime),function(u,p){var y={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_Materialbox=h).options=u.extend({},n.defaults,o),h.overlayActive=!1,h.doneAnimating=!0,h.placeholder=u("<div></div>").addClass("material-placeholder"),h.originalWidth=0,h.originalHeight=0,h.originInlineStyles=h.$el.attr("style"),h.caption=h.el.getAttribute("data-caption")||"",h.$el.before(h.placeholder),h.placeholder.append(h.$el),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,u(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(s){this.doneAnimating===!1||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(s){s.keyCode===27&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=u();for(var s=this.placeholder[0].parentNode;s!==null&&!u(s).is(document);){var o=u(s);o.css("overflow")!=="visible"&&(o.css("overflow","visible"),this.ancestorsChanged===void 0?this.ancestorsChanged=o:this.ancestorsChanged=this.ancestorsChanged.add(o)),s=s.parentNode}}},{key:"_animateImageIn",value:function(){var s=this,o={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){s.doneAnimating=!0,typeof s.options.onOpenEnd=="function"&&s.options.onOpenEnd.call(s,s.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),this.maxWidth!=="none"&&(o.maxWidth=this.newWidth),this.maxHeight!=="none"&&(o.maxHeight=this.newHeight),p(o)}},{key:"_animateImageOut",value:function(){var s=this,o={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){s.placeholder.css({height:"",width:"",position:"",top:"",left:""}),s.attrWidth&&s.$el.attr("width",s.attrWidth),s.attrHeight&&s.$el.attr("height",s.attrHeight),s.$el.removeAttr("style"),s.originInlineStyles&&s.$el.attr("style",s.originInlineStyles),s.$el.removeClass("active"),s.doneAnimating=!0,s.ancestorsChanged.length&&s.ancestorsChanged.css("overflow",""),typeof s.options.onCloseEnd=="function"&&s.options.onCloseEnd.call(s,s.el)}};p(o)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var s=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=u('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){s.doneAnimating&&s.close()}),this.$el.before(this.$overlay);var o=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*o.left+"px",top:-1*o.top+"px"}),p.remove(this.el),p.remove(this.$overlay[0]),p({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),this.caption!==""&&(this.$photocaption&&p.remove(this.$photoCaption[0]),this.$photoCaption=u('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),u("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),p({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var h=0,m=this.originalWidth/this.windowWidth,C=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,C<m?(h=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*h):(h=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*h,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var s=this;this._updateVars(),this.doneAnimating=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),p.remove(this.el),p.remove(this.$overlay[0]),this.caption!==""&&p.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),p({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){s.overlayActive=!1,s.$overlay.remove()}}),this._animateImageOut(),this.caption!==""&&p({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){s.$photoCaption.remove()}})}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Materialbox}},{key:"defaults",get:function(){return y}}]),n}();M.Materialbox=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"materialbox","M_Materialbox")}(cash,M.anime),function(u){var p={responsiveThreshold:0},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(o.el.M_Parallax=o).options=u.extend({},d.defaults,s),o._enabled=window.innerWidth>o.options.responsiveThreshold,o.$img=o.$el.find("img").first(),o.$img.each(function(){this.complete&&u(this).trigger("load")}),o._updateParallax(),o._setupEventHandlers(),o._setupStyles(),d._parallaxes.push(o),o}return l(d,f),i(d,[{key:"destroy",value:function(){d._parallaxes.splice(d._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),d._parallaxes.length===0&&(d._handleScrollThrottled=M.throttle(d._handleScroll,5),window.addEventListener("scroll",d._handleScrollThrottled),d._handleWindowResizeThrottled=M.throttle(d._handleWindowResize,5),window.addEventListener("resize",d._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),d._parallaxes.length===0&&(window.removeEventListener("scroll",d._handleScrollThrottled),window.removeEventListener("resize",d._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var n=0<this.$el.height()?this.el.parentNode.offsetHeight:500,s=this.$img[0].offsetHeight-n,o=this.$el.offset().top+n,h=this.$el.offset().top,m=M.getDocumentScrollTop(),C=window.innerHeight,S=s*((m+C-h)/(n+C));this._enabled?m<o&&h<m+C&&(this.$img[0].style.transform="translate3D(-50%, "+S+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Parallax}},{key:"_handleScroll",value:function(){for(var n=0;n<d._parallaxes.length;n++){var s=d._parallaxes[n];s._updateParallax.call(s)}}},{key:"_handleWindowResize",value:function(){for(var n=0;n<d._parallaxes.length;n++){var s=d._parallaxes[n];s._enabled=window.innerWidth>s.options.responsiveThreshold}}},{key:"defaults",get:function(){return p}}]),d}();y._parallaxes=[],M.Parallax=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"parallax","M_Parallax")}(cash),function(u,p){var y={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_Tabs=h).options=u.extend({},n.defaults,o),h.$tabLinks=h.$el.children("li.tab").children("a"),h.index=0,h._setupActiveTabLink(),h.options.swipeable?h._setupSwipeableTabs():h._setupNormalTabs(),h._setTabsAndTabWidth(),h._createIndicator(),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),this.tabWidth!==0&&this.tabsWidth!==0&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(s){var o=this,h=u(s.target).closest("li.tab"),m=u(s.target).closest("a");if(m.length&&m.parent().hasClass("tab")){if(h.hasClass("disabled"))s.preventDefault();else if(!m.attr("target")){this.$activeTabLink.removeClass("active");var C=this.$content;this.$activeTabLink=m,this.$content=u(M.escapeHash(m[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var S=this.index;this.index=Math.max(this.$tabLinks.index(m),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){typeof o.options.onShow=="function"&&o.options.onShow.call(o,o.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),typeof this.options.onShow=="function"&&this.options.onShow.call(this,this.$content[0]),C.length&&!C.is(this.$content)&&(C[0].style.display="none",C.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(S),s.preventDefault()}}}},{key:"_createIndicator",value:function(){var s=this,o=document.createElement("li");o.classList.add("indicator"),this.el.appendChild(o),this._indicator=o,setTimeout(function(){s._indicator.style.left=s._calcLeftPos(s.$activeTabLink)+"px",s._indicator.style.right=s._calcRightPos(s.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=u(this.$tabLinks.filter('[href="'+location.hash+'"]')),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=u(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var s=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var o=u();this.$tabLinks.each(function(C){var S=u(M.escapeHash(C.hash));S.addClass("carousel-item"),o=o.add(S)});var h=u('<div class="tabs-content carousel carousel-slider"></div>');o.first().before(h),h.append(o),o[0].style.display="";var m=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(h[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(C){var S=s.index;s.index=u(C).index(),s.$activeTabLink.removeClass("active"),s.$activeTabLink=s.$tabLinks.eq(s.index),s.$activeTabLink.addClass("active"),s._animateIndicator(S),typeof s.options.onShow=="function"&&s.options.onShow.call(s,s.$content[0])}}),this._tabsCarousel.set(m)}},{key:"_teardownSwipeableTabs",value:function(){var s=this._tabsCarousel.$el;this._tabsCarousel.destroy(),s.after(s.children()),s.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(s){if(s.hash){var o=u(M.escapeHash(s.hash));o.length&&(o[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(s){if(s.hash){var o=u(M.escapeHash(s.hash));o.length&&(o[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(s){return Math.ceil(this.tabsWidth-s.position().left-s[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(s){return Math.floor(s.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(s){var o=0,h=0;0<=this.index-s?o=90:h=90;var m={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:o},right:{value:this._calcRightPos(this.$activeTabLink),delay:h},duration:this.options.duration,easing:"easeOutQuad"};p.remove(this._indicator),p(m)}},{key:"select",value:function(s){var o=this.$tabLinks.filter('[href="#'+s+'"]');o.length&&o.trigger("click")}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Tabs}},{key:"defaults",get:function(){return y}}]),n}();window.M.Tabs=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"tabs","M_Tabs")}(cash,M.anime),function(u,p){var y={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_Tooltip=h).options=u.extend({},n.defaults,o),h.isOpen=!1,h.isHovered=!1,h.isFocused=!1,h._appendTooltipEl(),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){u(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var s=document.createElement("div");s.classList.add("material-tooltip"),this.tooltipEl=s;var o=document.createElement("div");o.classList.add("tooltip-content"),o.innerHTML=this.options.html,s.appendChild(o),document.body.appendChild(s)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(s){this.isOpen||(s=s===void 0||void 0,this.isOpen=!0,this.options=u.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(s))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var s=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){s.isHovered||s.isFocused||s._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(s){var o=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(o.isHovered||o.isFocused||s)&&o._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var s,o=this.el,h=this.tooltipEl,m=o.offsetHeight,C=o.offsetWidth,S=h.offsetHeight,B=h.offsetWidth,R=this.options.margin,H=void 0,W=void 0;this.xMovement=0,this.yMovement=0,H=o.getBoundingClientRect().top+M.getDocumentScrollTop(),W=o.getBoundingClientRect().left+M.getDocumentScrollLeft(),this.options.position==="top"?(H+=-S-R,W+=C/2-B/2,this.yMovement=-this.options.transitionMovement):this.options.position==="right"?(H+=m/2-S/2,W+=C+R,this.xMovement=this.options.transitionMovement):this.options.position==="left"?(H+=m/2-S/2,W+=-B-R,this.xMovement=-this.options.transitionMovement):(H+=m+R,W+=C/2-B/2,this.yMovement=this.options.transitionMovement),s=this._repositionWithinScreen(W,H,B,S),u(h).css({top:s.y+"px",left:s.x+"px"})}},{key:"_repositionWithinScreen",value:function(s,o,h,m){var C=M.getDocumentScrollLeft(),S=M.getDocumentScrollTop(),B=s-C,R=o-S,H={left:B,top:R,width:h,height:m},W=this.options.margin+this.options.transitionMovement,F=M.checkWithinContainer(document.body,H,W);return F.left?B=W:F.right&&(B-=B+h-window.innerWidth),F.top?R=W:F.bottom&&(R-=R+m-window.innerHeight),{x:B+C,y:R+S}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",p.remove(this.tooltipEl),p({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){p.remove(this.tooltipEl),p({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var s={},o=this.el.getAttribute("data-tooltip"),h=this.el.getAttribute("data-position");return o&&(s.html=o),h&&(s.position=h),s}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Tooltip}},{key:"defaults",get:function(){return y}}]),n}();M.Tooltip=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"tooltip","M_Tooltip")}(cash,M.anime),function(u){var p=p||{},y=document.querySelectorAll.bind(document);function w(o){var h="";for(var m in o)o.hasOwnProperty(m)&&(h+=m+":"+o[m]+";");return h}var d={duration:750,show:function(o,h){if(o.button===2)return!1;var m=h||this,C=document.createElement("div");C.className="waves-ripple",m.appendChild(C);var S,B,R,H,W,F,oe,q=(F={top:0,left:0},oe=(S=m)&&S.ownerDocument,B=oe.documentElement,S.getBoundingClientRect!==void 0&&(F=S.getBoundingClientRect()),R=(W=H=oe)!==null&&W===W.window?H:H.nodeType===9&&H.defaultView,{top:F.top+R.pageYOffset-B.clientTop,left:F.left+R.pageXOffset-B.clientLeft}),G=o.pageY-q.top,te=o.pageX-q.left,re="scale("+m.clientWidth/100*10+")";"touches"in o&&(G=o.touches[0].pageY-q.top,te=o.touches[0].pageX-q.left),C.setAttribute("data-hold",Date.now()),C.setAttribute("data-scale",re),C.setAttribute("data-x",te),C.setAttribute("data-y",G);var Z={top:G+"px",left:te+"px"};C.className=C.className+" waves-notransition",C.setAttribute("style",w(Z)),C.className=C.className.replace("waves-notransition",""),Z["-webkit-transform"]=re,Z["-moz-transform"]=re,Z["-ms-transform"]=re,Z["-o-transform"]=re,Z.transform=re,Z.opacity="1",Z["-webkit-transition-duration"]=d.duration+"ms",Z["-moz-transition-duration"]=d.duration+"ms",Z["-o-transition-duration"]=d.duration+"ms",Z["transition-duration"]=d.duration+"ms",Z["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",C.setAttribute("style",w(Z))},hide:function(o){n.touchup(o);var h=this,m=(h.clientWidth,null),C=h.getElementsByClassName("waves-ripple");if(!(0<C.length))return!1;var S=(m=C[C.length-1]).getAttribute("data-x"),B=m.getAttribute("data-y"),R=m.getAttribute("data-scale"),H=350-(Date.now()-Number(m.getAttribute("data-hold")));H<0&&(H=0),setTimeout(function(){var W={top:B+"px",left:S+"px",opacity:"0","-webkit-transition-duration":d.duration+"ms","-moz-transition-duration":d.duration+"ms","-o-transition-duration":d.duration+"ms","transition-duration":d.duration+"ms","-webkit-transform":R,"-moz-transform":R,"-ms-transform":R,"-o-transform":R,transform:R};m.setAttribute("style",w(W)),setTimeout(function(){try{h.removeChild(m)}catch{return!1}},d.duration)},H)},wrapInput:function(o){for(var h=0;h<o.length;h++){var m=o[h];if(m.tagName.toLowerCase()==="input"){var C=m.parentNode;if(C.tagName.toLowerCase()==="i"&&C.className.indexOf("waves-effect")!==-1)continue;var S=document.createElement("i");S.className=m.className+" waves-input-wrapper";var B=m.getAttribute("style");B||(B=""),S.setAttribute("style",B),m.className="waves-button-input",m.removeAttribute("style"),C.replaceChild(S,m),S.appendChild(m)}}}},n={touches:0,allowEvent:function(o){var h=!0;return o.type==="touchstart"?n.touches+=1:o.type==="touchend"||o.type==="touchcancel"?setTimeout(function(){0<n.touches&&(n.touches-=1)},500):o.type==="mousedown"&&0<n.touches&&(h=!1),h},touchup:function(o){n.allowEvent(o)}};function s(o){var h=function(m){if(n.allowEvent(m)===!1)return null;for(var C=null,S=m.target||m.srcElement;S.parentNode!==null;){if(!(S instanceof SVGElement)&&S.className.indexOf("waves-effect")!==-1){C=S;break}S=S.parentNode}return C}(o);h!==null&&(d.show(o,h),"ontouchstart"in u&&(h.addEventListener("touchend",d.hide,!1),h.addEventListener("touchcancel",d.hide,!1)),h.addEventListener("mouseup",d.hide,!1),h.addEventListener("mouseleave",d.hide,!1),h.addEventListener("dragend",d.hide,!1))}p.displayEffect=function(o){"duration"in(o=o||{})&&(d.duration=o.duration),d.wrapInput(y(".waves-effect")),"ontouchstart"in u&&document.body.addEventListener("touchstart",s,!1),document.body.addEventListener("mousedown",s,!1)},p.attach=function(o){o.tagName.toLowerCase()==="input"&&(d.wrapInput([o]),o=o.parentNode),"ontouchstart"in u&&o.addEventListener("touchstart",s,!1),o.addEventListener("mousedown",s,!1)},u.Waves=p,document.addEventListener("DOMContentLoaded",function(){p.displayEffect()},!1)}(window),function(u,p){var y={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},w=function(){function d(n){c(this,d),this.options=u.extend({},d.defaults,n),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,d._toasts.length===0&&d._createContainer(),d._toasts.push(this);var s=this._createToast();(s.M_Toast=this).el=s,this.$el=u(s),this._animateIn(),this._setTimer()}return i(d,[{key:"_createToast",value:function(){var n=document.createElement("div");return n.classList.add("toast"),this.options.classes.length&&u(n).addClass(this.options.classes),(typeof HTMLElement=="object"?this.message instanceof HTMLElement:this.message&&typeof this.message=="object"&&this.message!==null&&this.message.nodeType===1&&typeof this.message.nodeName=="string")?n.appendChild(this.message):this.message.jquery?u(n).append(this.message[0]):n.innerHTML=this.message,d._container.appendChild(n),n}},{key:"_animateIn",value:function(){p({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var n=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){n.panning||(n.timeRemaining-=20),n.timeRemaining<=0&&n.dismiss()},20))}},{key:"dismiss",value:function(){var n=this;window.clearInterval(this.counterInterval);var s=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+s+"px)",this.el.style.opacity=0),p({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){typeof n.options.completeCallback=="function"&&n.options.completeCallback(),n.$el.remove(),d._toasts.splice(d._toasts.indexOf(n),1),d._toasts.length===0&&d._removeContainer()}})}}],[{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Toast}},{key:"_createContainer",value:function(){var n=document.createElement("div");n.setAttribute("id","toast-container"),n.addEventListener("touchstart",d._onDragStart),n.addEventListener("touchmove",d._onDragMove),n.addEventListener("touchend",d._onDragEnd),n.addEventListener("mousedown",d._onDragStart),document.addEventListener("mousemove",d._onDragMove),document.addEventListener("mouseup",d._onDragEnd),document.body.appendChild(n),d._container=n}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",d._onDragMove),document.removeEventListener("mouseup",d._onDragEnd),u(d._container).remove(),d._container=null}},{key:"_onDragStart",value:function(n){if(n.target&&u(n.target).closest(".toast").length){var s=u(n.target).closest(".toast")[0].M_Toast;s.panning=!0,(d._draggedToast=s).el.classList.add("panning"),s.el.style.transition="",s.startingXPos=d._xPos(n),s.time=Date.now(),s.xPos=d._xPos(n)}}},{key:"_onDragMove",value:function(n){if(d._draggedToast){n.preventDefault();var s=d._draggedToast;s.deltaX=Math.abs(s.xPos-d._xPos(n)),s.xPos=d._xPos(n),s.velocityX=s.deltaX/(Date.now()-s.time),s.time=Date.now();var o=s.xPos-s.startingXPos,h=s.el.offsetWidth*s.options.activationPercent;s.el.style.transform="translateX("+o+"px)",s.el.style.opacity=1-Math.abs(o/h)}}},{key:"_onDragEnd",value:function(){if(d._draggedToast){var n=d._draggedToast;n.panning=!1,n.el.classList.remove("panning");var s=n.xPos-n.startingXPos,o=n.el.offsetWidth*n.options.activationPercent;Math.abs(s)>o||1<n.velocityX?(n.wasSwiped=!0,n.dismiss()):(n.el.style.transition="transform .2s, opacity .2s",n.el.style.transform="",n.el.style.opacity=""),d._draggedToast=null}}},{key:"_xPos",value:function(n){return n.targetTouches&&1<=n.targetTouches.length?n.targetTouches[0].clientX:n.clientX}},{key:"dismissAll",value:function(){for(var n in d._toasts)d._toasts[n].dismiss()}},{key:"defaults",get:function(){return y}}]),d}();w._toasts=[],w._container=null,w._draggedToast=null,M.Toast=w,M.toast=function(d){return new w(d)}}(cash,M.anime),function(u,p){var y={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_Sidenav=h).id=h.$el.attr("id"),h.options=u.extend({},n.defaults,o),h.isOpen=!1,h.isFixed=h.el.classList.contains("sidenav-fixed"),h.isDragged=!1,h.lastWindowWidth=window.innerWidth,h.lastWindowHeight=window.innerHeight,h._createOverlay(),h._createDragTarget(),h._setupEventHandlers(),h._setupClasses(),h._setupFixed(),n._sidenavs.push(h),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var s=n._sidenavs.indexOf(this);0<=s&&n._sidenavs.splice(s,1)}},{key:"_createOverlay",value:function(){var s=document.createElement("div");this._closeBound=this.close.bind(this),s.classList.add("sidenav-overlay"),s.addEventListener("click",this._closeBound),document.body.appendChild(s),this._overlay=s}},{key:"_setupEventHandlers",value:function(){n._sidenavs.length===0&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){n._sidenavs.length===1&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(s){var o=u(s.target).closest(".sidenav-trigger");if(s.target&&o.length){var h=M.getIdFromTrigger(o[0]),m=document.getElementById(h).M_Sidenav;m&&m.open(o),s.preventDefault()}}},{key:"_startDrag",value:function(s){var o=s.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=o,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,p.remove(this.el),p.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(s){var o=s.targetTouches[0].clientX,h=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-o),this._xPos=o,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==h&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(s){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(s),this._dragMoveUpdate(s);var o=this._xPos-this._startingXpos,h=0<o?"right":"left";o=Math.min(this._width,Math.abs(o)),this.options.edge===h&&(o=0);var m=o,C="translateX(-100%)";this.options.edge==="right"&&(C="translateX(100%)",m=-m),this.percentOpen=Math.min(1,o/this._width),this.el.style.transform=C+" translateX("+m+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(.2<this.percentOpen?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(s){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(s),this._dragMoveUpdate(s);var o=this._xPos-this._startingXpos,h=0<o?"right":"left";o=Math.min(this._width,Math.abs(o)),this.options.edge!==h&&(o=0);var m=-o;this.options.edge==="right"&&(m=-m),this.percentOpen=Math.min(1,1-o/this._width),this.el.style.transform="translateX("+m+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(.8<this.percentOpen?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(s){u(s.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(992<window.innerWidth?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){this.options.edge==="right"&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&992<window.innerWidth}},{key:"_createDragTarget",value:function(){var s=document.createElement("div");s.classList.add("drag-target"),document.body.appendChild(s),this.dragTarget=s}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){this.isOpen!==!0&&(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(p.remove(this.el),p({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&this.percentOpen==1||this._animateIn()))}},{key:"close",value:function(){if(this.isOpen!==!1)if(this.isOpen=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var s=this.options.edge==="left"?"-105%":"105%";this.el.style.transform="translateX("+s+")"}else this._enableBodyScrolling(),this.isDragged&&this.percentOpen==0?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var s=this,o=this.options.edge==="left"?-1:1;this.isDragged&&(o=this.options.edge==="left"?o+this.percentOpen:o-this.percentOpen),p.remove(this.el),p({targets:this.el,translateX:[100*o+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){typeof s.options.onOpenEnd=="function"&&s.options.onOpenEnd.call(s,s.el)}})}},{key:"_animateOverlayIn",value:function(){var s=0;this.isDragged?s=this.percentOpen:u(this._overlay).css({display:"block"}),p.remove(this._overlay),p({targets:this._overlay,opacity:[s,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var s=this,o=this.options.edge==="left"?-1:1,h=0;this.isDragged&&(h=this.options.edge==="left"?o+this.percentOpen:o-this.percentOpen),p.remove(this.el),p({targets:this.el,translateX:[100*h+"%",105*o+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){typeof s.options.onCloseEnd=="function"&&s.options.onCloseEnd.call(s,s.el)}})}},{key:"_animateOverlayOut",value:function(){var s=this;p.remove(this._overlay),p({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){u(s._overlay).css("display","none")}})}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Sidenav}},{key:"defaults",get:function(){return y}}]),n}();w._sidenavs=[],window.M.Sidenav=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"sidenav","M_Sidenav")}(cash,M.anime),function(u,p){var y={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(d){return'a[href="#'+d+'"]'}},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_ScrollSpy=h).options=u.extend({},n.defaults,o),n._elements.push(h),n._count++,n._increment++,h.tickId=-1,h.id=n._increment,h._setupEventHandlers(),h._handleWindowScroll(),h}return l(n,f),i(n,[{key:"destroy",value:function(){n._elements.splice(n._elements.indexOf(this),1),n._elementsInView.splice(n._elementsInView.indexOf(this),1),n._visibleElements.splice(n._visibleElements.indexOf(this.$el),1),n._count--,this._removeEventHandlers(),u(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var s=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=s.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),n._count===1&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){n._count===0&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(s){for(var o=u(s.target),h=n._elements.length-1;0<=h;h--){var m=n._elements[h];if(o.is('a[href="#'+m.$el.attr("id")+'"]')){s.preventDefault();var C=m.$el.offset().top+1;p({targets:[document.documentElement,document.body],scrollTop:C-m.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){n._ticks++;for(var s=M.getDocumentScrollTop(),o=M.getDocumentScrollLeft(),h=o+window.innerWidth,m=s+window.innerHeight,C=n._findElements(s,h,m,o),S=0;S<C.length;S++){var B=C[S];B.tickId<0&&B._enter(),B.tickId=n._ticks}for(var R=0;R<n._elementsInView.length;R++){var H=n._elementsInView[R],W=H.tickId;0<=W&&W!==n._ticks&&(H._exit(),H.tickId=-1)}n._elementsInView=C}},{key:"_enter",value:function(){(n._visibleElements=n._visibleElements.filter(function(s){return s.height()!=0}))[0]?(u(this.options.getActiveElement(n._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),n._visibleElements[0][0].M_ScrollSpy&&this.id<n._visibleElements[0][0].M_ScrollSpy.id?n._visibleElements.unshift(this.$el):n._visibleElements.push(this.$el)):n._visibleElements.push(this.$el),u(this.options.getActiveElement(n._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var s=this;(n._visibleElements=n._visibleElements.filter(function(o){return o.height()!=0}))[0]&&(u(this.options.getActiveElement(n._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),(n._visibleElements=n._visibleElements.filter(function(o){return o.attr("id")!=s.$el.attr("id")}))[0]&&u(this.options.getActiveElement(n._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_ScrollSpy}},{key:"_findElements",value:function(s,o,h,m){for(var C=[],S=0;S<n._elements.length;S++){var B=n._elements[S],R=s+B.options.scrollOffset||200;if(0<B.$el.height()){var H=B.$el.offset().top,W=B.$el.offset().left,F=W+B.$el.width(),oe=H+B.$el.height();!(o<W||F<m||h<H||oe<R)&&C.push(B)}}return C}},{key:"defaults",get:function(){return y}}]),n}();w._elements=[],w._elementsInView=[],w._visibleElements=[],w._count=0,w._increment=0,w._ticks=0,M.ScrollSpy=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(u){var p={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(w,d,n){return w.indexOf(n)-d.indexOf(n)}},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(o.el.M_Autocomplete=o).options=u.extend({},d.defaults,s),o.isOpen=!1,o.count=0,o.activeIndex=-1,o.oldVal,o.$inputField=o.$el.closest(".input-field"),o.$active=u(),o._mousedown=!1,o._setupDropdown(),o._setupEventHandlers(),o}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),window.ontouchstart!==void 0&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),window.ontouchstart!==void 0&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var n=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),u(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(s){n.selectOption(u(s))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(n){n.type==="keyup"&&(d._keydown=!1),this.count=0;var s=this.el.value.toLowerCase();n.keyCode!==13&&n.keyCode!==38&&n.keyCode!==40&&(this.oldVal===s||!M.tabPressed&&n.type==="focus"||this.open(),this.oldVal=s)}},{key:"_handleInputKeydown",value:function(n){d._keydown=!0;var s=n.keyCode,o=void 0,h=u(this.container).children("li").length;s===M.keys.ENTER&&0<=this.activeIndex?(o=u(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(o),n.preventDefault()):s!==M.keys.ARROW_UP&&s!==M.keys.ARROW_DOWN||(n.preventDefault(),s===M.keys.ARROW_UP&&0<this.activeIndex&&this.activeIndex--,s===M.keys.ARROW_DOWN&&this.activeIndex<h-1&&this.activeIndex++,this.$active.removeClass("active"),0<=this.activeIndex&&(this.$active=u(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(n){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(n){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(n){this._mousedown=!1}},{key:"_highlight",value:function(n,s){var o=s.find("img"),h=s.text().toLowerCase().indexOf(""+n.toLowerCase()),m=h+n.length-1,C=s.text().slice(0,h),S=s.text().slice(h,m+1),B=s.text().slice(m+1);s.html("<span>"+C+"<span class='highlight'>"+S+"</span>"+B+"</span>"),o.length&&s.prepend(o)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){u(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(n){var s=n.text().trim();this.el.value=s,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),typeof this.options.onAutocomplete=="function"&&this.options.onAutocomplete.call(this,s)}},{key:"_renderDropdown",value:function(n,s){var o=this;this._resetAutocomplete();var h=[];for(var m in n)if(n.hasOwnProperty(m)&&m.toLowerCase().indexOf(s)!==-1){if(this.count>=this.options.limit)break;var C={data:n[m],key:m};h.push(C),this.count++}this.options.sortFunction&&h.sort(function(H,W){return o.options.sortFunction(H.key.toLowerCase(),W.key.toLowerCase(),s.toLowerCase())});for(var S=0;S<h.length;S++){var B=h[S],R=u("<li></li>");B.data?R.append('<img src="'+B.data+'" class="right circle"><span>'+B.key+"</span>"):R.append("<span>"+B.key+"</span>"),u(this.container).append(R),this._highlight(s,R)}}},{key:"open",value:function(){var n=this.el.value.toLowerCase();this._resetAutocomplete(),n.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,n)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(n){var s=this.el.value.toLowerCase();this.options.data=n,this.isOpen&&this._renderDropdown(n,s)}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Autocomplete}},{key:"defaults",get:function(){return p}}]),d}();y._keydown=!1,M.Autocomplete=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"autocomplete","M_Autocomplete")}(cash),function(u){M.updateTextFields=function(){u("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(p,y){var w=u(this);0<p.value.length||u(p).is(":focus")||p.autofocus||w.attr("placeholder")!==null?w.siblings("label").addClass("active"):p.validity?w.siblings("label").toggleClass("active",p.validity.badInput===!0):w.siblings("label").removeClass("active")})},M.validate_field=function(p){var y=p.attr("data-length")!==null,w=parseInt(p.attr("data-length")),d=p[0].value.length;d!==0||p[0].validity.badInput!==!1||p.is(":required")?p.hasClass("validate")&&(p.is(":valid")&&y&&d<=w||p.is(":valid")&&!y?(p.removeClass("invalid"),p.addClass("valid")):(p.removeClass("valid"),p.addClass("invalid"))):p.hasClass("validate")&&(p.removeClass("valid"),p.removeClass("invalid"))},M.textareaAutoResize=function(p){if(p instanceof Element&&(p=u(p)),p.length){var y=u(".hiddendiv").first();y.length||(y=u('<div class="hiddendiv common"></div>'),u("body").append(y));var w=p.css("font-family"),d=p.css("font-size"),n=p.css("line-height"),s=p.css("padding-top"),o=p.css("padding-right"),h=p.css("padding-bottom"),m=p.css("padding-left");d&&y.css("font-size",d),w&&y.css("font-family",w),n&&y.css("line-height",n),s&&y.css("padding-top",s),o&&y.css("padding-right",o),h&&y.css("padding-bottom",h),m&&y.css("padding-left",m),p.data("original-height")||p.data("original-height",p.height()),p.attr("wrap")==="off"&&y.css("overflow-wrap","normal").css("white-space","pre"),y.text(p[0].value+`
`);var C=y.html().replace(/\n/g,"<br>");y.html(C),0<p[0].offsetWidth&&0<p[0].offsetHeight?y.css("width",p.width()+"px"):y.css("width",window.innerWidth/2+"px"),p.data("original-height")<=y.innerHeight()?p.css("height",y.innerHeight()+"px"):p[0].value.length<p.data("previous-length")&&p.css("height",p.data("original-height")+"px"),p.data("previous-length",p[0].value.length)}else console.error("No textarea element found")},u(document).ready(function(){var p="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";u(document).on("change",p,function(){this.value.length===0&&u(this).attr("placeholder")===null||u(this).siblings("label").addClass("active"),M.validate_field(u(this))}),u(document).ready(function(){M.updateTextFields()}),u(document).on("reset",function(w){var d=u(w.target);d.is("form")&&(d.find(p).removeClass("valid").removeClass("invalid"),d.find(p).each(function(n){this.value.length&&u(this).siblings("label").removeClass("active")}),setTimeout(function(){d.find("select").each(function(){this.M_FormSelect&&u(this).trigger("change")})},0))}),document.addEventListener("focus",function(w){u(w.target).is(p)&&u(w.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(w){var d=u(w.target);if(d.is(p)){var n=".prefix";d[0].value.length===0&&d[0].validity.badInput!==!0&&d.attr("placeholder")===null&&(n+=", label"),d.siblings(n).removeClass("active"),M.validate_field(d)}},!0),u(document).on("keyup","input[type=radio], input[type=checkbox]",function(w){if(w.which===M.keys.TAB)return u(this).addClass("tabbed"),void u(this).one("blur",function(d){u(this).removeClass("tabbed")})});var y=".materialize-textarea";u(y).each(function(){var w=u(this);w.data("original-height",w.height()),w.data("previous-length",this.value.length),M.textareaAutoResize(w)}),u(document).on("keyup",y,function(){M.textareaAutoResize(u(this))}),u(document).on("keydown",y,function(){M.textareaAutoResize(u(this))}),u(document).on("change",'.file-field input[type="file"]',function(){for(var w=u(this).closest(".file-field").find("input.file-path"),d=u(this)[0].files,n=[],s=0;s<d.length;s++)n.push(d[s].name);w[0].value=n.join(", "),w.trigger("change")})})}(cash),function(u,p){var y={indicators:!0,height:400,duration:500,interval:6e3},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_Slider=h).options=u.extend({},n.defaults,o),h.$slider=h.$el.find(".slides"),h.$slides=h.$slider.children("li"),h.activeIndex=h.$slides.filter(function(m){return u(m).hasClass("active")}).first().index(),h.activeIndex!=-1&&(h.$active=h.$slides.eq(h.activeIndex)),h._setSliderHeight(),h.$slides.find(".caption").each(function(m){h._animateCaptionIn(m,0)}),h.$slides.find("img").each(function(m){var C="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";u(m).attr("src")!==C&&(u(m).css("background-image",'url("'+u(m).attr("src")+'")'),u(m).attr("src",C))}),h._setupIndicators(),h.$active?h.$active.css("display","block"):(h.$slides.first().addClass("active"),p({targets:h.$slides.first()[0],opacity:1,duration:h.options.duration,easing:"easeOutQuad"}),h.activeIndex=0,h.$active=h.$slides.eq(h.activeIndex),h.options.indicators&&h.$indicators.eq(h.activeIndex).addClass("active")),h.$active.find("img").each(function(m){p({targets:h.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:h.options.duration,easing:"easeOutQuad"})}),h._setupEventHandlers(),h.start(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var s=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(o){o.addEventListener("click",s._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var s=this;this.options.indicators&&this.$indicators.each(function(o){o.removeEventListener("click",s._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(s){var o=u(s.target).index();this.set(o)}},{key:"_handleInterval",value:function(){var s=this.$slider.find(".active").index();this.$slides.length===s+1?s=0:s+=1,this.set(s)}},{key:"_animateCaptionIn",value:function(s,o){var h={targets:s,opacity:0,duration:o,easing:"easeOutQuad"};u(s).hasClass("center-align")?h.translateY=-100:u(s).hasClass("right-align")?h.translateX=100:u(s).hasClass("left-align")&&(h.translateX=-100),p(h)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var s=this;this.options.indicators&&(this.$indicators=u('<ul class="indicators"></ul>'),this.$slides.each(function(o,h){var m=u('<li class="indicator-item"></li>');s.$indicators.append(m[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(s){var o=this;if(s>=this.$slides.length?s=0:s<0&&(s=this.$slides.length-1),this.activeIndex!=s){this.$active=this.$slides.eq(this.activeIndex);var h=this.$active.find(".caption");this.$active.removeClass("active"),p({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){o.$slides.not(".active").each(function(m){p({targets:m,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(h[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(s).addClass("active")),p({targets:this.$slides.eq(s)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),p({targets:this.$slides.eq(s).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(s).addClass("active"),this.activeIndex=s,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var s=this.activeIndex+1;s>=this.$slides.length?s=0:s<0&&(s=this.$slides.length-1),this.set(s)}},{key:"prev",value:function(){var s=this.activeIndex-1;s>=this.$slides.length?s=0:s<0&&(s=this.$slides.length-1),this.set(s)}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Slider}},{key:"defaults",get:function(){return y}}]),n}();M.Slider=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"slider","M_Slider")}(cash,M.anime),function(u,p){u(document).on("click",".card",function(y){if(u(this).children(".card-reveal").length){var w=u(y.target).closest(".card");w.data("initialOverflow")===void 0&&w.data("initialOverflow",w.css("overflow")===void 0?"":w.css("overflow"));var d=u(this).find(".card-reveal");u(y.target).is(u(".card-reveal .card-title"))||u(y.target).is(u(".card-reveal .card-title i"))?p({targets:d[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(n){var s=n.animatables[0].target;u(s).css({display:"none"}),w.css("overflow",w.data("initialOverflow"))}}):(u(y.target).is(u(".card .activator"))||u(y.target).is(u(".card .activator i")))&&(w.css("overflow","hidden"),d.css({display:"block"}),p({targets:d[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(u){var p={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(o.el.M_Chips=o).options=u.extend({},d.defaults,s),o.$el.addClass("chips input-field"),o.chipsData=[],o.$chips=u(),o._setupInput(),o.hasAutocomplete=0<Object.keys(o.options.autocompleteOptions).length,o.$input.attr("id")||o.$input.attr("id",M.guid()),o.options.data.length&&(o.chipsData=o.options.data,o._renderChips(o.chipsData)),o.hasAutocomplete&&o._setupAutocomplete(),o._setPlaceholder(),o._setupLabel(),o._setupEventHandlers(),o}return l(d,f),i(d,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",d._handleChipsKeydown),document.addEventListener("keyup",d._handleChipsKeyup),this.el.addEventListener("blur",d._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",d._handleChipsKeydown),document.removeEventListener("keyup",d._handleChipsKeyup),this.el.removeEventListener("blur",d._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(n){var s=u(n.target).closest(".chip"),o=u(n.target).is(".close");if(s.length){var h=s.index();o?(this.deleteChip(h),this.$input[0].focus()):this.selectChip(h)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(n){if(d._keydown=!0,n.keyCode===13){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;n.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else n.keyCode!==8&&n.keyCode!==37||this.$input[0].value!==""||!this.chipsData.length||(n.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(n){if(n.tag){var s=document.createElement("div"),o=document.createElement("i");if(s.classList.add("chip"),s.textContent=n.tag,s.setAttribute("tabindex",0),u(o).addClass("material-icons close"),o.textContent="close",n.image){var h=document.createElement("img");h.setAttribute("src",n.image),s.insertBefore(h,s.firstChild)}return s.appendChild(o),s}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var n=0;n<this.chipsData.length;n++){var s=this._renderChip(this.chipsData[n]);this.$el.append(s),this.$chips.add(s)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var n=this;this.options.autocompleteOptions.onAutocomplete=function(s){n.addChip({tag:s}),n.$input[0].value="",n.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=u("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){this.chipsData!==void 0&&!this.chipsData.length&&this.options.placeholder?u(this.$input).prop("placeholder",this.options.placeholder):(this.chipsData===void 0||this.chipsData.length)&&this.options.secondaryPlaceholder&&u(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(n){if(n.hasOwnProperty("tag")&&n.tag!==""){for(var s=!1,o=0;o<this.chipsData.length;o++)if(this.chipsData[o].tag===n.tag){s=!0;break}return!s}return!1}},{key:"addChip",value:function(n){if(this._isValid(n)&&!(this.chipsData.length>=this.options.limit)){var s=this._renderChip(n);this.$chips.add(s),this.chipsData.push(n),u(this.$input).before(s),this._setPlaceholder(),typeof this.options.onChipAdd=="function"&&this.options.onChipAdd.call(this,this.$el,s)}}},{key:"deleteChip",value:function(n){var s=this.$chips.eq(n);this.$chips.eq(n).remove(),this.$chips=this.$chips.filter(function(o){return 0<=u(o).index()}),this.chipsData.splice(n,1),this._setPlaceholder(),typeof this.options.onChipDelete=="function"&&this.options.onChipDelete.call(this,this.$el,s[0])}},{key:"selectChip",value:function(n){var s=this.$chips.eq(n);(this._selectedChip=s)[0].focus(),typeof this.options.onChipSelect=="function"&&this.options.onChipSelect.call(this,this.$el,s[0])}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Chips}},{key:"_handleChipsKeydown",value:function(n){d._keydown=!0;var s=u(n.target).closest(".chips"),o=n.target&&s.length;if(!u(n.target).is("input, textarea")&&o){var h=s[0].M_Chips;if(n.keyCode===8||n.keyCode===46){n.preventDefault();var m=h.chipsData.length;if(h._selectedChip){var C=h._selectedChip.index();h.deleteChip(C),h._selectedChip=null,m=Math.max(C-1,0)}h.chipsData.length&&h.selectChip(m)}else if(n.keyCode===37){if(h._selectedChip){var S=h._selectedChip.index()-1;if(S<0)return;h.selectChip(S)}}else if(n.keyCode===39&&h._selectedChip){var B=h._selectedChip.index()+1;B>=h.chipsData.length?h.$input[0].focus():h.selectChip(B)}}}},{key:"_handleChipsKeyup",value:function(n){d._keydown=!1}},{key:"_handleChipsBlur",value:function(n){d._keydown||(u(n.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return p}}]),d}();y._keydown=!1,M.Chips=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"chips","M_Chips"),u(document).ready(function(){u(document.body).on("click",".chip .close",function(){var w=u(this).closest(".chips");w.length&&w[0].M_Chips||u(this).closest(".chip").remove()})})}(cash),function(u){var p={top:0,bottom:1/0,offset:0,onPositionChange:null},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(o.el.M_Pushpin=o).options=u.extend({},d.defaults,s),o.originalOffset=o.el.offsetTop,d._pushpins.push(o),o._setupEventHandlers(),o._updatePosition(),o}return l(d,f),i(d,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var n=d._pushpins.indexOf(this);d._pushpins.splice(n,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",d._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",d._updateElements)}},{key:"_updatePosition",value:function(){var n=M.getDocumentScrollTop()+this.options.offset;this.options.top<=n&&this.options.bottom>=n&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pinned")),n<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-top")),n>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px",typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Pushpin}},{key:"_updateElements",value:function(){for(var n in d._pushpins)d._pushpins[n]._updatePosition()}},{key:"defaults",get:function(){return p}}]),d}();y._pushpins=[],M.Pushpin=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"pushpin","M_Pushpin")}(cash),function(u,p){var y={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};u.fn.reverse=[].reverse;var w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_FloatingActionButton=h).options=u.extend({},n.defaults,o),h.isOpen=!1,h.$anchor=h.$el.children("a").first(),h.$menu=h.$el.children("ul").first(),h.$floatingBtns=h.$el.find("ul .btn-floating"),h.$floatingBtnsReverse=h.$el.find("ul .btn-floating").reverse(),h.offsetY=0,h.offsetX=0,h.$el.addClass("direction-"+h.options.direction),h.options.direction==="top"?h.offsetY=40:h.options.direction==="right"?h.offsetX=-40:h.options.direction==="bottom"?h.offsetY=-40:h.offsetX=40,h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(s){u(s.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var s=this;this.$el.addClass("active");var o=0;this.$floatingBtnsReverse.each(function(h){p({targets:h,opacity:1,scale:[.4,1],translateY:[s.offsetY,0],translateX:[s.offsetX,0],duration:275,delay:o,easing:"easeInOutQuad"}),o+=40})}},{key:"_animateOutFAB",value:function(){var s=this;this.$floatingBtnsReverse.each(function(o){p.remove(o),p({targets:o,opacity:0,scale:.4,translateY:s.offsetY,translateX:s.offsetX,duration:175,easing:"easeOutQuad",complete:function(){s.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var s,o=this,h=window.innerWidth,m=window.innerHeight,C=this.el.getBoundingClientRect(),S=u('<div class="fab-backdrop"></div>'),B=this.$anchor.css("background-color");this.$anchor.append(S),this.offsetX=C.left-h/2+C.width/2,this.offsetY=m-C.bottom,s=h/S[0].clientWidth,this.btnBottom=C.bottom,this.btnLeft=C.left,this.btnWidth=C.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),S.css({"background-color":B}),setTimeout(function(){o.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),o.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){o.$el.css({overflow:"hidden","background-color":B}),S.css({transform:"scale("+s+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),o.$menu.children("li").children("a").css({opacity:1}),o._handleDocumentClickBound=o._handleDocumentClick.bind(o),window.addEventListener("scroll",o._handleCloseBound,!0),document.body.addEventListener("click",o._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var s=this,o=window.innerWidth,h=window.innerHeight,m=this.$el.find(".fab-backdrop"),C=this.$anchor.css("background-color");this.offsetX=this.btnLeft-o/2+this.btnWidth/2,this.offsetY=h-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),m.css({transform:"scale(0)","background-color":C}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){m.remove(),s.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-s.offsetX+"px,0,0)"}),s.$anchor.css({overflow:"",transform:"translate3d(0,"+s.offsetY+"px,0)"}),setTimeout(function(){s.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),s.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_FloatingActionButton}},{key:"defaults",get:function(){return y}}]),n}();M.FloatingActionButton=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(u){var p={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"",nextMonth:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));(o.el.M_Datepicker=o).options=u.extend({},d.defaults,s),s&&s.hasOwnProperty("i18n")&&typeof s.i18n=="object"&&(o.options.i18n=u.extend({},d.defaults.i18n,s.i18n)),o.options.minDate&&o.options.minDate.setHours(0,0,0,0),o.options.maxDate&&o.options.maxDate.setHours(0,0,0,0),o.id=M.guid(),o._setupVariables(),o._insertHTMLIntoDOM(),o._setupModal(),o._setupEventHandlers(),o.options.defaultDate||(o.options.defaultDate=new Date(Date.parse(o.el.value)));var h=o.options.defaultDate;return d._isDate(h)?o.options.setDefaultDate?(o.setDate(h,!0),o.setInputValue()):o.gotoDate(h):o.gotoDate(new Date),o.isOpen=!1,o}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),u(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var n=this.calendarEl.querySelector(".orig-select-year");n&&M.FormSelect.getInstance(n).destroy();var s=this.calendarEl.querySelector(".orig-select-month");s&&M.FormSelect.getInstance(s).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(u(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var n=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){n.isOpen=!1}})}},{key:"toString",value:function(n){var s=this;return n=n||this.options.format,d._isDate(this.date)?n.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(o){return s.formats[o]?s.formats[o]():o}).join(""):""}},{key:"setDate",value:function(n,s){if(!n)return this.date=null,this._renderDateDisplay(),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),d._isDate(n)){var o=this.options.minDate,h=this.options.maxDate;d._isDate(o)&&n<o?n=o:d._isDate(h)&&h<n&&(n=h),this.date=new Date(n.getTime()),this._renderDateDisplay(),d._setToStartOfDay(this.date),this.gotoDate(this.date),s||typeof this.options.onSelect!="function"||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var n=d._isDate(this.date)?this.date:new Date,s=this.options.i18n,o=s.weekdaysShort[n.getDay()],h=s.monthsShort[n.getMonth()],m=n.getDate();this.yearTextEl.innerHTML=n.getFullYear(),this.dateTextEl.innerHTML=o+", "+h+" "+m}},{key:"gotoDate",value:function(n){var s=!0;if(d._isDate(n)){if(this.calendars){var o=new Date(this.calendars[0].year,this.calendars[0].month,1),h=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),m=n.getTime();h.setMonth(h.getMonth()+1),h.setDate(h.getDate()-1),s=m<o.getTime()||h.getTime()<m}s&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),11<n.month&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(n,s,o){var h=this.options,m=new Date,C=d._getDaysInMonth(n,s),S=new Date(n,s,1).getDay(),B=[],R=[];d._setToStartOfDay(m),0<h.firstDay&&(S-=h.firstDay)<0&&(S+=7);for(var H=s===0?11:s-1,W=s===11?0:s+1,F=s===0?n-1:n,oe=s===11?n+1:n,q=d._getDaysInMonth(F,H),G=C+S,te=G;7<te;)te-=7;G+=7-te;for(var re=!1,Z=0,me=0;Z<G;Z++){var ie=new Date(n,s,Z-S+1),we=!!d._isDate(this.date)&&d._compareDates(ie,this.date),We=d._compareDates(ie,m),$e=h.events.indexOf(ie.toDateString())!==-1,Ne=Z<S||C+S<=Z,J=Z-S+1,Te=s,Oe=n,Ae=h.startRange&&d._compareDates(h.startRange,ie),ue=h.endRange&&d._compareDates(h.endRange,ie),xe=h.startRange&&h.endRange&&h.startRange<ie&&ie<h.endRange;Ne&&(Z<S?(J=q+J,Te=H,Oe=F):(J-=C,Te=W,Oe=oe));var qe={day:J,month:Te,year:Oe,hasEvent:$e,isSelected:we,isToday:We,isDisabled:h.minDate&&ie<h.minDate||h.maxDate&&ie>h.maxDate||h.disableWeekends&&d._isWeekend(ie)||h.disableDayFn&&h.disableDayFn(ie),isEmpty:Ne,isStartRange:Ae,isEndRange:ue,isInRange:xe,showDaysInNextAndPreviousMonths:h.showDaysInNextAndPreviousMonths};R.push(this.renderDay(qe)),++me==7&&(B.push(this.renderRow(R,h.isRTL,re)),me=0,re=!(R=[]))}return this.renderTable(h,B,o)}},{key:"renderDay",value:function(n){var s=[],o="false";if(n.isEmpty){if(!n.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';s.push("is-outside-current-month"),s.push("is-selection-disabled")}return n.isDisabled&&s.push("is-disabled"),n.isToday&&s.push("is-today"),n.isSelected&&(s.push("is-selected"),o="true"),n.hasEvent&&s.push("has-event"),n.isInRange&&s.push("is-inrange"),n.isStartRange&&s.push("is-startrange"),n.isEndRange&&s.push("is-endrange"),'<td data-day="'+n.day+'" class="'+s.join(" ")+'" aria-selected="'+o+'"><button class="datepicker-day-button" type="button" data-year="'+n.year+'" data-month="'+n.month+'" data-day="'+n.day+'">'+n.day+"</button></td>"}},{key:"renderRow",value:function(n,s,o){return'<tr class="datepicker-row'+(o?" is-selected":"")+'">'+(s?n.reverse():n).join("")+"</tr>"}},{key:"renderTable",value:function(n,s,o){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+o+'">'+this.renderHead(n)+this.renderBody(s)+"</table></div>"}},{key:"renderHead",value:function(n){var s=void 0,o=[];for(s=0;s<7;s++)o.push('<th scope="col"><abbr title="'+this.renderDayName(n,s)+'">'+this.renderDayName(n,s,!0)+"</abbr></th>");return"<thead><tr>"+(n.isRTL?o.reverse():o).join("")+"</tr></thead>"}},{key:"renderBody",value:function(n){return"<tbody>"+n.join("")+"</tbody>"}},{key:"renderTitle",value:function(n,s,o,h,m,C){var S,B,R=void 0,H=void 0,W=void 0,F=this.options,oe=o===F.minYear,q=o===F.maxYear,G='<div id="'+C+'" class="datepicker-controls" role="heading" aria-live="assertive">',te=!0,re=!0;for(W=[],R=0;R<12;R++)W.push('<option value="'+(o===m?R-s:12+R-s)+'"'+(R===h?' selected="selected"':"")+(oe&&R<F.minMonth||q&&R>F.maxMonth?'disabled="disabled"':"")+">"+F.i18n.months[R]+"</option>");for(S='<select class="datepicker-select orig-select-month" tabindex="-1">'+W.join("")+"</select>",u.isArray(F.yearRange)?(R=F.yearRange[0],H=F.yearRange[1]+1):(R=o-F.yearRange,H=1+o+F.yearRange),W=[];R<H&&R<=F.maxYear;R++)R>=F.minYear&&W.push('<option value="'+R+'" '+(R===o?'selected="selected"':"")+">"+R+"</option>");return B='<select class="datepicker-select orig-select-year" tabindex="-1">'+W.join("")+"</select>",G+='<button class="month-prev'+(te?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',G+='<div class="selects-container">',F.showMonthAfterYear?G+=B+S:G+=S+B,G+="</div>",oe&&(h===0||F.minMonth>=h)&&(te=!1),q&&(h===11||F.maxMonth<=h)&&(re=!1),(G+='<button class="month-next'+(re?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(n){if(this.isOpen||n){var s,o=this.options,h=o.minYear,m=o.maxYear,C=o.minMonth,S=o.maxMonth,B="";this._y<=h&&(this._y=h,!isNaN(C)&&this._m<C&&(this._m=C)),this._y>=m&&(this._y=m,!isNaN(S)&&this._m>S&&(this._m=S)),s="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var R=0;R<1;R++)this._renderDateDisplay(),B+=this.renderTitle(this,R,this.calendars[R].year,this.calendars[R].month,this.calendars[0].year,s)+this.render(this.calendars[R].year,this.calendars[R].month,s);this.destroySelects(),this.calendarEl.innerHTML=B;var H=this.calendarEl.querySelector(".orig-select-year"),W=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(H,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(W,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),H.addEventListener("change",this._handleYearChange.bind(this)),W.addEventListener("change",this._handleMonthChange.bind(this)),typeof this.options.onDraw=="function"&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var n=this;this.$modalEl=u(d._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return n.date.getDate()},dd:function(){var s=n.date.getDate();return(s<10?"0":"")+s},ddd:function(){return n.options.i18n.weekdaysShort[n.date.getDay()]},dddd:function(){return n.options.i18n.weekdays[n.date.getDay()]},m:function(){return n.date.getMonth()+1},mm:function(){var s=n.date.getMonth()+1;return(s<10?"0":"")+s},mmm:function(){return n.options.i18n.monthsShort[n.date.getMonth()]},mmmm:function(){return n.options.i18n.months[n.date.getMonth()]},yy:function(){return(""+n.date.getFullYear()).slice(2)},yyyy:function(){return n.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(n){n.which===M.keys.ENTER&&(n.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(n){if(this.isOpen){var s=u(n.target);s.hasClass("is-disabled")||(!s.hasClass("datepicker-day-button")||s.hasClass("is-empty")||s.parent().hasClass("is-disabled")?s.closest(".month-prev").length?this.prevMonth():s.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(n.target.getAttribute("data-year"),n.target.getAttribute("data-month"),n.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(n){this.gotoMonth(n.target.value)}},{key:"_handleYearChange",value:function(n){this.gotoYear(n.target.value)}},{key:"gotoMonth",value:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())}},{key:"gotoYear",value:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(n){var s=void 0;n.firedBy!==this&&(s=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),d._isDate(s)&&this.setDate(s))}},{key:"renderDayName",value:function(n,s,o){for(s+=n.firstDay;7<=s;)s-=7;return o?n.i18n.weekdaysAbbrev[s]:n.i18n.weekdays[s]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,typeof this.options.onOpen=="function"&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,typeof this.options.onClose=="function"&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"_isDate",value:function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())}},{key:"_isWeekend",value:function(n){var s=n.getDay();return s===0||s===6}},{key:"_setToStartOfDay",value:function(n){d._isDate(n)&&n.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(n,s){return[31,d._isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][s]}},{key:"_isLeapYear",value:function(n){return n%4==0&&n%100!=0||n%400==0}},{key:"_compareDates",value:function(n,s){return n.getTime()===s.getTime()}},{key:"_setToStartOfDay",value:function(n){d._isDate(n)&&n.setHours(0,0,0,0)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Datepicker}},{key:"defaults",get:function(){return p}}]),d}();y._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"datepicker","M_Datepicker")}(cash),function(u){var p={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(o.el.M_Timepicker=o).options=u.extend({},d.defaults,s),o.id=M.guid(),o._insertHTMLIntoDOM(),o._setupModal(),o._setupVariables(),o._setupEventHandlers(),o._clockSetup(),o._pickerSetup(),o}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),u(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),u(this.spanHours).on("click",this.showView.bind(this,"hours")),u(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(n){n.which===M.keys.ENTER&&(n.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(n){n.preventDefault();var s=this.plate.getBoundingClientRect(),o=s.left,h=s.top;this.x0=o+this.options.dialRadius,this.y0=h+this.options.dialRadius,this.moved=!1;var m=d._Pos(n);this.dx=m.x-this.x0,this.dy=m.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(n){n.preventDefault();var s=d._Pos(n),o=s.x-this.x0,h=s.y-this.y0;this.moved=!0,this.setHand(o,h,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(n){var s=this;n.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var o=d._Pos(n),h=o.x-this.x0,m=o.y-this.y0;this.moved&&h===this.dx&&m===this.dy&&this.setHand(h,m),this.currentView==="hours"?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(u(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){s.done()},this.options.duration/2)),typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=u(d._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var n=document.querySelector(this.options.container);this.options.container&&n?this.$modalEl.appendTo(n):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var n=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){typeof n.options.onCloseEnd=="function"&&n.options.onCloseEnd.call(n),n.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var n=u('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&n.css({visibility:""});var s=u('<div class="confirmation-btns"></div>');u('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(s).on("click",this.close.bind(this)),u('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(s).on("click",this.done.bind(this)),s.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=u('<div class="am-btn">AM</div>'),this.$pmBtn=u('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var n=this.options.dialRadius,s=this.options.tickRadius,o=2*n,h=d._createSVGEl("svg");h.setAttribute("class","timepicker-svg"),h.setAttribute("width",o),h.setAttribute("height",o);var m=d._createSVGEl("g");m.setAttribute("transform","translate("+n+","+n+")");var C=d._createSVGEl("circle");C.setAttribute("class","timepicker-canvas-bearing"),C.setAttribute("cx",0),C.setAttribute("cy",0),C.setAttribute("r",4);var S=d._createSVGEl("line");S.setAttribute("x1",0),S.setAttribute("y1",0);var B=d._createSVGEl("circle");B.setAttribute("class","timepicker-canvas-bg"),B.setAttribute("r",s),m.appendChild(S),m.appendChild(B),m.appendChild(C),h.appendChild(m),this._canvas.appendChild(h),this.hand=S,this.bg=B,this.bearing=C,this.g=m}},{key:"_buildHoursView",value:function(){var n=u('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var s=1;s<13;s+=1){var o=n.clone(),h=s/6*Math.PI,m=this.options.outerRadius;o.css({left:this.options.dialRadius+Math.sin(h)*m-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(h)*m-this.options.tickRadius+"px"}),o.html(s===0?"00":s),this.hoursView.appendChild(o[0])}else for(var C=0;C<24;C+=1){var S=n.clone(),B=C/6*Math.PI,R=0<C&&C<13?this.options.innerRadius:this.options.outerRadius;S.css({left:this.options.dialRadius+Math.sin(B)*R-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(B)*R-this.options.tickRadius+"px"}),S.html(C===0?"00":C),this.hoursView.appendChild(S[0])}}},{key:"_buildMinutesView",value:function(){for(var n=u('<div class="timepicker-tick"></div>'),s=0;s<60;s+=5){var o=n.clone(),h=s/30*Math.PI;o.css({left:this.options.dialRadius+Math.sin(h)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(h)*this.options.outerRadius-this.options.tickRadius+"px"}),o.html(d._addLeadingZero(s)),this.minutesView.appendChild(o[0])}}},{key:"_handleAmPmClick",value:function(n){var s=u(n.target);this.amOrPm=s.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary",this.amOrPm==="AM"),this.$pmBtn.toggleClass("text-primary",this.amOrPm==="PM"))}},{key:"_updateTimeFromInput",value:function(){var n=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&n[1]!==void 0&&(0<n[1].toUpperCase().indexOf("AM")?this.amOrPm="AM":this.amOrPm="PM",n[1]=n[1].replace("AM","").replace("PM","")),n[0]==="now"){var s=new Date(+new Date+this.options.fromNow);n=[s.getHours(),s.getMinutes()],this.options.twelveHour&&(this.amOrPm=12<=n[0]&&n[0]<24?"PM":"AM")}this.hours=+n[0]||0,this.minutes=+n[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=d._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(n,s){n==="minutes"&&u(this.hoursView).css("visibility");var o=n==="hours",h=o?this.hoursView:this.minutesView,m=o?this.minutesView:this.hoursView;this.currentView=n,u(this.spanHours).toggleClass("text-primary",o),u(this.spanMinutes).toggleClass("text-primary",!o),m.classList.add("timepicker-dial-out"),u(h).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(s),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){u(m).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(n){var s=this.currentView,o=this[s],h=s==="hours",m=o*(Math.PI/(h?6:30)),C=h&&0<o&&o<13?this.options.innerRadius:this.options.outerRadius,S=Math.sin(m)*C,B=-Math.cos(m)*C,R=this;n?(u(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){u(R.canvas).removeClass("timepicker-canvas-out"),R.setHand(S,B)},n)):this.setHand(S,B)}},{key:"setHand",value:function(n,s,o){var h=this,m=Math.atan2(n,-s),C=this.currentView==="hours",S=Math.PI/(C||o?6:30),B=Math.sqrt(n*n+s*s),R=C&&B<(this.options.outerRadius+this.options.innerRadius)/2,H=R?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(H=this.options.outerRadius),m<0&&(m=2*Math.PI+m);var W=Math.round(m/S);m=W*S,this.options.twelveHour?C?W===0&&(W=12):(o&&(W*=5),W===60&&(W=0)):C?(W===12&&(W=0),W=R?W===0?12:W:W===0?0:W+12):(o&&(W*=5),W===60&&(W=0)),this[this.currentView]!==W&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){h.vibrateTimer=null},100))),this[this.currentView]=W,C?this.spanHours.innerHTML=W:this.spanMinutes.innerHTML=d._addLeadingZero(W);var F=Math.sin(m)*(H-this.options.tickRadius),oe=-Math.cos(m)*(H-this.options.tickRadius),q=Math.sin(m)*H,G=-Math.cos(m)*H;this.hand.setAttribute("x2",F),this.hand.setAttribute("y2",oe),this.bg.setAttribute("cx",q),this.bg.setAttribute("cy",G)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(n,s){var o=this.el.value,h=s?"":d._addLeadingZero(this.hours)+":"+d._addLeadingZero(this.minutes);this.time=h,!s&&this.options.twelveHour&&(h=h+" "+this.amOrPm),(this.el.value=h)!==o&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"_addLeadingZero",value:function(n){return(n<10?"0":"")+n}},{key:"_createSVGEl",value:function(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}},{key:"_Pos",value:function(n){return n.targetTouches&&1<=n.targetTouches.length?{x:n.targetTouches[0].clientX,y:n.targetTouches[0].clientY}:{x:n.clientX,y:n.clientY}}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Timepicker}},{key:"defaults",get:function(){return p}}]),d}();y._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"timepicker","M_Timepicker")}(cash),function(u){var p={},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(o.el.M_CharacterCounter=o).options=u.extend({},d.defaults,s),o.isInvalid=!1,o.isValidLength=!1,o._setupCounter(),o._setupEventHandlers(),o}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),u(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){u(this.counterEl).remove()}},{key:"updateCounter",value:function(){var n=+this.$el.attr("data-length"),s=this.el.value.length;this.isValidLength=s<=n;var o=s;n&&(o+="/"+n,this._validateInput()),u(this.counterEl).html(o)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_CharacterCounter}},{key:"defaults",get:function(){return p}}]),d}();M.CharacterCounter=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"characterCounter","M_CharacterCounter")}(cash),function(u){var p={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(o.el.M_Carousel=o).options=u.extend({},d.defaults,s),o.hasMultipleSlides=1<o.$el.find(".carousel-item").length,o.showIndicators=o.options.indicators&&o.hasMultipleSlides,o.noWrap=o.options.noWrap||!o.hasMultipleSlides,o.pressed=!1,o.dragged=!1,o.offset=o.target=0,o.images=[],o.itemWidth=o.$el.find(".carousel-item").first().innerWidth(),o.itemHeight=o.$el.find(".carousel-item").first().innerHeight(),o.dim=2*o.itemWidth+o.options.padding||1,o._autoScrollBound=o._autoScroll.bind(o),o._trackBound=o._track.bind(o),o.options.fullWidth&&(o.options.dist=0,o._setCarouselHeight(),o.showIndicators&&o.$el.find(".carousel-fixed-item").addClass("with-indicators")),o.$indicators=u('<ul class="indicators"></ul>'),o.$el.find(".carousel-item").each(function(h,m){if(o.images.push(h),o.showIndicators){var C=u('<li class="indicator-item"></li>');m===0&&C[0].classList.add("active"),o.$indicators.append(C)}}),o.showIndicators&&o.$el.append(o.$indicators),o.count=o.images.length,o.options.numVisible=Math.min(o.count,o.options.numVisible),o.xform="transform",["webkit","Moz","O","ms"].every(function(h){var m=h+"Transform";return document.body.style[m]===void 0||(o.xform=m,!1)}),o._setupEventHandlers(),o._scroll(o.offset),o}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var n=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),window.ontouchstart!==void 0&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(o,h){o.addEventListener("click",n._handleIndicatorClickBound)}));var s=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=s.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var n=this;window.ontouchstart!==void 0&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(s,o){s.removeEventListener("click",n._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(n){n.type==="mousedown"&&u(n.target).is("img")&&n.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(n),this.referenceY=this._ypos(n),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(n){var s=void 0,o=void 0,h=void 0;if(this.pressed)if(s=this._xpos(n),o=this._ypos(n),h=this.reference-s,Math.abs(this.referenceY-o)<30&&!this.verticalDragged)(2<h||h<-2)&&(this.dragged=!0,this.reference=s,this._scroll(this.offset+h));else{if(this.dragged)return n.preventDefault(),n.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return n.preventDefault(),n.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(n){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(10<this.velocity||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(n.preventDefault(),n.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(n){if(this.dragged)return n.preventDefault(),n.stopPropagation(),!1;if(!this.options.fullWidth){var s=u(n.target).closest(".carousel-item").index();this._wrap(this.center)-s!==0&&(n.preventDefault(),n.stopPropagation()),this._cycleTo(s)}}},{key:"_handleIndicatorClick",value:function(n){n.stopPropagation();var s=u(n.target).closest(".indicator-item");s.length&&this._cycleTo(s.index())}},{key:"_handleResize",value:function(n){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(n){var s=this,o=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),h=o.find("img").first();if(h.length)if(h[0].complete){var m=h.height();if(0<m)this.$el.css("height",m+"px");else{var C=h[0].naturalWidth,S=h[0].naturalHeight,B=this.$el.width()/C*S;this.$el.css("height",B+"px")}}else h.one("load",function(H,W){s.$el.css("height",H.offsetHeight+"px")});else if(!n){var R=o.height();this.$el.css("height",R+"px")}}},{key:"_xpos",value:function(n){return n.targetTouches&&1<=n.targetTouches.length?n.targetTouches[0].clientX:n.clientX}},{key:"_ypos",value:function(n){return n.targetTouches&&1<=n.targetTouches.length?n.targetTouches[0].clientY:n.clientY}},{key:"_wrap",value:function(n){return n>=this.count?n%this.count:n<0?this._wrap(this.count+n%this.count):n}},{key:"_track",value:function(){var n,s,o,h;s=(n=Date.now())-this.timestamp,this.timestamp=n,o=this.offset-this.frame,this.frame=this.offset,h=1e3*o/(1+s),this.velocity=.8*h+.2*this.velocity}},{key:"_autoScroll",value:function(){var n=void 0,s=void 0;this.amplitude&&(n=Date.now()-this.timestamp,2<(s=this.amplitude*Math.exp(-n/this.options.duration))||s<-2?(this._scroll(this.target-s),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(n){var s=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),this.scrollingTimeout!=null&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){s.$el.removeClass("scrolling")},this.options.duration);var o,h,m,C,S=void 0,B=void 0,R=void 0,H=void 0,W=void 0,F=void 0,oe=this.center,q=1/this.options.numVisible;if(this.offset=typeof n=="number"?n:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),C=-(m=(h=this.offset-this.center*this.dim)<0?1:-1)*h*2/this.dim,o=this.count>>1,this.options.fullWidth?(R="translateX(0)",F=1):(R="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",R+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",F=1-q*C),this.showIndicators){var G=this.center%this.count,te=this.$indicators.find(".indicator-item.active");te.index()!==G&&(te.removeClass("active"),this.$indicators.find(".indicator-item").eq(G)[0].classList.add("active"))}if(!this.noWrap||0<=this.center&&this.center<this.count){B=this.images[this._wrap(this.center)],u(B).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),B.classList.add("active"));var re=R+" translateX("+-h/2+"px) translateX("+m*this.options.shift*C*S+"px) translateZ("+this.options.dist*C+"px)";this._updateItemStyle(B,F,0,re)}for(S=1;S<=o;++S){if(this.options.fullWidth?(H=this.options.dist,W=S===o&&h<0?1-C:1):(H=this.options.dist*(2*S+C*m),W=1-q*(2*S+C*m)),!this.noWrap||this.center+S<this.count){B=this.images[this._wrap(this.center+S)];var Z=R+" translateX("+(this.options.shift+(this.dim*S-h)/2)+"px) translateZ("+H+"px)";this._updateItemStyle(B,W,-S,Z)}if(this.options.fullWidth?(H=this.options.dist,W=S===o&&0<h?1-C:1):(H=this.options.dist*(2*S-C*m),W=1-q*(2*S-C*m)),!this.noWrap||0<=this.center-S){B=this.images[this._wrap(this.center-S)];var me=R+" translateX("+(-this.options.shift+(-this.dim*S-h)/2)+"px) translateZ("+H+"px)";this._updateItemStyle(B,W,-S,me)}}if(!this.noWrap||0<=this.center&&this.center<this.count){B=this.images[this._wrap(this.center)];var ie=R+" translateX("+-h/2+"px) translateX("+m*this.options.shift*C+"px) translateZ("+this.options.dist*C+"px)";this._updateItemStyle(B,F,0,ie)}var we=this.$el.find(".carousel-item").eq(this._wrap(this.center));oe!==this.center&&typeof this.options.onCycleTo=="function"&&this.options.onCycleTo.call(this,we[0],this.dragged),typeof this.oneTimeCallback=="function"&&(this.oneTimeCallback.call(this,we[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(n,s,o,h){n.style[this.xform]=h,n.style.zIndex=o,n.style.opacity=s,n.style.visibility="visible"}},{key:"_cycleTo",value:function(n,s){var o=this.center%this.count-n;this.noWrap||(o<0?Math.abs(o+this.count)<Math.abs(o)&&(o+=this.count):0<o&&Math.abs(o-this.count)<o&&(o-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),o<0?this.target+=this.dim*Math.abs(o):0<o&&(this.target-=this.dim*o),typeof s=="function"&&(this.oneTimeCallback=s),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(n){(n===void 0||isNaN(n))&&(n=1);var s=this.center+n;if(s>=this.count||s<0){if(this.noWrap)return;s=this._wrap(s)}this._cycleTo(s)}},{key:"prev",value:function(n){(n===void 0||isNaN(n))&&(n=1);var s=this.center-n;if(s>=this.count||s<0){if(this.noWrap)return;s=this._wrap(s)}this._cycleTo(s)}},{key:"set",value:function(n,s){if((n===void 0||isNaN(n))&&(n=0),n>this.count||n<0){if(this.noWrap)return;n=this._wrap(n)}this._cycleTo(n,s)}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Carousel}},{key:"defaults",get:function(){return p}}]),d}();M.Carousel=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"carousel","M_Carousel")}(cash),function(u){var p={onOpen:void 0,onClose:void 0},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(o.el.M_TapTarget=o).options=u.extend({},d.defaults,s),o.isOpen=!1,o.$origin=u("#"+o.$el.attr("data-target")),o._setup(),o._calculatePositioning(),o._setupEventHandlers(),o}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var n=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=n.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(n){this.open()}},{key:"_handleOriginClick",value:function(n){this.close()}},{key:"_handleResize",value:function(n){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(n){u(n.target).closest(".tap-target-wrapper").length||(this.close(),n.preventDefault(),n.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=u(this.wrapper).find(".tap-target-wave")[0],this.originEl=u(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],u(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(u(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var n=this.$origin.css("position")==="fixed";if(!n)for(var s=this.$origin.parents(),o=0;o<s.length&&!(n=u(s[o]).css("position")=="fixed");o++);var h=this.$origin.outerWidth(),m=this.$origin.outerHeight(),C=n?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,S=n?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,B=window.innerWidth,R=window.innerHeight,H=B/2,W=R/2,F=S<=H,oe=H<S,q=C<=W,G=W<C,te=.25*B<=S&&S<=.75*B,re=this.$el.outerWidth(),Z=this.$el.outerHeight(),me=C+m/2-Z/2,ie=S+h/2-re/2,we=n?"fixed":"absolute",We=te?re:re/2+h,$e=Z/2,Ne=q?Z/2:0,J=F&&!te?re/2-h:0,Te=h,Oe=G?"bottom":"top",Ae=2*h,ue=Ae,xe=Z/2-ue/2,qe=re/2-Ae/2,k={};k.top=q?me+"px":"",k.right=oe?B-ie-re+"px":"",k.bottom=G?R-me-Z+"px":"",k.left=F?ie+"px":"",k.position=we,u(this.wrapper).css(k),u(this.contentEl).css({width:We+"px",height:$e+"px",top:Ne+"px",right:"0px",bottom:"0px",left:J+"px",padding:Te+"px",verticalAlign:Oe}),u(this.waveEl).css({top:xe+"px",left:qe+"px",width:Ae+"px",height:ue+"px"})}},{key:"open",value:function(){this.isOpen||(typeof this.options.onOpen=="function"&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&(typeof this.options.onClose=="function"&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_TapTarget}},{key:"defaults",get:function(){return p}}]),d}();M.TapTarget=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"tapTarget","M_TapTarget")}(cash),function(u){var p={classes:"",dropdownOptions:{}},y=function(w){function d(n,s){c(this,d);var o=a(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return o.$el.hasClass("browser-default")?a(o):((o.el.M_FormSelect=o).options=u.extend({},d.defaults,s),o.isMultiple=o.$el.prop("multiple"),o.el.tabIndex=-1,o._keysSelected={},o._valueDict={},o._setupDropdown(),o._setupEventHandlers(),o)}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var n=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),u(this.dropdownOptions).find("li:not(.optgroup)").each(function(s){s.addEventListener("click",n._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var n=this;u(this.dropdownOptions).find("li:not(.optgroup)").each(function(s){s.removeEventListener("click",n._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(n){this._setValueToInput()}},{key:"_handleOptionClick",value:function(n){n.preventDefault();var s=u(n.target).closest("li")[0],o=s.id;if(!u(s).hasClass("disabled")&&!u(s).hasClass("optgroup")&&o.length){var h=!0;if(this.isMultiple){var m=u(this.dropdownOptions).find("li.disabled.selected");m.length&&(m.removeClass("selected"),m.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(m[0].id)),h=this._toggleEntryFromArray(o)}else u(this.dropdownOptions).find("li").removeClass("selected"),u(s).toggleClass("selected",h);u(this._valueDict[o].el).prop("selected")!==h&&(u(this._valueDict[o].el).prop("selected",h),this.$el.trigger("change"))}n.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var n=this;this.wrapper=document.createElement("div"),u(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(u(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),u(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(h){if(u(h).is("option")){var m=void 0;m=n.isMultiple?n._appendOptionWithIcon(n.$el,h,"multiple"):n._appendOptionWithIcon(n.$el,h),n._addOptionToValueDict(h,m)}else if(u(h).is("optgroup")){var C=u(h).children("option");u(n.dropdownOptions).append(u('<li class="optgroup"><span>'+h.getAttribute("label")+"</span></li>")[0]),C.each(function(S){var B=n._appendOptionWithIcon(n.$el,S,"optgroup-option");n._addOptionToValueDict(S,B)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),u(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&u(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var s=u('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(s[0]),!this.el.disabled){var o=u.extend({},this.options.dropdownOptions);o.onOpenEnd=function(h){var m=u(n.dropdownOptions).find(".selected").first();if(n.dropdown.isScrollable&&m.length){var C=m[0].getBoundingClientRect().top-n.dropdownOptions.getBoundingClientRect().top;C-=n.dropdownOptions.clientHeight/2,n.dropdownOptions.scrollTop=C}},this.isMultiple&&(o.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,o)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(n,s){var o=Object.keys(this._valueDict).length,h=this.dropdownOptions.id+o,m={};s.id=h,m.el=n,m.optionEl=s,this._valueDict[h]=m}},{key:"_removeDropdown",value:function(){u(this.wrapper).find(".caret").remove(),u(this.input).remove(),u(this.dropdownOptions).remove(),u(this.wrapper).before(this.$el),u(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(n,s,o){var h=s.disabled?"disabled ":"",m=o==="optgroup-option"?"optgroup-option ":"",C=this.isMultiple?'<label><input type="checkbox"'+h+'"/><span>'+s.innerHTML+"</span></label>":s.innerHTML,S=u("<li></li>"),B=u("<span></span>");B.html(C),S.addClass(h+" "+m),S.append(B);var R=s.getAttribute("data-icon");if(R){var H=u('<img alt="" src="'+R+'">');S.prepend(H)}return u(this.dropdownOptions).append(S[0]),S[0]}},{key:"_toggleEntryFromArray",value:function(n){var s=!this._keysSelected.hasOwnProperty(n),o=u(this._valueDict[n].optionEl);return s?this._keysSelected[n]=!0:delete this._keysSelected[n],o.toggleClass("selected",s),o.find('input[type="checkbox"]').prop("checked",s),o.prop("selected",s),s}},{key:"_setValueToInput",value:function(){var n=[];if(this.$el.find("option").each(function(o){if(u(o).prop("selected")){var h=u(o).text();n.push(h)}}),!n.length){var s=this.$el.find("option:disabled").eq(0);s.length&&s[0].value===""&&n.push(s.text())}this.input.value=n.join(", ")}},{key:"_setSelectedStates",value:function(){for(var n in this._keysSelected={},this._valueDict){var s=this._valueDict[n],o=u(s.el).prop("selected");u(s.optionEl).find('input[type="checkbox"]').prop("checked",o),o?(this._activateOption(u(this.dropdownOptions),u(s.optionEl)),this._keysSelected[n]=!0):u(s.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(n,s){s&&(this.isMultiple||n.find("li.selected").removeClass("selected"),u(s).addClass("selected"))}},{key:"getSelectedValues",value:function(){var n=[];for(var s in this._keysSelected)n.push(this._valueDict[s].el.value);return n}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_FormSelect}},{key:"defaults",get:function(){return p}}]),d}();M.FormSelect=y,M.jQueryLoaded&&M.initializeJqueryWrapper(y,"formSelect","M_FormSelect")}(cash),function(u,p){var y={},w=function(d){function n(s,o){c(this,n);var h=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,o));return(h.el.M_Range=h).options=u.extend({},n.defaults,o),h._mousedown=!1,h._setupThumb(),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){u(this.value).html(this.$el.val()),u(this.thumb).hasClass("active")||this._showRangeBubble();var s=this._calcRangeOffset();u(this.thumb).addClass("active").css("left",s+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(s){if(u(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),u(this.thumb).hasClass("active")||this._showRangeBubble(),s.type!=="input"){var o=this._calcRangeOffset();u(this.thumb).addClass("active").css("left",o+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){u(this.thumb).hasClass("active")||this._showRangeBubble();var s=this._calcRangeOffset();u(this.thumb).addClass("active").css("left",s+"px"),u(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var s=7+parseInt(this.$el.css("padding-left"))+"px";u(this.thumb).hasClass("active")&&(p.remove(this.thumb),p({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:s,duration:100})),u(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),u(this.thumb).addClass("thumb"),u(this.value).addClass("value"),u(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){u(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var s=-7+parseInt(u(this.thumb).parent().css("padding-left"))+"px";p.remove(this.thumb),p({targets:this.thumb,height:30,width:30,top:-30,marginLeft:s,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var s=this.$el.width()-15,o=parseFloat(this.$el.attr("max"))||100,h=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-h)/(o-h)*s}}],[{key:"init",value:function(s,o){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Range}},{key:"defaults",get:function(){return y}}]),n}();M.Range=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"range","M_Range"),w.init(u("input[type=range]"))}(cash,M.anime)})(Ei,Ei.exports);const Sn="modulepreload",On=function(r){return"/inv/"+r},Ci={},Tt=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=Promise.allSettled(t.map(g=>{if(g=On(g),g in Ci)return;Ci[g]=!0;const b=g.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const O=document.createElement("link");if(O.rel=b?"stylesheet":Sn,b||(O.as="script"),O.crossOrigin="",O.href=g,f&&O.setAttribute("nonce",f),document.head.appendChild(O),b)return new Promise((L,A)=>{O.addEventListener("load",L),O.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return a.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},xn=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Tt(async()=>{const{default:i}=await Promise.resolve().then(()=>dt);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class vi extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class Mn extends vi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ti extends vi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Si extends vi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ni;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ni||(ni={}));var Ln=function(r,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(E){try{b(i.next(E))}catch(O){c(O)}}function g(E){try{b(i.throw(E))}catch(O){c(O)}}function b(E){E.done?l(E.value):a(E.value).then(f,g)}b((i=i.apply(r,e||[])).next())})};class $n{constructor(e,{headers:t={},customFetch:i,region:a=ni.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=xn(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return Ln(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:c}=t;let f={},{region:g}=t;g||(g=this.region);const b=new URL(`${this.url}/${e}`);g&&g!=="any"&&(f["x-region"]=g,b.searchParams.set("forceFunctionRegion",g));let E;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",E=c):typeof c=="string"?(f["Content-Type"]="text/plain",E=c):typeof FormData<"u"&&c instanceof FormData?E=c:(f["Content-Type"]="application/json",E=JSON.stringify(c)));const O=yield this.fetch(b.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:E}).catch(u=>{throw new Mn(u)}),L=O.headers.get("x-relay-error");if(L&&L==="true")throw new Ti(O);if(!O.ok)throw new Si(O);let A=((i=O.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),U;return A==="application/json"?U=yield O.json():A==="application/octet-stream"?U=yield O.blob():A==="text/event-stream"?U=O:A==="multipart/form-data"?U=yield O.formData():U=yield O.text(),{data:U,error:null,response:O}}catch(a){return{data:null,error:a,response:a instanceof Si||a instanceof Ti?a.context:void 0}}})}}var ke={},gi={},Nt={},St={},qt={},Ut={},An=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ut=An();const In=ut.fetch,Zi=ut.fetch.bind(ut),en=ut.Headers,Bn=ut.Request,Dn=ut.Response,dt=Object.freeze(Object.defineProperty({__proto__:null,Headers:en,Request:Bn,Response:Dn,default:Zi,fetch:In},Symbol.toStringTag,{value:"Module"})),Pn=Tn(dt);var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});let Rn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ft.default=Rn;var tn=ge&&ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ut,"__esModule",{value:!0});const jn=tn(Pn),Hn=tn(Ft);let Wn=class{constructor(e){var t,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(i=e.isMaybeSingle)!==null&&i!==void 0?i:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=jn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,f,g,b;let E=null,O=null,L=null,A=l.status,U=l.statusText;if(l.ok){if(this.method!=="HEAD"){const w=await l.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?O=w:O=JSON.parse(w))}const p=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),y=(g=l.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");p&&y&&y.length>1&&(L=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(E={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,L=null,A=406,U="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const p=await l.text();try{E=JSON.parse(p),Array.isArray(E)&&l.status===404&&(O=[],E=null,A=200,U="OK")}catch{l.status===404&&p===""?(A=204,U="No Content"):E={message:p}}if(E&&this.isMaybeSingle&&(!((b=E==null?void 0:E.details)===null||b===void 0)&&b.includes("0 rows"))&&(E=null,A=200,U="OK"),E&&this.shouldThrowOnError)throw new Hn.default(E)}return{error:E,data:O,count:L,status:A,statusText:U}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,f,g;return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(f=l==null?void 0:l.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(g=l==null?void 0:l.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}};Ut.default=Wn;var Nn=ge&&ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qt,"__esModule",{value:!0});const qn=Nn(Ut);let Un=class extends qn.default{select(e){let t=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!t?"":(a==='"'&&(t=!t),a)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",f=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${f?`${f},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(c,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var f;const g=[e?"analyze":null,t?"verbose":null,i?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),b=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${b}"; options=${g};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};qt.default=Un;var Fn=ge&&ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(St,"__esModule",{value:!0});const zn=Fn(qt);let Vn=class extends zn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const i=Array.from(new Set(t)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${l}fts${c}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};St.default=Vn;var Kn=ge&&ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nt,"__esModule",{value:!0});const vt=Kn(St);let Jn=class{constructor(e,{headers:t={},schema:i,fetch:a}){this.url=e,this.headers=new Headers(t),this.schema=i,this.fetch=a}select(e,{head:t=!1,count:i}={}){const a=t?"HEAD":"GET";let l=!1;const c=(e??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),i&&this.headers.append("Prefer",`count=${i}`),new vt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:i=!0}={}){var a;const l="POST";if(t&&this.headers.append("Prefer",`count=${t}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(c.length>0){const f=[...new Set(c)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new vt.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:a,defaultToNull:l=!0}={}){var c;const f="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const g=e.reduce((b,E)=>b.concat(Object.keys(E)),[]);if(g.length>0){const b=[...new Set(g)].map(E=>`"${E}"`);this.url.searchParams.set("columns",b.join(","))}}return new vt.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(e,{count:t}={}){var i;const a="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new vt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:e}={}){var t;const i="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new vt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Nt.default=Jn;var nn=ge&&ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0});const Qn=nn(Nt),Xn=nn(St);let Gn=class sn{constructor(e,{headers:t={},schema:i,fetch:a}={}){this.url=e,this.headers=new Headers(t),this.schemaName=i,this.fetch=a}from(e){const t=new URL(`${this.url}/${e}`);return new Qn.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new sn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:a=!1,count:l}={}){var c;let f;const g=new URL(`${this.url}/rpc/${e}`);let b;i||a?(f=i?"HEAD":"GET",Object.entries(t).filter(([O,L])=>L!==void 0).map(([O,L])=>[O,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([O,L])=>{g.searchParams.append(O,L)})):(f="POST",b=t);const E=new Headers(this.headers);return l&&E.set("Prefer",`count=${l}`),new Xn.default({method:f,url:g,headers:E,schema:this.schemaName,body:b,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};gi.default=Gn;var ft=ge&&ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.PostgrestError=ke.PostgrestBuilder=ke.PostgrestTransformBuilder=ke.PostgrestFilterBuilder=ke.PostgrestQueryBuilder=ke.PostgrestClient=void 0;const rn=ft(gi);ke.PostgrestClient=rn.default;const on=ft(Nt);ke.PostgrestQueryBuilder=on.default;const an=ft(St);ke.PostgrestFilterBuilder=an.default;const ln=ft(qt);ke.PostgrestTransformBuilder=ln.default;const hn=ft(Ut);ke.PostgrestBuilder=hn.default;const un=ft(Ft);ke.PostgrestError=un.default;var Yn=ke.default={PostgrestClient:rn.default,PostgrestQueryBuilder:on.default,PostgrestFilterBuilder:an.default,PostgrestTransformBuilder:ln.default,PostgrestBuilder:hn.default,PostgrestError:un.default};const{PostgrestClient:Zn,PostgrestQueryBuilder:Ao,PostgrestFilterBuilder:Io,PostgrestTransformBuilder:Bo,PostgrestBuilder:Do,PostgrestError:Po}=Yn;class es{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=t.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ts="2.15.5",is=`realtime-js/${ts}`,ns="1.0.0",si=1e4,ss=1e3,rs=100;var yt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(yt||(yt={}));var pe;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(pe||(pe={}));var Le;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Le||(Le={}));var ri;(function(r){r.websocket="websocket"})(ri||(ri={}));var Ze;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ze||(Ze={}));class os{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const a=t.getUint8(1),l=t.getUint8(2);let c=this.HEADER_LENGTH+2;const f=i.decode(e.slice(c,c+a));c=c+a;const g=i.decode(e.slice(c,c+l));c=c+l;const b=JSON.parse(i.decode(e.slice(c,e.byteLength)));return{ref:null,topic:f,event:g,payload:b}}}class cn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(le||(le={}));const Oi=(r,e,t={})=>{var i;const a=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,c)=>(l[c]=as(c,r,e,a),l),{})},as=(r,e,t,i)=>{const a=e.find(f=>f.name===r),l=a==null?void 0:a.type,c=t[r];return l&&!i.includes(l)?dn(l,c):oi(c)},dn=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return cs(e,t)}switch(r){case le.bool:return ls(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return hs(e);case le.json:case le.jsonb:return us(e);case le.timestamp:return ds(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return oi(e);default:return oi(e)}},oi=r=>r,ls=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},hs=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},us=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},cs=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,i=r[t];if(r[0]==="{"&&i==="}"){let l;const c=r.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>dn(e,f))}return r},ds=r=>typeof r=="string"?r.replace(" ","T"):r,fn=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Vt{constructor(e,t,i={},a=si){this.channel=e,this.event=t,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xi;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(xi||(xi={}));class _t{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_t.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=_t.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=_t.syncDiff(this.state,a,l,c),f())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,a){const l=this.cloneDeep(e),c=this.transformState(t),f={},g={};return this.map(l,(b,E)=>{c[b]||(g[b]=E)}),this.map(c,(b,E)=>{const O=l[b];if(O){const L=E.map(p=>p.presence_ref),A=O.map(p=>p.presence_ref),U=E.filter(p=>A.indexOf(p.presence_ref)<0),u=O.filter(p=>L.indexOf(p.presence_ref)<0);U.length>0&&(f[b]=U),u.length>0&&(g[b]=u)}else f[b]=E}),this.syncDiff(l,{joins:f,leaves:g},i,a)}static syncDiff(e,t,i,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(l,(f,g)=>{var b;const E=(b=e[f])!==null&&b!==void 0?b:[];if(e[f]=this.cloneDeep(g),E.length>0){const O=e[f].map(A=>A.presence_ref),L=E.filter(A=>O.indexOf(A.presence_ref)<0);e[f].unshift(...L)}i(f,E,g)}),this.map(c,(f,g)=>{let b=e[f];if(!b)return;const E=g.map(O=>O.presence_ref);b=b.filter(O=>E.indexOf(O.presence_ref)<0),e[f]=b,a(f,b,g),b.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const a=e[i];return"metas"in a?t[i]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[i]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mi;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Mi||(Mi={}));var wt;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(wt||(wt={}));var je;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(je||(je={}));class mi{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vt(this,Le.join,this.params,this.timeout),this.rejoinTimer=new cn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Le.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new _t(this),this.broadcastEndpointURL=fn(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==pe.closed){const{config:{broadcast:c,presence:f,private:g}}=this.params,b=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(A=>A.filter))!==null&&a!==void 0?a:[],E=!!this.bindings[wt.PRESENCE]&&this.bindings[wt.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,O={},L={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:E}),postgres_changes:b,private:g};this.socket.accessTokenValue&&(O.access_token=this.socket.accessTokenValue),this._onError(A=>e==null?void 0:e(je.CHANNEL_ERROR,A)),this._onClose(()=>e==null?void 0:e(je.CLOSED)),this.updateJoinPayload(Object.assign({config:L},O)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:A})=>{var U;if(this.socket.setAuth(),A===void 0){e==null||e(je.SUBSCRIBED);return}else{const u=this.bindings.postgres_changes,p=(U=u==null?void 0:u.length)!==null&&U!==void 0?U:0,y=[];for(let w=0;w<p;w++){const d=u[w],{filter:{event:n,schema:s,table:o,filter:h}}=d,m=A&&A[w];if(m&&m.event===n&&m.schema===s&&m.table===o&&m.filter===h)y.push(Object.assign(Object.assign({},d),{id:m.id}));else{this.unsubscribe(),this.state=pe.errored,e==null||e(je.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(je.SUBSCRIBED);return}}).receive("error",A=>{this.state=pe.errored,e==null||e(je.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(je.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===pe.joined&&e===wt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,i)}async send(e,t={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=b.body)===null||a===void 0?void 0:a.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,g;const b=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),b.receive("ok",()=>l("ok")),b.receive("error",()=>l("error")),b.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Le.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Vt(this,Le.leave,{},e),i.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pe.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const a=new AbortController,l=setTimeout(()=>a.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Vt(this,e,t,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>rs){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var a,l;const c=e.toLocaleLowerCase(),{close:f,error:g,leave:b,join:E}=Le;if(i&&[f,g,b,E].indexOf(c)>=0&&i!==this._joinRef())return;let L=this._onMessage(c,t,i);if(t&&!L)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(A=>{var U,u,p;return((U=A.filter)===null||U===void 0?void 0:U.event)==="*"||((p=(u=A.filter)===null||u===void 0?void 0:u.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===c}).map(A=>A.callback(L,i)):(l=this.bindings[c])===null||l===void 0||l.filter(A=>{var U,u,p,y,w,d;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in A){const n=A.id,s=(U=A.filter)===null||U===void 0?void 0:U.event;return n&&((u=t.ids)===null||u===void 0?void 0:u.includes(n))&&(s==="*"||(s==null?void 0:s.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const n=(w=(y=A==null?void 0:A.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return n==="*"||n===((d=t==null?void 0:t.event)===null||d===void 0?void 0:d.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===c}).map(A=>{if(typeof L=="object"&&"ids"in L){const U=L.data,{schema:u,table:p,commit_timestamp:y,type:w,errors:d}=U;L=Object.assign(Object.assign({},{schema:u,table:p,commit_timestamp:y,eventType:w,new:{},old:{},errors:d}),this._getPayloadRecords(U))}A.callback(L,i)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:i};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&mi.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Le.close,{},e)}_onError(e){this._on(Le.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Oi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Oi(e.columns,e.old_record)),t}}const Kt=()=>{},Mt={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fs=[1e3,2e3,5e3,1e4],ps=1e4,vs=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gs{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=si,this.transport=null,this.heartbeatIntervalMs=Mt.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kt,this.ref=0,this.reconnectTimer=null,this.logger=Kt,this.conn=null,this.sendBuffer=[],this.serializer=new os,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>Tt(async()=>{const{default:f}=await Promise.resolve().then(()=>dt);return{default:f}},void 0).then(({default:f})=>f(...c)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...c)=>l(...c)},!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ri.websocket}`,this.httpEndpoint=fn(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=es.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ns}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case yt.connecting:return Ze.Connecting;case yt.open:return Ze.Open;case yt.closing:return Ze.Closing;default:return Ze.Closed}}isConnected(){return this.connectionState()===Ze.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===i);if(a)return a;{const l=new mi(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:i,payload:a,ref:l}=e,c=()=>{this.encode(e,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${t} ${i} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ss,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Mt.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(b){this.log("error","error in heartbeat callback",b)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:l,ref:c}=t,f=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${i} ${a} ${f}`.trim(),l),this.channels.filter(b=>b._isMember(i)).forEach(b=>b._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Le.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${i}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([vs],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const a={access_token:t,version:is};t&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Le.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new cn(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mt.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,a,l,c,f,g,b,E;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:si,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Mt.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:Kt,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:O=>fs[O-1]||ps,this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:(O,L)=>L(JSON.stringify(O)),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ve(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class ms extends yi{constructor(e,t,i){super(e),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ai extends yi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ys=function(r,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(E){try{b(i.next(E))}catch(O){c(O)}}function g(E){try{b(i.throw(E))}catch(O){c(O)}}function b(E){E.done?l(E.value):a(E.value).then(f,g)}b((i=i.apply(r,e||[])).next())})};const pn=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Tt(async()=>{const{default:i}=await Promise.resolve().then(()=>dt);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},_s=()=>ys(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Tt(()=>Promise.resolve().then(()=>dt),void 0)).Response:Response}),li=r=>{if(Array.isArray(r))return r.map(t=>li(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,i])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=li(i)}),e},ws=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var et=function(r,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(E){try{b(i.next(E))}catch(O){c(O)}}function g(E){try{b(i.throw(E))}catch(O){c(O)}}function b(E){E.done?l(E.value):a(E.value).then(f,g)}b((i=i.apply(r,e||[])).next())})};const Jt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),bs=(r,e,t)=>et(void 0,void 0,void 0,function*(){const i=yield _s();r instanceof i&&!(t!=null&&t.noResolveJson)?r.json().then(a=>{const l=r.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new ms(Jt(a),l,c))}).catch(a=>{e(new ai(Jt(a),a))}):e(new ai(Jt(r),r))}),ks=(r,e,t,i)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!i?a:(ws(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(i)):a.body=i,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Ot(r,e,t,i,a,l){return et(this,void 0,void 0,function*(){return new Promise((c,f)=>{r(t,ks(e,i,a,l)).then(g=>{if(!g.ok)throw g;return i!=null&&i.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>bs(g,f,i))})})}function Pt(r,e,t,i){return et(this,void 0,void 0,function*(){return Ot(r,"GET",e,t,i)})}function Ie(r,e,t,i,a){return et(this,void 0,void 0,function*(){return Ot(r,"POST",e,i,a,t)})}function hi(r,e,t,i,a){return et(this,void 0,void 0,function*(){return Ot(r,"PUT",e,i,a,t)})}function Es(r,e,t,i){return et(this,void 0,void 0,function*(){return Ot(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function vn(r,e,t,i,a){return et(this,void 0,void 0,function*(){return Ot(r,"DELETE",e,i,a,t)})}var ye=function(r,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(E){try{b(i.next(E))}catch(O){c(O)}}function g(E){try{b(i.throw(E))}catch(O){c(O)}}function b(E){E.done?l(E.value):a(E.value).then(f,g)}b((i=i.apply(r,e||[])).next())})};const Cs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Li={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ts{constructor(e,t={},i,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=i,this.fetch=pn(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,i,a){return ye(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Li),a);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g))):(l=i,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,g&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),a!=null&&a.headers&&(f=Object.assign(Object.assign({},f),a.headers));const b=this._removeEmptyFolders(t),E=this._getFinalPath(b),O=yield(e=="PUT"?hi:Ie)(this.fetch,`${this.url}/object/${E}`,l,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:b,id:O.Id,fullPath:O.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ve(l))return{data:null,error:l};throw l}})}upload(e,t,i){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,a){return ye(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",t);try{let g;const b=Object.assign({upsert:Li.upsert},a),E=Object.assign(Object.assign({},this.headers),{"x-upsert":String(b.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",b.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",b.cacheControl)):(g=i,E["cache-control"]=`max-age=${b.cacheControl}`,E["content-type"]=b.contentType);const O=yield hi(this.fetch,f.toString(),g,{headers:E});return{data:{path:l,fullPath:O.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(ve(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return ye(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield Ie(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new yi("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}update(e,t,i){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return ye(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ve(a))return{data:null,error:a};throw a}})}copy(e,t,i){return ye(this,void 0,void 0,function*(){try{return{data:{path:(yield Ie(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ve(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,i){return ye(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Ie(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ve(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,i){return ye(this,void 0,void 0,function*(){try{const a=yield Ie(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ve(a))return{data:null,error:a};throw a}})}download(e,t){return ye(this,void 0,void 0,function*(){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=l?`?${l}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield Pt(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(ve(f))return{data:null,error:f};throw f}})}info(e){return ye(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield Pt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:li(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}exists(e){return ye(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Es(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i)&&i instanceof ai){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const f=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let b=a.join("&");return b!==""&&(b=`?${b}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${b}`)}}}remove(e){return ye(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}})}list(e,t,i){return ye(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Cs),t),{prefix:e||""});return{data:yield Ie(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ve(a))return{data:null,error:a};throw a}})}listV2(e,t){return ye(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Ie(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},t),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ss="2.12.1",Os={"X-Client-Info":`storage-js/${Ss}`};var it=function(r,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(E){try{b(i.next(E))}catch(O){c(O)}}function g(E){try{b(i.throw(E))}catch(O){c(O)}}function b(E){E.done?l(E.value):a(E.value).then(f,g)}b((i=i.apply(r,e||[])).next())})};class xs{constructor(e,t={},i,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},Os),t),this.fetch=pn(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return it(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ve(e))return{data:null,error:e};throw e}})}getBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return it(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return it(this,void 0,void 0,function*(){try{return{data:yield hi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}emptyBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}})}}class Ms extends xs{constructor(e,t={},i,a){super(e,t,i,a)}from(e){return new Ts(this.url,this.headers,e,this.fetch)}}const Ls="2.57.4";let mt="";typeof Deno<"u"?mt="deno":typeof document<"u"?mt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mt="react-native":mt="node";const $s={"X-Client-Info":`supabase-js-${mt}/${Ls}`},As={headers:$s},Is={schema:"public"},Bs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ds={};var Ps=function(r,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(E){try{b(i.next(E))}catch(O){c(O)}}function g(E){try{b(i.throw(E))}catch(O){c(O)}}function b(E){E.done?l(E.value):a(E.value).then(f,g)}b((i=i.apply(r,e||[])).next())})};const Rs=r=>{let e;return r?e=r:typeof fetch>"u"?e=Zi:e=fetch,(...t)=>e(...t)},js=()=>typeof Headers>"u"?en:Headers,Hs=(r,e,t)=>{const i=Rs(t),a=js();return(l,c)=>Ps(void 0,void 0,void 0,function*(){var f;const g=(f=yield e())!==null&&f!==void 0?f:r;let b=new a(c==null?void 0:c.headers);return b.has("apikey")||b.set("apikey",r),b.has("Authorization")||b.set("Authorization",`Bearer ${g}`),i(l,Object.assign(Object.assign({},c),{headers:b}))})};var Ws=function(r,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(E){try{b(i.next(E))}catch(O){c(O)}}function g(E){try{b(i.throw(E))}catch(O){c(O)}}function b(E){E.done?l(E.value):a(E.value).then(f,g)}b((i=i.apply(r,e||[])).next())})};function Ns(r){return r.endsWith("/")?r:r+"/"}function qs(r,e){var t,i;const{db:a,auth:l,realtime:c,global:f}=r,{db:g,auth:b,realtime:E,global:O}=e,L={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},b),l),realtime:Object.assign(Object.assign({},E),c),storage:{},global:Object.assign(Object.assign(Object.assign({},O),f),{headers:Object.assign(Object.assign({},(t=O==null?void 0:O.headers)!==null&&t!==void 0?t:{}),(i=f==null?void 0:f.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Ws(this,void 0,void 0,function*(){return""})};return r.accessToken?L.accessToken=r.accessToken:delete L.accessToken,L}function Us(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ns(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const gn="2.71.1",at=30*1e3,ui=3,Qt=ui*at,Fs="http://localhost:9999",zs="supabase.auth.token",Vs={"X-Client-Info":`gotrue-js/${gn}`},ci="X-Supabase-Api-Version",mn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ks=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Js=10*60*1e3;class _i extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function Y(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Qs extends _i{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function Xs(r){return Y(r)&&r.name==="AuthApiError"}class yn extends _i{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ke extends _i{constructor(e,t,i,a){super(e,i,a),this.name=t,this.status=i}}class ze extends Ke{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gs(r){return Y(r)&&r.name==="AuthSessionMissingError"}class Lt extends Ke{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $t extends Ke{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class At extends Ke{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ys(r){return Y(r)&&r.name==="AuthImplicitGrantRedirectError"}class $i extends Ke{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class di extends Ke{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Xt(r){return Y(r)&&r.name==="AuthRetryableFetchError"}class Ai extends Ke{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class fi extends Ke{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ii=` 	
\r=`.split(""),Zs=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Ii.length;e+=1)r[Ii[e].charCodeAt(0)]=-2;for(let e=0;e<Rt.length;e+=1)r[Rt[e].charCodeAt(0)]=e;return r})();function Bi(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Rt[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Rt[i]),e.queuedBits-=6}}function _n(r,e,t){const i=Zs[r];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Di(r){const e=[],t=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{ir(c,i,t)};for(let c=0;c<r.length;c+=1)_n(r.charCodeAt(c),a,l);return e.join("")}function er(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function tr(r,e){for(let t=0;t<r.length;t+=1){let i=r.charCodeAt(t);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}er(i,e)}}function ir(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let i=1;i<6;i+=1)if(!(r>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function nr(r){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)_n(r.charCodeAt(a),t,i);return new Uint8Array(e)}function sr(r){const e=[];return tr(r,t=>e.push(t)),new Uint8Array(e)}function rr(r){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};return r.forEach(a=>Bi(a,t,i)),Bi(null,t,i),e.join("")}function or(r){return Math.round(Date.now()/1e3)+r}function ar(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Me=()=>typeof window<"u"&&typeof document<"u",Xe={tested:!1,writable:!1},wn=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xe.tested)return Xe.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Xe.tested=!0,Xe.writable=!0}catch{Xe.tested=!0,Xe.writable=!1}return Xe.writable};function lr(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((i,a)=>{e[a]=i}),e}const bn=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Tt(async()=>{const{default:i}=await Promise.resolve().then(()=>dt);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},hr=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",lt=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Ge=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ue=async(r,e)=>{await r.removeItem(e)};class zt{constructor(){this.promise=new zt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}zt.promiseConstructor=Promise;function Gt(r){const e=r.split(".");if(e.length!==3)throw new fi("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Ks.test(e[i]))throw new fi("JWT not in base64url format");return{header:JSON.parse(Di(e[0])),payload:JSON.parse(Di(e[1])),signature:nr(e[2]),raw:{header:e[0],payload:e[1]}}}async function ur(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function cr(r,e){return new Promise((i,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await r(l);if(!e(l,null,c)){i(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function dr(r){return("0"+r.toString(16)).substr(-2)}function fr(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,dr).join("")}async function pr(r){const t=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(i);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function vr(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await pr(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nt(r,e,t=!1){const i=fr();let a=i;t&&(a+="/PASSWORD_RECOVERY"),await lt(r,`${e}-code-verifier`,a);const l=await vr(i);return[l,i===l?"plain":"s256"]}const gr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mr(r){const e=r.headers.get(ci);if(!e||!e.match(gr))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yr(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function _r(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function st(r){if(!wr.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yt(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Pi(r){return JSON.parse(JSON.stringify(r))}var br=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(t[i[a]]=r[i[a]]);return t};const Ye=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),kr=[502,503,504];async function Ri(r){var e;if(!hr(r))throw new di(Ye(r),0);if(kr.includes(r.status))throw new di(Ye(r),r.status);let t;try{t=await r.json()}catch(l){throw new yn(Ye(l),l)}let i;const a=mr(r);if(a&&a.getTime()>=mn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new Ai(Ye(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new ze}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Ai(Ye(t),r.status,t.weak_password.reasons);throw new Qs(Ye(t),r.status||500,i)}const Er=(r,e,t,i)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),t))};async function ee(r,e,t,i){var a;const l=Object.assign({},i==null?void 0:i.headers);l[ci]||(l[ci]=mn["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const c=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(c.redirect_to=i.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await Cr(r,e,t+f,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(g):{data:Object.assign({},g),error:null}}async function Cr(r,e,t,i,a,l){const c=Er(e,i,a,l);let f;try{f=await r(t,Object.assign({},c))}catch(g){throw console.error(g),new di(Ye(g),0)}if(f.ok||await Ri(f),i!=null&&i.noResolveJson)return f;try{return await f.json()}catch(g){await Ri(g)}}function Re(r){var e;let t=null;xr(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=or(r.expires_in)));const i=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:i},error:null}}function ji(r){const e=Re(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Ve(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Tr(r){return{data:r,error:null}}function Sr(r){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:l}=r,c=br(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:f,user:g},error:null}}function Or(r){return r}function xr(r){return r.access_token&&r.refresh_token&&r.expires_in}const Zt=["global","local","others"];var Mr=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(t[i[a]]=r[i[a]]);return t};class Lr{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=bn(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Zt[0]){if(Zt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zt.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ve})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=Mr(e,["options"]),a=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Sr,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Y(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ve})}catch(t){if(Y(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,a,l,c,f,g;try{const b={nextPage:null,lastPage:0,total:0},E=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Or});if(E.error)throw E.error;const O=await E.json(),L=(c=E.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(g=(f=E.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return A.length>0&&(A.forEach(U=>{const u=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(U.split(";")[1].split("=")[1]);b[`${p}Page`]=u}),b.total=parseInt(L)),{data:Object.assign(Object.assign({},O),b),error:null}}catch(b){if(Y(b))return{data:{users:[]},error:b};throw b}}async getUserById(e){st(e);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ve})}catch(t){if(Y(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){st(e);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ve})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){st(e);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ve})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){st(e.userId);try{const{data:t,error:i}=await ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:i}}catch(t){if(Y(t))return{data:null,error:t};throw t}}async _deleteFactor(e){st(e.userId),st(e.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}}}function Hi(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function $r(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const rt={debug:!!(globalThis&&wn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ar extends kn{}async function Ir(r,e,t){rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),rt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Ar(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(rt.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}$r();const Br={url:Fs,storageKey:zs,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vs,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Wi(r,e,t){return await t()}const ot={};class kt{constructor(e){var t,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kt.nextInstanceID,kt.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Br),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Lr({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=bn(a.fetch),this.lock=a.lock||Wi,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Me()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ir:this.lock=Wi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:wn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hi(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Hi(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=ot[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ot[this.storageKey]=Object.assign(Object.assign({},ot[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ot[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ot[this.storageKey]=Object.assign(Object.assign({},ot[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${gn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=lr(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),Me()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Ys(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Y(t)?{error:t}:{error:new yn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,a;try{const l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Re}),{data:c,error:f}=l;if(f||!c)return{data:{user:null,session:null},error:f};const g=c.session,b=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:b,session:g},error:null}}catch(l){if(Y(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,i,a;try{let l;if("email"in e){const{email:E,password:O,options:L}=e;let A=null,U=null;this.flowType==="pkce"&&([A,U]=await nt(this.storage,this.storageKey)),l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:L==null?void 0:L.emailRedirectTo,body:{email:E,password:O,data:(t=L==null?void 0:L.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:L==null?void 0:L.captchaToken},code_challenge:A,code_challenge_method:U},xform:Re})}else if("phone"in e){const{phone:E,password:O,options:L}=e;l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:E,password:O,data:(i=L==null?void 0:L.data)!==null&&i!==void 0?i:{},channel:(a=L==null?void 0:L.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:L==null?void 0:L.captchaToken}},xform:Re})}else throw new $t("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return{data:{user:null,session:null},error:f};const g=c.session,b=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:b,session:g},error:null}}catch(l){if(Y(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:f}=e;t=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ji})}else if("phone"in e){const{phone:l,password:c,options:f}=e;t=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ji})}else throw new $t("You must provide either an email or phone number and a password");const{data:i,error:a}=t;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Lt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(t){if(Y(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,i,a,l,c,f,g,b,E,O,L,A;let U,u;if("message"in e)U=e.message,u=e.signature;else{const{chain:p,wallet:y,statement:w,options:d}=e;let n;if(Me())if(typeof y=="object")n=y;else{const o=window;if("solana"in o&&typeof o.solana=="object"&&("signIn"in o.solana&&typeof o.solana.signIn=="function"||"signMessage"in o.solana&&typeof o.solana.signMessage=="function"))n=o.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(d!=null&&d.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");n=y}const s=new URL((t=d==null?void 0:d.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in n&&n.signIn){const o=await n.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},d==null?void 0:d.signInWithSolana),{version:"1",domain:s.host,uri:s.href}),w?{statement:w}:null));let h;if(Array.isArray(o)&&o[0]&&typeof o[0]=="object")h=o[0];else if(o&&typeof o=="object"&&"signedMessage"in o&&"signature"in o)h=o;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in h&&"signature"in h&&(typeof h.signedMessage=="string"||h.signedMessage instanceof Uint8Array)&&h.signature instanceof Uint8Array)U=typeof h.signedMessage=="string"?h.signedMessage:new TextDecoder().decode(h.signedMessage),u=h.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in n)||typeof n.signMessage!="function"||!("publicKey"in n)||typeof n!="object"||!n.publicKey||!("toBase58"in n.publicKey)||typeof n.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${s.host} wants you to sign in with your Solana account:`,n.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${s.href}`,`Issued At: ${(a=(i=d==null?void 0:d.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=d==null?void 0:d.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${d.signInWithSolana.notBefore}`]:[],...!((c=d==null?void 0:d.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${d.signInWithSolana.expirationTime}`]:[],...!((f=d==null?void 0:d.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${d.signInWithSolana.chainId}`]:[],...!((g=d==null?void 0:d.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${d.signInWithSolana.nonce}`]:[],...!((b=d==null?void 0:d.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${d.signInWithSolana.requestId}`]:[],...!((O=(E=d==null?void 0:d.signInWithSolana)===null||E===void 0?void 0:E.resources)===null||O===void 0)&&O.length?["Resources",...d.signInWithSolana.resources.map(h=>`- ${h}`)]:[]].join(`
`);const o=await n.signMessage(new TextEncoder().encode(U),"utf8");if(!o||!(o instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");u=o}}try{const{data:p,error:y}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:rr(u)},!((L=e.options)===null||L===void 0)&&L.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Re});if(y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Lt}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:y})}catch(p){if(Y(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await Ge(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(t??"").split("/");try{const{data:l,error:c}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Re});if(await Ue(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Lt}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(Y(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:i,token:a,access_token:l,nonce:c}=e,f=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Re}),{data:g,error:b}=f;return b?{data:{user:null,session:null},error:b}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Lt}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:b})}catch(t){if(Y(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,a,l,c;try{if("email"in e){const{email:f,options:g}=e;let b=null,E=null;this.flowType==="pkce"&&([b,E]=await nt(this.storage,this.storageKey));const{error:O}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(i=g==null?void 0:g.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:b,code_challenge_method:E},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:O}}if("phone"in e){const{phone:f,options:g}=e,{data:b,error:E}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:E}}throw new $t("You must provide either an email or phone number.")}catch(f){if(Y(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var t,i;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:f}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Re});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,b=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:b,session:g},error:null}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,i,a;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await nt(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Tr})}catch(l){if(Y(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new ze;const{error:a}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Y(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:l}=e,{error:c}=await ee(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:i,type:a,options:l}=e,{data:c,error:f}=await ee(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f}}throw new $t("You must provide either an email or phone number and a type")}catch(t){if(Y(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ge(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Qt:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await Ge(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Yt()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,b,E)=>(!c&&b==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,b,E))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ve}):await this._useSession(async t=>{var i,a,l;const{data:c,error:f}=t;if(f)throw f;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ze}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Ve})})}catch(t){if(Y(t))return Gs(t)&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:a,error:l}=i;if(l)throw l;if(!a.session)throw new ze;const c=a.session;let f=null,g=null;this.flowType==="pkce"&&e.email!=null&&([f,g]=await nt(this.storage,this.storageKey));const{data:b,error:E}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:g}),jwt:c.access_token,xform:Ve});if(E)throw E;return c.user=b.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ze;const t=Date.now()/1e3;let i=t,a=!0,l=null;const{payload:c}=Gt(e.access_token);if(c.exp&&(i=c.exp,a=i<=t),a){const{session:f,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(Y(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:c,error:f}=t;if(f)throw f;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new ze;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Y(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Me())throw new At("No browser detected.");if(e.error||e.error_description||e.error_code)throw new At(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new $i("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new At("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $i("No code detected.");const{data:w,error:d}=await this._exchangeCodeForSession(e.code);if(d)throw d;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:f,expires_at:g,token_type:b}=e;if(!l||!f||!c||!b)throw new At("No session defined in URL");const E=Math.round(Date.now()/1e3),O=parseInt(f);let L=E+O;g&&(L=parseInt(g));const A=L-E;A*1e3<=at&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${O}s`);const U=L-O;E-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,L,E):E-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,L,E);const{data:u,error:p}=await this._getUser(l);if(p)throw p;const y={provider_token:i,provider_refresh_token:a,access_token:l,expires_in:O,expires_at:L,refresh_token:c,token_type:b,user:u.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(i){if(Y(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ge(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:a,error:l}=t;if(l)return{error:l};const c=(i=a.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(Xs(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=ar(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await nt(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(Y(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:a}=await this._useSession(async l=>{var c,f,g,b,E;const{data:O,error:L}=l;if(L)throw L;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",A,{headers:this.headers,jwt:(E=(b=O.session)===null||b===void 0?void 0:b.access_token)!==null&&E!==void 0?E:void 0})});if(a)throw a;return Me()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Y(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,a;const{data:l,error:c}=t;if(c)throw c;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Y(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await cr(async a=>(a>0&&await ur(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Re})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Xt(l)&&Date.now()+c-i<at})}catch(i){if(this._debug(t,"error",i),Y(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),Me()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Ge(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Ge(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await lt(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Yt()}else if(a&&!a.user&&!a.user){const c=await Ge(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await Ue(this.storage,this.storageKey+"-user"),await lt(this.storage,this.storageKey,a)):a.user=Yt()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Qt;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Qt}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Xt(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new zt;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new ze;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={session:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),Y(l)){const c={session:null,error:l};return Xt(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await lt(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=Pi(a);await lt(this.storage,this.storageKey,l)}else{const a=Pi(t);await lt(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ue(this.storage,this.storageKey),await Ue(this.storage,this.storageKey+"-code-verifier"),await Ue(this.storage,this.storageKey+"-user"),this.userStorage&&await Ue(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),at);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/at);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${at}ms, refresh threshold is ${ui} ticks`),a<=ui&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof kn)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const a=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,c]=await nt(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);a.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;return l?{data:null,error:l}:await ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Y(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,a;const{data:l,error:c}=t;if(c)return{data:null,error:c};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:b}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return b?{data:null,error:b}:(e.factorType==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(t){if(Y(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;if(l)return{data:null,error:l};const{data:c,error:f}=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:f})})}catch(t){if(Y(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;return l?{data:null,error:l}:await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Y(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=(e==null?void 0:e.factors)||[],a=i.filter(c=>c.factor_type==="totp"&&c.status==="verified"),l=i.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:i,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Gt(a.access_token);let f=null;c.aal&&(f=c.aal);let g=f;((i=(t=a.user.factors)===null||t===void 0?void 0:t.filter(O=>O.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const E=c.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:E},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(f=>f.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+Js>a)return i;const{data:l,error:c}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,i=l.keys.find(f=>f.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:A,error:U}=await this.getSession();if(U||!A.session)return{data:null,error:U};i=A.session.access_token}const{header:a,payload:l,signature:c,raw:{header:f,payload:g}}=Gt(i);t!=null&&t.allowExpired||yr(l.exp);const b=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!b){const{error:A}=await this.getUser(i);if(A)throw A;return{data:{claims:l,header:a,signature:c},error:null}}const E=_r(a.alg),O=await crypto.subtle.importKey("jwk",b,E,!0,["verify"]);if(!await crypto.subtle.verify(E,O,c,sr(`${f}.${g}`)))throw new fi("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}}}kt.nextInstanceID=0;const Dr=kt;class Pr extends Dr{constructor(e){super(e)}}var Rr=function(r,e,t,i){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(E){try{b(i.next(E))}catch(O){c(O)}}function g(E){try{b(i.throw(E))}catch(O){c(O)}}function b(E){E.done?l(E.value):a(E.value).then(f,g)}b((i=i.apply(r,e||[])).next())})};class jr{constructor(e,t,i){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const f=Us(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const g=`sb-${f.hostname.split(".")[0]}-auth-token`,b={db:Is,realtime:Ds,auth:Object.assign(Object.assign({},Bs),{storageKey:g}),global:As},E=qs(i??{},b);this.storageKey=(a=E.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=E.global.headers)!==null&&l!==void 0?l:{},E.accessToken?(this.accessToken=E.accessToken,this.auth=new Proxy({},{get:(O,L)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(L)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=E.auth)!==null&&c!==void 0?c:{},this.headers,E.global.fetch),this.fetch=Hs(t,this._getAccessToken.bind(this),E.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},E.realtime)),this.rest=new Zn(new URL("rest/v1",f).href,{headers:this.headers,schema:E.db.schema,fetch:this.fetch}),this.storage=new Ms(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),E.accessToken||this._listenForAuthEvents()}get functions(){return new $n(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Rr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:a,userStorage:l,storageKey:c,flowType:f,lock:g,debug:b},E,O){const L={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pr({url:this.authUrl.href,headers:Object.assign(Object.assign({},L),E),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:a,userStorage:l,flowType:f,lock:g,debug:b,fetch:O,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new gs(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Hr=(r,e,t)=>new jr(r,e,t);function Wr(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Wr()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nr="https://wxlhidzlwsfcuqzlixzq.supabase.co",qr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4bGhpZHpsd3NmY3VxemxpeHpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4NzY5ODQsImV4cCI6MjA3MzQ1Mjk4NH0.x5zPd5H6tJB1lMjfVQMVo-LswNOOSJuyqXGmSks-Uc4",He=Hr(Nr,qr,{auth:{persistSession:!0,autoRefreshToken:!0}}),Ur=new Set(["Code","Title","Amount","Zone","Type","Supplier","Opened","sheet","Description","Notes","Comment"]);function En(r){const e={sheet:r.sheet||r.Sheet||"raw"},t={};for(const[i,a]of Object.entries(r||{}))Ur.has(i)?e[i]=a:i!=="_isNew"&&(t[i]=a);return Object.keys(t).length&&(e.extra=t),e}function Fr(r){const{extra:e,...t}=r||{};return{...e||{},...t}}async function zr(r="raw"){const{data:e,error:t}=await He.from("items").select("*").eq("sheet",r).order("Title",{ascending:!0});if(t)throw t;return(e||[]).map(Fr)}async function Vr(r,e){const t=En(e),{data:i,error:a}=await He.from("items").update(t).eq("Code",r).select("Code");if(a)throw a;if(!i||i.length===0)throw new Error("No rows updated. Check permissions (RLS) or Code match.")}async function Kr(r){const{data:e,error:t}=await He.from("items").delete().eq("Code",r).select("Code");if(t)throw t;if(!e||e.length===0)throw new Error("No rows deleted. Check permissions (RLS) or Code match.")}async function Jr(r){const e=En(r),{data:t,error:i}=await He.from("items").insert(e).select("Code");if(i)throw i;if(!t||t.length===0)throw new Error("Insert blocked by RLS. Sign in as editor/admin.")}const Ee={user:null,role:"viewer"};async function Qr(r){if(!r)return"viewer";const{data:e,error:t}=await He.from("profiles").select("role").eq("id",r).maybeSingle();return t?"viewer":(e==null?void 0:e.role)||"viewer"}async function Ni(){const{data:{user:r}}=await He.auth.getUser();return Ee.user=r||null,Ee.role=await Qr(r==null?void 0:r.id),Ee}function Xr(r){Ni().then(()=>r==null?void 0:r(Ee)),He.auth.onAuthStateChange(async()=>{await Ni(),r==null||r(Ee)})}async function Gr(r){const{error:e}=await He.auth.signInWithOtp({email:r});if(e)throw e}async function Yr(){const{error:r}=await He.auth.signOut();if(r)throw r}const Zr="inventory-cache";let Se={items:[],filter:{Zone:[],Type:[]},selected:null};function jt(r){Se.items=r,localStorage.setItem(Zr,JSON.stringify(r))}function bt(){return Se.items}function eo(r){Se.selected=Se.items.find(e=>e.Code===r)||null}function qi(r,e){const t=Se.filter[r]||[];t.includes(e)?Se.filter[r]=t.filter(i=>i!==e):Se.filter[r]=[...t,e]}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var to=Object.prototype.toString,pt=Array.isArray||function(e){return to.call(e)==="[object Array]"};function wi(r){return typeof r=="function"}function io(r){return pt(r)?"array":typeof r}function ei(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Ui(r,e){return r!=null&&typeof r=="object"&&e in r}function no(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var so=RegExp.prototype.test;function ro(r,e){return so.call(r,e)}var oo=/\S/;function ao(r){return!ro(oo,r)}var lo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function ho(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return lo[t]})}var uo=/\s*/,co=/\s+/,Fi=/\s*=/,fo=/\s*\}/,po=/#|\^|\/|>|\{|&|=|!/;function vo(r,e){if(!r)return[];var t=!1,i=[],a=[],l=[],c=!1,f=!1,g="",b=0;function E(){if(c&&!f)for(;l.length;)delete a[l.pop()];else l=[];c=!1,f=!1}var O,L,A;function U(m){if(typeof m=="string"&&(m=m.split(co,2)),!pt(m)||m.length!==2)throw new Error("Invalid tags: "+m);O=new RegExp(ei(m[0])+"\\s*"),L=new RegExp("\\s*"+ei(m[1])),A=new RegExp("\\s*"+ei("}"+m[1]))}U(e||Ce.tags);for(var u=new xt(r),p,y,w,d,n,s;!u.eos();){if(p=u.pos,w=u.scanUntil(O),w)for(var o=0,h=w.length;o<h;++o)d=w.charAt(o),ao(d)?(l.push(a.length),g+=d):(f=!0,t=!0,g+=" "),a.push(["text",d,p,p+1]),p+=1,d===`
`&&(E(),g="",b=0,t=!1);if(!u.scan(O))break;if(c=!0,y=u.scan(po)||"name",u.scan(uo),y==="="?(w=u.scanUntil(Fi),u.scan(Fi),u.scanUntil(L)):y==="{"?(w=u.scanUntil(A),u.scan(fo),u.scanUntil(L),y="&"):w=u.scanUntil(L),!u.scan(L))throw new Error("Unclosed tag at "+u.pos);if(y==">"?n=[y,w,p,u.pos,g,b,t]:n=[y,w,p,u.pos],b++,a.push(n),y==="#"||y==="^")i.push(n);else if(y==="/"){if(s=i.pop(),!s)throw new Error('Unopened section "'+w+'" at '+p);if(s[1]!==w)throw new Error('Unclosed section "'+s[1]+'" at '+p)}else y==="name"||y==="{"||y==="&"?f=!0:y==="="&&U(w)}if(E(),s=i.pop(),s)throw new Error('Unclosed section "'+s[1]+'" at '+u.pos);return mo(go(a))}function go(r){for(var e=[],t,i,a=0,l=r.length;a<l;++a)t=r[a],t&&(t[0]==="text"&&i&&i[0]==="text"?(i[1]+=t[1],i[3]=t[3]):(e.push(t),i=t));return e}function mo(r){for(var e=[],t=e,i=[],a,l,c=0,f=r.length;c<f;++c)switch(a=r[c],a[0]){case"#":case"^":t.push(a),i.push(a),t=a[4]=[];break;case"/":l=i.pop(),l[5]=a[2],t=i.length>0?i[i.length-1][4]:e;break;default:t.push(a)}return e}function xt(r){this.string=r,this.tail=r,this.pos=0}xt.prototype.eos=function(){return this.tail===""};xt.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i};xt.prototype.scanUntil=function(e){var t=this.tail.search(e),i;switch(t){case-1:i=this.tail,this.tail="";break;case 0:i="";break;default:i=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=i.length,i};function ct(r,e){this.view=r,this.cache={".":this.view},this.parent=e}ct.prototype.push=function(e){return new ct(e,this)};ct.prototype.lookup=function(e){var t=this.cache,i;if(t.hasOwnProperty(e))i=t[e];else{for(var a=this,l,c,f,g=!1;a;){if(e.indexOf(".")>0)for(l=a.view,c=e.split("."),f=0;l!=null&&f<c.length;)f===c.length-1&&(g=Ui(l,c[f])||no(l,c[f])),l=l[c[f++]];else l=a.view[e],g=Ui(a.view,e);if(g){i=l;break}a=a.parent}t[e]=i}return wi(i)&&(i=i.call(this.view)),i};function _e(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}_e.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};_e.prototype.parse=function(e,t){var i=this.templateCache,a=e+":"+(t||Ce.tags).join(":"),l=typeof i<"u",c=l?i.get(a):void 0;return c==null&&(c=vo(e,t),l&&i.set(a,c)),c};_e.prototype.render=function(e,t,i,a){var l=this.getConfigTags(a),c=this.parse(e,l),f=t instanceof ct?t:new ct(t,void 0);return this.renderTokens(c,f,i,e,a)};_e.prototype.renderTokens=function(e,t,i,a,l){for(var c="",f,g,b,E=0,O=e.length;E<O;++E)b=void 0,f=e[E],g=f[0],g==="#"?b=this.renderSection(f,t,i,a,l):g==="^"?b=this.renderInverted(f,t,i,a,l):g===">"?b=this.renderPartial(f,t,i,l):g==="&"?b=this.unescapedValue(f,t):g==="name"?b=this.escapedValue(f,t,l):g==="text"&&(b=this.rawValue(f)),b!==void 0&&(c+=b);return c};_e.prototype.renderSection=function(e,t,i,a,l){var c=this,f="",g=t.lookup(e[1]);function b(L){return c.render(L,t,i,l)}if(g){if(pt(g))for(var E=0,O=g.length;E<O;++E)f+=this.renderTokens(e[4],t.push(g[E]),i,a,l);else if(typeof g=="object"||typeof g=="string"||typeof g=="number")f+=this.renderTokens(e[4],t.push(g),i,a,l);else if(wi(g)){if(typeof a!="string")throw new Error("Cannot use higher-order sections without the original template");g=g.call(t.view,a.slice(e[3],e[5]),b),g!=null&&(f+=g)}else f+=this.renderTokens(e[4],t,i,a,l);return f}};_e.prototype.renderInverted=function(e,t,i,a,l){var c=t.lookup(e[1]);if(!c||pt(c)&&c.length===0)return this.renderTokens(e[4],t,i,a,l)};_e.prototype.indentPartial=function(e,t,i){for(var a=t.replace(/[^ \t]/g,""),l=e.split(`
`),c=0;c<l.length;c++)l[c].length&&(c>0||!i)&&(l[c]=a+l[c]);return l.join(`
`)};_e.prototype.renderPartial=function(e,t,i,a){if(i){var l=this.getConfigTags(a),c=wi(i)?i(e[1]):i[e[1]];if(c!=null){var f=e[6],g=e[5],b=e[4],E=c;g==0&&b&&(E=this.indentPartial(c,b,f));var O=this.parse(E,l);return this.renderTokens(O,t,i,E,a)}}};_e.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(i!=null)return i};_e.prototype.escapedValue=function(e,t,i){var a=this.getConfigEscape(i)||Ce.escape,l=t.lookup(e[1]);if(l!=null)return typeof l=="number"&&a===Ce.escape?String(l):a(l)};_e.prototype.rawValue=function(e){return e[1]};_e.prototype.getConfigTags=function(e){return pt(e)?e:e&&typeof e=="object"?e.tags:void 0};_e.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!pt(e))return e.escape};var Ce={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){Et.templateCache=r},get templateCache(){return Et.templateCache}},Et=new _e;Ce.clearCache=function(){return Et.clearCache()};Ce.parse=function(e,t){return Et.parse(e,t)};Ce.render=function(e,t,i,a){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+io(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Et.render(e,t,i,a)};Ce.escape=ho;Ce.Scanner=xt;Ce.Context=ct;Ce.Writer=_e;const yo=`<div class="card">
  <div class="card-content">
    <span class="card-title">{{item.Title}}</span>

    {{#longTexts.length}}
    <div class="section">
      {{#longTexts}}
      <p>
        <span class="grey-text text-darken-1">{{label}}:</span>
        <span class="editable" data-field="{{key}}">{{value}}</span>
      </p>
      {{/longTexts}}
      <div class="divider"></div>
    </div>
    {{/longTexts.length}}

    <div class="section">
      <table class="striped highlight">
        <thead>
          <tr><th></th><th></th></tr>
        </thead>
        <tbody>
          {{#mainFields}}
          <tr>
            <td class="grey-text text-darken-1">{{label}}</td>
            <td><span class="editable" data-field="{{key}}">{{value}}</span></td>
          </tr>
          {{/mainFields}}
          {{#otherFields}}
          <tr>
            <td class="grey-text text-darken-1">{{label}}</td>
            <td><span class="editable" data-field="{{key}}">{{value}}</span></td>
          </tr>
          {{/otherFields}}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card-action">
    <a id="saveBtn" class="btn waves-effect waves-light"><i class="material-icons left"></i>save</a>
    <a id="deleteBtn" class="btn-flat red-text text-darken-1"><i class="material-icons left"></i>delete</a>
  </div>
</div>
`,Be=Object.create(null),_o=new Set(["Description","Notes","Comment","Note","Remarks"]);function ti(r){return{Code:"Code",Title:"Title",Amount:"Amount",Opened:"Opened",Supplier:"Supplier",Zone:"Zone",Type:"Type",Description:"Description",Notes:"Notes",Comment:"Comment"}[r]||r}function zi(r){const e=r==null?void 0:r.Code,t=e&&Be[e]?Be[e]:{},i={...r,...t},a=["Description","Notes","Comment"],l=["Title","Amount","Zone","Type","Supplier","Opened","Code"],c=a.filter(b=>i[b]).map(b=>({key:b,label:ti(b),value:String(i[b]??"")})),f=l.filter(b=>b!=="Title"&&i[b]!==void 0).map(b=>({key:b,label:ti(b),value:String(i[b]??"")})),g=Object.keys(i).filter(b=>!a.includes(b)&&!l.includes(b)).sort().map(b=>({key:b,label:ti(b),value:String(i[b]??"")}));return{item:i,longTexts:c,mainFields:f,otherFields:g}}function Vi(r,e,t,i,a){const l=t.Code,c=r.querySelector(`.editable[data-field="${CSS.escape(i)}"]`);if(!c)return;const f=document.createElement("span");f.className="inline-edit",f.setAttribute("data-field",i);let g;if(_o.has(i)){const L=document.createElement("textarea");L.className="inline-input materialize-textarea",L.value=a??"";const A=()=>{L.style.height="auto",L.style.height=L.scrollHeight+"px";try{window.M&&typeof window.M.textareaAutoResize=="function"&&window.M.textareaAutoResize(L)}catch{}};A(),L.addEventListener("input",A),g=L}else{const L=document.createElement("input");L.type=i.toLowerCase().includes("amount")?"number":"text",L.value=a??"",L.className="inline-input",g=L}const b=document.createElement("button");b.textContent="",b.className="inline-ok";const E=document.createElement("button");E.textContent="",E.className="inline-cancel",f.append(g,b,E),c.replaceWith(f),g.focus();const O=L=>{L&&(Be[l]||(Be[l]={}),Be[l][i]=g.value)};b.addEventListener("click",()=>O(!0)),E.addEventListener("click",()=>O(!1)),b.addEventListener("click",()=>ht(e,r,t)),E.addEventListener("click",()=>ht(e,r,t)),g.addEventListener("keydown",L=>{(g.tagName==="INPUT"&&L.key==="Enter"||g.tagName==="TEXTAREA"&&L.key==="Enter"&&(L.ctrlKey||L.metaKey))&&(L.preventDefault(),O(!0),ht(e,r,t)),L.key==="Escape"&&(L.preventDefault(),O(!1),ht(e,r,t))})}function ht(r,e,t){if(!t){e.innerHTML="";return}const i=zi(t);e.innerHTML=Ce.render(r,i),e.querySelectorAll(".editable[data-field]").forEach(c=>{c.addEventListener("click",()=>{const f=c.getAttribute("data-field"),g=c.textContent||"";Vi(e,r,t,f,g)})}),e.querySelectorAll("table td").forEach(c=>{const f=c.querySelector(".editable[data-field]");f&&c.addEventListener("click",()=>{if(c.querySelector(".inline-edit"))return;const g=f.getAttribute("data-field"),b=f.textContent||"";Vi(e,r,t,g,b)})});const a=e.querySelector("#saveBtn");a&&(Ee.role==="admin"||Ee.role==="editor"?a.addEventListener("click",async()=>{var E,O,L,A,U;const f=t.Code;e.querySelectorAll(".inline-edit").forEach(u=>{const p=u.getAttribute("data-field"),y=u.querySelector("input,textarea");p&&y&&(Be[f]||(Be[f]={}),Be[f][p]=y.value)});const g=Be[f]||{};if(Object.keys(g).length===0){(E=window.M)!=null&&E.toast&&window.M.toast({html:" ",displayLength:1500});return}let b;try{a.classList.add("disabled"),b=document.createElement("div"),b.className="preloader-wrapper small active",b.innerHTML='<div class="spinner-layer spinner-blue-only"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div>',(O=a.parentNode)==null||O.insertBefore(b,a.nextSibling);const u={...t,...g};delete u._isNew,t._isNew||String(f).startsWith("tmp-")?await Jr(u):await Vr(f,u),jt(bt().map(w=>w.Code===f?u:w)),delete Be[f];try{const w=document.querySelector(`tr[data-code="${CSS.escape(f)}"]`);if(w){const n=w.querySelectorAll("td");n[0]&&(n[0].textContent=String(u.Title??"")),n[1]&&(n[1].textContent=String(u.Amount??"")),n[2]&&(n[2].textContent=String(u.Opened??""))}Ct();const d=document.getElementById("quick-search");d&&d.dispatchEvent(new Event("input"))}catch{}const p=bt().find(w=>w.Code===f)||u,y=zi(p);e.innerHTML=Ce.render(r,y),ht(r,e,p),(L=window.M)!=null&&L.toast&&window.M.toast({html:"",displayLength:1500})}catch(u){console.error(u);const p=(u==null?void 0:u.message)||" ";(A=window.M)!=null&&A.toast&&window.M.toast({html:p,displayLength:3e3})}finally{(U=b==null?void 0:b.parentNode)==null||U.removeChild(b),a.classList.remove("disabled")}}):(a.classList.add("disabled"),a.addEventListener("click",f=>{var g;f.preventDefault(),(g=window.M)!=null&&g.toast&&window.M.toast({html:"   ",displayLength:2e3})},{once:!0})));const l=e.querySelector("#deleteBtn");l&&(Ee.role==="admin"?l.addEventListener("click",async()=>{await Kr(t.Code),jt(bt().filter(f=>f.Code!==t.Code)),e.innerHTML=""}):(l.classList.add("disabled"),l.addEventListener("click",f=>{var g;f.preventDefault(),(g=window.M)!=null&&g.toast&&window.M.toast({html:"   ",displayLength:2e3})},{once:!0})))}function Ki(r,e,t){e.innerHTML=Ce.render(r,{items:bt()});const i=e.querySelectorAll("tr[data-code]");i.forEach(a=>{a.addEventListener("click",()=>{i.forEach(l=>l.classList.remove("active","selected")),a.classList.add("active","selected"),eo(a.dataset.code),ht(yo,t,Se.selected)})})}function Ct(){document.querySelectorAll("tr[data-code]").forEach(e=>{const t=e.dataset.code,i=Se.items.find(l=>l.Code===t);let a=!0;for(const l in Se.filter){const c=Se.filter[l];if(c.length>0&&!c.includes(i[l])){a=!1;break}}a?e.classList.remove("hide"):e.classList.add("hide")})}function wo(r){const e=[...new Set(r.map(i=>i.Zone).filter(Boolean))].sort().map(i=>({kind:"Zone",value:i,label:`${i}`})),t=[...new Set(r.map(i=>i.Type).filter(Boolean))].sort().map(i=>({kind:"Type",value:i,label:`${i}`}));return{zones:e,types:t}}function pi(r){return r.map(e=>{var i;const t=(i=Se.filter[e.kind])==null?void 0:i.includes(e.value);return`
      <a href="#"
         class="${e.kind} chip ${t?"active selected":""}"
         data-kind="${e.kind}" data-value="${e.value}">
        ${e.label}
      </a>
    `}).join("")}function Ji(r,e){const t=pi(e);return`
    <div class="tag-group">
      <div class="tag-title">${r}</div>
      <div class="tag-chips">${t}</div>
    </div>
  `}function Ht(r){const{zones:e,types:t}=wo(Se.items);if(r&&r.zoneEl&&r.typeEl){r.zoneEl.innerHTML=pi(e),r.typeEl.innerHTML=pi(t);const i=a=>{a.querySelectorAll(".chip").forEach(l=>{l.addEventListener("click",c=>{c.preventDefault();const f=l.dataset.kind,g=l.dataset.value;qi(f,g),Ht(r),Ct()})})};i(r.zoneEl),i(r.typeEl)}else r instanceof Element&&(r.innerHTML=`
      ${Ji("Zone",e)}
      ${Ji("Type",t)}
      <div class="section">
        <div class="input-field">
          <input id="quick-search" type="text" class="validate" />
          <label for="quick-search">Search rows</label>
        </div>
      </div>
    `,r.querySelectorAll(".chip").forEach(i=>{i.addEventListener("click",a=>{a.preventDefault();const l=i.dataset.kind,c=i.dataset.value;qi(l,c),Ht(r),Ct()})}))}const Qi=`<table class="highlight striped">
  <thead>
    <tr>
      <th>Title</th>
      <th>Amount</th>
      <th>Opened</th>
    </tr>
  </thead>
  <tbody>
    {{#items}}
      <tr data-code="{{Code}}">
        <td>{{Title}}</td>
        <td>{{Amount}}</td>
        <td>{{Opened}}</td>
      </tr>
    {{/items}}
  </tbody>
</table>
`,gt=document.getElementById("table-container"),It=document.getElementById("card-container"),Fe=document.getElementById("tags-container"),Xi=document.getElementById("sheet-title"),Bt=document.getElementById("sheet-links"),Gi={raw:"Raw materials",office:"Office",our:"Our products"};function bi(){return new URLSearchParams(window.location.search).get("sheet")||"raw"}function bo(){const r=document.querySelectorAll(".collapsible");window.M&&r.length&&window.M.Collapsible.init(r)}function ko(){const r=document.querySelectorAll(".modal");window.M&&r.length&&window.M.Modal.init(r)}function ii(r="",e=""){const t=document.getElementById("add-extra-list");if(!t)return;const i=document.createElement("div");i.className="col s12",i.innerHTML=`
    <div class="row" style="margin-bottom:0;">
      <div class="input-field col s5">
        <input type="text" class="extra-name" value="${r}" />
        <label class="active">Field</label>
      </div>
      <div class="input-field col s7">
        <input type="text" class="extra-value" value="${e}" />
        <label class="active">Value</label>
      </div>
    </div>
  `,t.appendChild(i)}function Eo(r){let e={};const t=(r||"").trim();if(!t)return e;try{const i=JSON.parse(t);if(i&&typeof i=="object")return i}catch{}return t.split(/\n+/).forEach(i=>{const a=i.match(/^\s*([^:]+)\s*:\s*(.*)$/);if(a){const l=a[1].trim(),c=a[2].trim();l&&(e[l]=c)}}),e}function Co(){return"tmp-"+Date.now().toString(36)+"-"+Math.random().toString(36).slice(2,6)}function Dt(){const r=document.getElementById("quick-search"),e=((r==null?void 0:r.value)||"").toLowerCase().trim();document.querySelectorAll("tr[data-code]").forEach(i=>{var l;const a=((l=i.textContent)==null?void 0:l.toLowerCase())||"";!e||a.includes(e)?i.classList.remove("search-hide"):i.classList.add("search-hide")})}function To(){const r=document.getElementById("quick-search");r&&r.addEventListener("input",Dt)}function So(){var r;(r=document.getElementById("preloader-wrapper"))==null||r.classList.remove("hide")}function Yi(){var r;(r=document.getElementById("preloader-wrapper"))==null||r.classList.add("hide")}async function Wt(r){var u,p;So(),Xi&&(Xi.innerHTML=`<a href="?sheet=${r}">${Gi[r]||r}</a>`),Bt&&(Bt.innerHTML=Object.entries(Gi).filter(([y])=>y!==r).map(([y,w])=>`<a href="?sheet=${y}" data-sheet="${y}">${w}</a>`).join(" "));try{if(!Ee.user){gt.innerHTML='<div class="card-panel yellow lighten-4">Sign in with your bpacks.eco email to view data.</div>',It.innerHTML="",Fe&&(Fe.innerHTML=""),Yi();return}const y=await zr(r);if(jt(y),Ki(Qi,gt,It),Fe){const w=((u=document.getElementById("quick-search"))==null?void 0:u.value)||"";Ht(Fe),To();const d=document.getElementById("quick-search");d&&(d.value=w,window.M&&window.M.updateTextFields&&window.M.updateTextFields())}Ct(),Dt(),bo(),ko()}catch(y){console.error("Load error:",y);const w=(y==null?void 0:y.message)||"  ";(p=window.M)!=null&&p.toast&&window.M.toast({html:w,displayLength:3e3})}finally{Yi()}Bt&&Bt.querySelectorAll("a").forEach(y=>{y.addEventListener("click",w=>{w.preventDefault();const d=y.dataset.sheet;history.pushState({sheet:d},"",`?sheet=${d}`),Wt(d)})});const e=document.getElementById("quick-search");e&&(e.addEventListener("input",Dt),["click","mousedown","keydown"].forEach(y=>{e.addEventListener(y,w=>w.stopPropagation())}));const t=document.getElementById("auth-signin"),i=document.getElementById("auth-signout"),a=document.getElementById("auth-email"),l=document.getElementById("auth-signed-in"),c=document.getElementById("auth-signed-out"),f=document.getElementById("auth-user-email"),g=document.getElementById("auth-user-role");function b(){var d;const y=!!Ee.user;l&&c&&(l.style.display=y?"":"none",c.style.display=y?"none":""),f&&(f.textContent=((d=Ee.user)==null?void 0:d.email)||""),g&&(g.textContent=Ee.role||"viewer");const w=document.getElementById("add-item-btn");w&&(w.style.display=Ee.role==="admin"||Ee.role==="editor"?"":"none")}t&&a&&!t.__bound&&(t.__bound=!0,t.addEventListener("click",async()=>{var w,d;let y=(a.value||"").trim();if(y&&(y.includes("@")||(y=`${y}@bpacks.eco`),!!y))try{await Gr(y),(w=window.M)!=null&&w.toast&&window.M.toast({html:"Magic link sent",displayLength:2e3})}catch(n){console.error(n),(d=window.M)!=null&&d.toast&&window.M.toast({html:"Sign-in error",displayLength:2e3})}})),i&&!i.__bound&&(i.__bound=!0,i.addEventListener("click",async()=>{try{await Yr()}finally{b()}})),Xr(y=>{b(),y.user?Wt(bi()):(gt.innerHTML='<div class="card-panel yellow lighten-4">Sign in with your bpacks.eco email to view data.</div>',It.innerHTML="",Fe&&(Fe.innerHTML=""))});const E=document.getElementById("add-item-btn"),O=document.getElementById("add-item-modal"),L=document.getElementById("add-item-form"),A=document.getElementById("add-extra-add"),U=document.getElementById("add-tds-parse");if(!window.__addUiBound&&E&&O&&window.M){window.__addUiBound=!0;const y=window.M.Modal.getInstance(O)||window.M.Modal.init(O);E.addEventListener("click",()=>{L&&typeof L.reset=="function"&&L.reset();const w=document.getElementById("add-extra-list");w&&(w.innerHTML=""),ii(),y.open()})}A&&A.addEventListener("click",()=>ii()),U&&!U.__bound&&(U.__bound=!0,U.addEventListener("click",()=>{const y=document.getElementById("add-tds"),w=y&&"value"in y?y.value:"",d=Eo(w);Object.entries(d).forEach(([n,s])=>ii(String(n),String(s))),y&&"value"in y&&(y.value=""),window.M&&window.M.updateTextFields&&window.M.updateTextFields()})),L&&!L.__bound&&(L.__bound=!0,L.addEventListener("submit",y=>{y.preventDefault();const w=oe=>{const q=document.getElementById(oe);return q&&"value"in q?q.value:""},d=oe=>(oe||"").toString().trim(),n=d(w("add-title")),s=w("add-amount"),o=d(w("add-zone")),h=d(w("add-type")),m=d(w("add-supplier")),C=d(w("add-opened")),S=document.getElementById("add-extra-list"),B={};if(S){const oe=S.querySelectorAll(".extra-name"),q=S.querySelectorAll(".extra-value");oe.forEach((G,te)=>{const re="value"in G?G.value.trim():"",Z=q[te]&&"value"in q[te]?q[te].value:"";re&&(B[re]=Z)})}const R=Co(),H={Code:R,Title:n,Amount:s,Zone:o,Type:h,Supplier:m,Opened:C,sheet:r,_isNew:!0,...B},W=bt();jt([...W||[],H]),Ki(Qi,gt,It),Fe&&Ht(Fe),Ct(),Dt();const F=gt.querySelector(`tr[data-code="${R}"]`);F&&"click"in F&&F.click()}))}window.addEventListener("popstate",r=>{var t;const e=((t=r.state)==null?void 0:t.sheet)||bi();Wt(e)});Wt(bi());
