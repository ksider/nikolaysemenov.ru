(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();const ji="modulepreload",Hi=function(o){return"/inv/"+o},In={},et=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=Promise.allSettled(t.map(v=>{if(v=Hi(v),v in In)return;In[v]=!0;const m=v.endsWith(".css"),w=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${w}`))return;const T=document.createElement("link");if(T.rel=m?"stylesheet":ji,m||(T.as="script"),T.crossOrigin="",T.href=v,f&&T.setAttribute("nonce",f),document.head.appendChild(T),m)return new Promise((L,I)=>{T.addEventListener("load",L),T.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return r.then(h=>{for(const f of h||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})};var we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ni(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(n){var r=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return o[n]}})}),t}var $n={exports:{}};/*!
 * Materialize v1.0.0-rc.2 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */(function(o,e){var t=function u(p,b,k){p===null&&(p=Function.prototype);var d=Object.getOwnPropertyDescriptor(p,b);if(d===void 0){var s=Object.getPrototypeOf(p);return s===null?void 0:u(s,b,k)}if("value"in d)return d.value;var i=d.get;return i!==void 0?i.call(k):void 0},n=function(){function u(p,b){for(var k=0;k<b.length;k++){var d=b[k];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,d.key,d)}}return function(p,b,k){return b&&u(p.prototype,b),k&&u(p,k),p}}();function r(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||typeof p!="object"&&typeof p!="function"?u:p}function l(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}function h(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}window.cash=function(){var u,p=document,b=window,k=Array.prototype,d=k.slice,s=k.filter,i=k.push,a=function(){},c=function(g){return typeof g==typeof a&&g.call},y=function(g){return typeof g=="string"},C=/^#[\w-]*$/,O=/^\.[\w-]*$/,A=/<.+>/,R=/^\w+$/;function H(g,_){_=_||p;var S=O.test(g)?_.getElementsByClassName(g.slice(1)):R.test(g)?_.getElementsByTagName(g):_.querySelectorAll(g);return S}function N(g){if(!u){var _=(u=p.implementation.createHTMLDocument(null)).createElement("base");_.href=p.location.href,u.head.appendChild(_)}return u.body.innerHTML=g,u.body.childNodes}function F(g){p.readyState!=="loading"?g():p.addEventListener("DOMContentLoaded",g)}function ce(g,_){if(!g)return this;if(g.cash&&g!==b)return g;var S,D=g,Q=0;if(y(g))D=C.test(g)?p.getElementById(g.slice(1)):A.test(g)?N(g):H(g,_);else if(c(g))return F(g),this;if(!D)return this;if(D.nodeType||D===b)this[0]=D,this.length=1;else for(S=this.length=D.length;Q<S;Q++)this[Q]=D[Q];return this}function z(g,_){return new ce(g,_)}var Y=z.fn=z.prototype=ce.prototype={cash:!0,length:0,push:i,splice:k.splice,map:k.map,init:ce};function se(g,_){for(var S=g.length,D=0;D<S&&_.call(g[D],g[D],D,g)!==!1;D++);}function oe(g,_){var S=g&&(g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector);return!!S&&S.call(g,_)}function Z(g){return y(g)?oe:g.cash?function(_){return g.is(_)}:function(_,S){return _===S}}function be(g){return z(d.call(g).filter(function(_,S,D){return D.indexOf(_)===S}))}Object.defineProperty(Y,"constructor",{value:z}),z.parseHTML=N,z.noop=a,z.isFunction=c,z.isString=y,z.extend=Y.extend=function(g){g=g||{};var _=d.call(arguments),S=_.length,D=1;for(_.length===1&&(g=this,D=0);D<S;D++)if(_[D])for(var Q in _[D])_[D].hasOwnProperty(Q)&&(g[Q]=_[D][Q]);return g},z.extend({merge:function(g,_){for(var S=+_.length,D=g.length,Q=0;Q<S;D++,Q++)g[D]=_[Q];return g.length=D,g},each:se,matches:oe,unique:be,isArray:Array.isArray,isNumeric:function(g){return!isNaN(parseFloat(g))&&isFinite(g)}});var te=z.uid="_cash"+Date.now();function Ce(g){return g[te]=g[te]||{}}function Ne(g,_,S){return Ce(g)[_]=S}function $e(g,_){var S=Ce(g);return S[_]===void 0&&(S[_]=g.dataset?g.dataset[_]:z(g).attr("data-"+_)),S[_]}Y.extend({data:function(g,_){if(y(g))return _===void 0?$e(this[0],g):this.each(function(D){return Ne(D,g,_)});for(var S in g)this.data(S,g[S]);return this},removeData:function(g){return this.each(function(_){return D=g,void((Q=Ce(S=_))?delete Q[D]:S.dataset?delete S.dataset[D]:z(S).removeAttr("data-"+name));var S,D,Q})}});var We=/\S+/g;function J(g){return y(g)&&g.match(We)}function Oe(g,_){return g.classList?g.classList.contains(_):new RegExp("(^| )"+_+"( |$)","gi").test(g.className)}function xe(g,_,S){g.classList?g.classList.add(_):S.indexOf(" "+_+" ")&&(g.className+=" "+_)}function Ae(g,_){g.classList?g.classList.remove(_):g.className=g.className.replace(_,"")}Y.extend({addClass:function(g){var _=J(g);return _?this.each(function(S){var D=" "+S.className+" ";se(_,function(Q){xe(S,Q,D)})}):this},attr:function(g,_){if(g){if(y(g))return _===void 0?this[0]?this[0].getAttribute?this[0].getAttribute(g):this[0][g]:void 0:this.each(function(D){D.setAttribute?D.setAttribute(g,_):D[g]=_});for(var S in g)this.attr(S,g[S]);return this}},hasClass:function(g){var _=!1,S=J(g);return S&&S.length&&this.each(function(D){return!(_=Oe(D,S[0]))}),_},prop:function(g,_){if(y(g))return _===void 0?this[0][g]:this.each(function(D){D[g]=_});for(var S in g)this.prop(S,g[S]);return this},removeAttr:function(g){return this.each(function(_){_.removeAttribute?_.removeAttribute(g):delete _[g]})},removeClass:function(g){if(!arguments.length)return this.attr("class","");var _=J(g);return _?this.each(function(S){se(_,function(D){Ae(S,D)})}):this},removeProp:function(g){return this.each(function(_){delete _[g]})},toggleClass:function(g,_){if(_!==void 0)return this[_?"addClass":"removeClass"](g);var S=J(g);return S?this.each(function(D){var Q=" "+D.className+" ";se(S,function(ne){Oe(D,ne)?Ae(D,ne):xe(D,ne,Q)})}):this}}),Y.extend({add:function(g,_){return be(z.merge(this,z(g,_)))},each:function(g){return se(this,g),this},eq:function(g){return z(this.get(g))},filter:function(g){if(!g)return this;var _=c(g)?g:Z(g);return z(s.call(this,function(S){return _(S,g)}))},first:function(){return this.eq(0)},get:function(g){return g===void 0?d.call(this):g<0?this[g+this.length]:this[g]},index:function(g){var _=g?z(g)[0]:this[0],S=g?this:z(_).parent().children();return d.call(S).indexOf(_)},last:function(){return this.eq(-1)}});var ue,Me,qe,E,x,B,P=(x=/(?:^\w|[A-Z]|\b\w)/g,B=/[\s-_]+/g,function(g){return g.replace(x,function(_,S){return _[S===0?"toLowerCase":"toUpperCase"]()}).replace(B,"")}),j=(ue={},Me=document,qe=Me.createElement("div"),E=qe.style,function(g){if(g=P(g),ue[g])return ue[g];var _=g.charAt(0).toUpperCase()+g.slice(1),S=(g+" "+["webkit","moz","ms","o"].join(_+" ")+_).split(" ");return se(S,function(D){if(D in E)return ue[D]=g=ue[g]=D,!1}),ue[g]});function q(g,_){return parseInt(b.getComputedStyle(g[0],null)[_],10)||0}function V(g,_,S){var D,Q=$e(g,"_cashEvents"),ne=Q&&Q[_];ne&&(S?(g.removeEventListener(_,S),0<=(D=ne.indexOf(S))&&ne.splice(D,1)):(se(ne,function(ge){g.removeEventListener(_,ge)}),ne=[]))}function U(g,_){return"&"+encodeURIComponent(g)+"="+encodeURIComponent(_).replace(/%20/g,"+")}function X(g){var _,S,D,Q=g.type;if(!Q)return null;switch(Q.toLowerCase()){case"select-one":return 0<=(D=(S=g).selectedIndex)?S.options[D].value:null;case"select-multiple":return _=[],se(g.options,function(ne){ne.selected&&_.push(ne.value)}),_.length?_:null;case"radio":case"checkbox":return g.checked?g.value:null;default:return g.value?g.value:null}}function K(g,_,S){var D=y(_);D||!_.length?se(g,D?function(Q){return Q.insertAdjacentHTML(S?"afterbegin":"beforeend",_)}:function(Q,ne){return function(ge,he,de){if(de){var fe=ge.childNodes[0];ge.insertBefore(he,fe)}else ge.appendChild(he)}(Q,ne===0?_:_.cloneNode(!0),S)}):se(_,function(Q){return K(g,Q,S)})}z.prefixedProp=j,z.camelCase=P,Y.extend({css:function(g,_){if(y(g))return g=j(g),1<arguments.length?this.each(function(D){return D.style[g]=_}):b.getComputedStyle(this[0])[g];for(var S in g)this.css(S,g[S]);return this}}),se(["Width","Height"],function(g){var _=g.toLowerCase();Y[_]=function(){return this[0].getBoundingClientRect()[_]},Y["inner"+g]=function(){return this[0]["client"+g]},Y["outer"+g]=function(S){return this[0]["offset"+g]+(S?q(this,"margin"+(g==="Width"?"Left":"Top"))+q(this,"margin"+(g==="Width"?"Right":"Bottom")):0)}}),Y.extend({off:function(g,_){return this.each(function(S){return V(S,g,_)})},on:function(g,_,S,D){var Q;if(!y(g)){for(var ne in g)this.on(ne,_,g[ne]);return this}return c(_)&&(S=_,_=null),g==="ready"?(F(S),this):(_&&(Q=S,S=function(ge){for(var he=ge.target;!oe(he,_);){if(he===this||he===null)return he=!1;he=he.parentNode}he&&Q.call(he,ge)}),this.each(function(ge){var he,de,fe,Te,ae=S;D&&(ae=function(){S.apply(this,arguments),V(ge,g,ae)}),de=g,fe=ae,(Te=$e(he=ge,"_cashEvents")||Ne(he,"_cashEvents",{}))[de]=Te[de]||[],Te[de].push(fe),he.addEventListener(de,fe)}))},one:function(g,_,S){return this.on(g,_,S,!0)},ready:F,trigger:function(g,_){if(document.createEvent){var S=document.createEvent("HTMLEvents");return S.initEvent(g,!0,!1),S=this.extend(S,_),this.each(function(D){return D.dispatchEvent(S)})}}}),Y.extend({serialize:function(){var g="";return se(this[0].elements||this,function(_){if(!_.disabled&&_.tagName!=="FIELDSET"){var S=_.name;switch(_.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var D=X(_);D!==null&&se(D,function(ne){g+=U(S,ne)});break;default:var Q=X(_);Q!==null&&(g+=U(S,Q))}}}),g.substr(1)},val:function(g){return g===void 0?X(this[0]):this.each(function(_){return _.value=g})}}),Y.extend({after:function(g){return z(g).insertAfter(this),this},append:function(g){return K(this,g),this},appendTo:function(g){return K(z(g),this),this},before:function(g){return z(g).insertBefore(this),this},clone:function(){return z(this.map(function(g){return g.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(g){if(g===void 0)return this[0].innerHTML;var _=g.nodeType?g[0].outerHTML:g;return this.each(function(S){return S.innerHTML=_})},insertAfter:function(g){var _=this;return z(g).each(function(S,D){var Q=S.parentNode,ne=S.nextSibling;_.each(function(ge){Q.insertBefore(D===0?ge:ge.cloneNode(!0),ne)})}),this},insertBefore:function(g){var _=this;return z(g).each(function(S,D){var Q=S.parentNode;_.each(function(ne){Q.insertBefore(D===0?ne:ne.cloneNode(!0),S)})}),this},prepend:function(g){return K(this,g,!0),this},prependTo:function(g){return K(z(g),this,!0),this},remove:function(){return this.each(function(g){if(g.parentNode)return g.parentNode.removeChild(g)})},text:function(g){return g===void 0?this[0].textContent:this.each(function(_){return _.textContent=g})}});var ie=p.documentElement;return Y.extend({position:function(){var g=this[0];return{left:g.offsetLeft,top:g.offsetTop}},offset:function(){var g=this[0].getBoundingClientRect();return{top:g.top+b.pageYOffset-ie.clientTop,left:g.left+b.pageXOffset-ie.clientLeft}},offsetParent:function(){return z(this[0].offsetParent)}}),Y.extend({children:function(g){var _=[];return this.each(function(S){i.apply(_,S.children)}),_=be(_),g?_.filter(function(S){return oe(S,g)}):_},closest:function(g){return!g||this.length<1?z():this.is(g)?this.filter(g):this.parent().closest(g)},is:function(g){if(!g)return!1;var _=!1,S=Z(g);return this.each(function(D){return!(_=S(D,g))}),_},find:function(g){if(!g||g.nodeType)return z(g&&this.has(g).length?g:null);var _=[];return this.each(function(S){i.apply(_,H(g,S))}),be(_)},has:function(g){var _=y(g)?function(S){return H(g,S).length!==0}:function(S){return S.contains(g)};return this.filter(_)},next:function(){return z(this[0].nextElementSibling)},not:function(g){if(!g)return this;var _=Z(g);return this.filter(function(S){return!_(S,g)})},parent:function(){var g=[];return this.each(function(_){_&&_.parentNode&&g.push(_.parentNode)}),be(g)},parents:function(g){var _,S=[];return this.each(function(D){for(_=D;_&&_.parentNode&&_!==p.body.parentNode;)_=_.parentNode,(!g||g&&oe(_,g))&&S.push(_)}),be(S)},prev:function(){return z(this[0].previousElementSibling)},siblings:function(g){var _=this.parent().children(g),S=this[0];return _.filter(function(D){return D!==S})}}),z}();var f=function(){function u(p,b,k){h(this,u),b instanceof Element||console.error(Error(b+" is not an HTML Element"));var d=p.getInstance(b);d&&d.destroy(),this.el=b,this.$el=cash(b)}return n(u,null,[{key:"init",value:function(p,b,k){var d=null;if(b instanceof Element)d=new p(b,k);else if(b&&(b.jquery||b.cash||b instanceof NodeList)){for(var s=[],i=0;i<b.length;i++)s.push(new p(b[i],k));d=s}return d}}]),u}();(function(u){u.Package?M={}:u.M={},M.jQueryLoaded=!!u.jQuery})(window),e.nodeType||(!o.nodeType&&o.exports&&(e=o.exports=M),e.default=M),M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var v=function(u){M.keyDown=!0,u.which!==M.keys.TAB&&u.which!==M.keys.ARROW_DOWN&&u.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},m=function(u){M.keyDown=!1,u.which!==M.keys.TAB&&u.which!==M.keys.ARROW_DOWN&&u.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},w=function(u){M.keyDown&&document.body.classList.add("keyboard-focused")},T=function(u){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",v,!0),document.addEventListener("keyup",m,!0),document.addEventListener("focus",w,!0),document.addEventListener("blur",T,!0),M.initializeJqueryWrapper=function(u,p,b){jQuery.fn[p]=function(k){if(u.prototype[k]){var d=Array.prototype.slice.call(arguments,1);if(k.slice(0,3)==="get"){var s=this.first()[0][b];return s[k].apply(s,d)}return this.each(function(){var i=this[b];i[k].apply(i,d)})}if(typeof k=="object"||!k)return u.init(this,k),this;jQuery.error("Method "+k+" does not exist on jQuery."+p)}},M.AutoInit=function(u){var p=u||document.body,b={Autocomplete:p.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:p.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:p.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:p.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:p.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:p.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:p.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:p.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:p.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:p.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:p.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:p.querySelectorAll("select:not(.no-autoinit)"),Sidenav:p.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:p.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:p.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:p.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:p.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:p.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var k in b)M[k].init(b[k])},M.objectSelectorString=function(u){return((u.prop("tagName")||"")+(u.attr("id")||"")+(u.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function u(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return u()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u()}}(),M.escapeHash=function(u){return u.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(u){var p=$(u),b=p.add(p.parents()),k=!1;return b.each(function(){if($(this).css("position")==="fixed")return!(k=!0)}),k},M.checkWithinContainer=function(u,p,b){var k={top:!1,right:!1,bottom:!1,left:!1},d=u.getBoundingClientRect(),s=u===document.body?Math.max(d.bottom,window.innerHeight):d.bottom,i=u.scrollLeft,a=u.scrollTop,c=p.left-i,y=p.top-a;return(c<d.left+b||c<b)&&(k.left=!0),(c+p.width>d.right-b||c+p.width>window.innerWidth-b)&&(k.right=!0),(y<d.top+b||y<b)&&(k.top=!0),(y+p.height>s-b||y+p.height>window.innerHeight-b)&&(k.bottom=!0),k},M.checkPossibleAlignments=function(u,p,b,k){var d={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},s=getComputedStyle(p).overflow==="visible",i=p.getBoundingClientRect(),a=Math.min(i.height,window.innerHeight),c=Math.min(i.width,window.innerWidth),y=u.getBoundingClientRect(),C=p.scrollLeft,O=p.scrollTop,A=b.left-C,R=b.top-O,H=b.top+y.height-O;return d.spaceOnRight=s?window.innerWidth-(y.left+b.width):c-(A+b.width),d.spaceOnRight<0&&(d.left=!1),d.spaceOnLeft=s?y.right-b.width:A-b.width+y.width,d.spaceOnLeft<0&&(d.right=!1),d.spaceOnBottom=s?window.innerHeight-(y.top+b.height+k):a-(R+b.height+k),d.spaceOnBottom<0&&(d.top=!1),d.spaceOnTop=s?y.bottom-(b.height+k):H-(b.height-k),d.spaceOnTop<0&&(d.bottom=!1),d},M.getOverflowParent=function(u){return u==null?null:u===document.body||getComputedStyle(u).overflow!=="visible"?u:M.getOverflowParent(u.parentElement)},M.getIdFromTrigger=function(u){var p=u.getAttribute("data-target");return p||(p=(p=u.getAttribute("href"))?p.slice(1):""),p},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var L=Date.now||function(){return new Date().getTime()};M.throttle=function(u,p,b){var k=void 0,d=void 0,s=void 0,i=null,a=0;b||(b={});var c=function(){a=b.leading===!1?0:L(),i=null,s=u.apply(k,d),k=d=null};return function(){var y=L();a||b.leading!==!1||(a=y);var C=p-(y-a);return k=this,d=arguments,C<=0?(clearTimeout(i),i=null,a=y,s=u.apply(k,d),k=d=null):i||b.trailing===!1||(i=setTimeout(c,C)),s}};var I={scope:{}};I.defineProperty=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");u!=Array.prototype&&u!=Object.prototype&&(u[p]=b.value)},I.getGlobal=function(u){return typeof window<"u"&&window===u?u:typeof we<"u"&&we!=null?we:u},I.global=I.getGlobal(we),I.SYMBOL_PREFIX="jscomp_symbol_",I.initSymbol=function(){I.initSymbol=function(){},I.global.Symbol||(I.global.Symbol=I.Symbol)},I.symbolCounter_=0,I.Symbol=function(u){return I.SYMBOL_PREFIX+(u||"")+I.symbolCounter_++},I.initSymbolIterator=function(){I.initSymbol();var u=I.global.Symbol.iterator;u||(u=I.global.Symbol.iterator=I.global.Symbol("iterator")),typeof Array.prototype[u]!="function"&&I.defineProperty(Array.prototype,u,{configurable:!0,writable:!0,value:function(){return I.arrayIterator(this)}}),I.initSymbolIterator=function(){}},I.arrayIterator=function(u){var p=0;return I.iteratorPrototype(function(){return p<u.length?{done:!1,value:u[p++]}:{done:!0}})},I.iteratorPrototype=function(u){return I.initSymbolIterator(),(u={next:u})[I.global.Symbol.iterator]=function(){return this},u},I.array=I.array||{},I.iteratorFromArray=function(u,p){I.initSymbolIterator(),u instanceof String&&(u+="");var b=0,k={next:function(){if(b<u.length){var d=b++;return{value:p(d,u[d]),done:!1}}return k.next=function(){return{done:!0,value:void 0}},k.next()}};return k[Symbol.iterator]=function(){return k},k},I.polyfill=function(u,p,b,k){if(p){for(b=I.global,u=u.split("."),k=0;k<u.length-1;k++){var d=u[k];d in b||(b[d]={}),b=b[d]}(p=p(k=b[u=u[u.length-1]]))!=k&&p!=null&&I.defineProperty(b,u,{configurable:!0,writable:!0,value:p})}},I.polyfill("Array.prototype.keys",function(u){return u||function(){return I.iteratorFromArray(this,function(p){return p})}},"es6-impl","es3");var W=we;M.anime=function(){function u(E){if(!J.col(E))try{return document.querySelectorAll(E)}catch{}}function p(E,x){for(var B=E.length,P=2<=arguments.length?x:void 0,j=[],q=0;q<B;q++)if(q in E){var V=E[q];x.call(P,V,q,E)&&j.push(V)}return j}function b(E){return E.reduce(function(x,B){return x.concat(J.arr(B)?b(B):B)},[])}function k(E){return J.arr(E)?E:(J.str(E)&&(E=u(E)||E),E instanceof NodeList||E instanceof HTMLCollection?[].slice.call(E):[E])}function d(E,x){return E.some(function(B){return B===x})}function s(E){var x,B={};for(x in E)B[x]=E[x];return B}function i(E,x){var B,P=s(E);for(B in E)P[B]=x.hasOwnProperty(B)?x[B]:E[B];return P}function a(E,x){var B,P=s(E);for(B in x)P[B]=J.und(E[B])?x[B]:E[B];return P}function c(E){if(E=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(E))return E[2]}function y(E,x){return J.fnc(E)?E(x.target,x.id,x.total):E}function C(E,x){if(x in E.style)return getComputedStyle(E).getPropertyValue(x.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function O(E,x){return J.dom(E)&&d(We,x)?"transform":J.dom(E)&&(E.getAttribute(x)||J.svg(E)&&E[x])?"attribute":J.dom(E)&&x!=="transform"&&C(E,x)?"css":E[x]!=null?"object":void 0}function A(E,x){switch(O(E,x)){case"transform":return function(B,P){var j,q=-1<(j=P).indexOf("translate")||j==="perspective"?"px":-1<j.indexOf("rotate")||-1<j.indexOf("skew")?"deg":void 0,q=-1<P.indexOf("scale")?1:0+q;if(!(B=B.style.transform))return q;for(var V=[],U=[],X=[],K=/(\w+)\((.+?)\)/g;V=K.exec(B);)U.push(V[1]),X.push(V[2]);return(B=p(X,function(ie,g){return U[g]===P})).length?B[0]:q}(E,x);case"css":return C(E,x);case"attribute":return E.getAttribute(x)}return E[x]||0}function R(E,x){var B=/^(\*=|\+=|-=)/.exec(E);if(!B)return E;var P=c(E)||0;switch(x=parseFloat(x),E=parseFloat(E.replace(B[0],"")),B[0][0]){case"+":return x+E+P;case"-":return x-E+P;case"*":return x*E+P}}function H(E,x){return Math.sqrt(Math.pow(x.x-E.x,2)+Math.pow(x.y-E.y,2))}function N(E){E=E.points;for(var x,B=0,P=0;P<E.numberOfItems;P++){var j=E.getItem(P);0<P&&(B+=H(x,j)),x=j}return B}function F(E){if(E.getTotalLength)return E.getTotalLength();switch(E.tagName.toLowerCase()){case"circle":return 2*Math.PI*E.getAttribute("r");case"rect":return 2*E.getAttribute("width")+2*E.getAttribute("height");case"line":return H({x:E.getAttribute("x1"),y:E.getAttribute("y1")},{x:E.getAttribute("x2"),y:E.getAttribute("y2")});case"polyline":return N(E);case"polygon":var x=E.points;return N(E)+H(x.getItem(x.numberOfItems-1),x.getItem(0))}}function ce(E,x){function B(V){return V=V===void 0?0:V,E.el.getPointAtLength(1<=x+V?x+V:0)}var P=B(),j=B(-1),q=B(1);switch(E.property){case"x":return P.x;case"y":return P.y;case"angle":return 180*Math.atan2(q.y-j.y,q.x-j.x)/Math.PI}}function z(E,x){var B,P=/-?\d*\.?\d+/g;if(B=J.pth(E)?E.totalLength:E,J.col(B))if(J.rgb(B)){var j=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(B);B=j?"rgba("+j[1]+",1)":B}else B=J.hex(B)?function(q){q=q.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(X,K,ie,g){return K+K+ie+ie+g+g});var U=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(q);q=parseInt(U[1],16);var V=parseInt(U[2],16),U=parseInt(U[3],16);return"rgba("+q+","+V+","+U+",1)"}(B):J.hsl(B)?function(q){function V(_,S,D){return D<0&&(D+=1),1<D&&--D,D<1/6?_+6*(S-_)*D:D<.5?S:D<2/3?_+(S-_)*(2/3-D)*6:_}var K=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(q)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(q);q=parseInt(K[1])/360;var U=parseInt(K[2])/100,X=parseInt(K[3])/100,K=K[4]||1;if(U==0)X=U=q=X;else{var ie=X<.5?X*(1+U):X+U-X*U,g=2*X-ie,X=V(g,ie,q+1/3),U=V(g,ie,q);q=V(g,ie,q-1/3)}return"rgba("+255*X+","+255*U+","+255*q+","+K+")"}(B):void 0;else j=(j=c(B))?B.substr(0,B.length-j.length):B,B=x&&!/\s/g.test(B)?j+x:j;return{original:B+="",numbers:B.match(P)?B.match(P).map(Number):[0],strings:J.str(E)||x?B.split(P):[]}}function Y(E){return p(E=E?b(J.arr(E)?E.map(k):k(E)):[],function(x,B,P){return P.indexOf(x)===B})}function se(E,x){var B=s(x);if(J.arr(E)){var P=E.length;P!==2||J.obj(E[0])?J.fnc(x.duration)||(B.duration=x.duration/P):E={value:E}}return k(E).map(function(j,q){return q=q?0:x.delay,j=J.obj(j)&&!J.pth(j)?j:{value:j},J.und(j.delay)&&(j.delay=q),j}).map(function(j){return a(j,B)})}function oe(E,x){var B;return E.tweens.map(function(P){var j=(P=function(X,K){var ie,g={};for(ie in X){var _=y(X[ie],K);J.arr(_)&&(_=_.map(function(S){return y(S,K)})).length===1&&(_=_[0]),g[ie]=_}return g.duration=parseFloat(g.duration),g.delay=parseFloat(g.delay),g}(P,x)).value,U=A(x.target,E.name),q=B?B.to.original:U,q=J.arr(j)?j[0]:q,V=R(J.arr(j)?j[1]:j,q),U=c(V)||c(q)||c(U);return P.from=z(q,U),P.to=z(V,U),P.start=B?B.end:E.offset,P.end=P.start+P.delay+P.duration,P.easing=function(X){return J.arr(X)?Oe.apply(this,X):xe[X]}(P.easing),P.elasticity=(1e3-Math.min(Math.max(P.elasticity,1),999))/1e3,P.isPath=J.pth(j),P.isColor=J.col(P.from.original),P.isColor&&(P.round=1),B=P})}function Z(E,x,B,P){var j=E==="delay";return x.length?(j?Math.min:Math.max).apply(Math,x.map(function(q){return q[E]})):j?P.delay:B.offset+P.delay+P.duration}function be(E){var x,B,P,j,q=i(Ne,E),V=i($e,E),U=(B=E.targets,(P=Y(B)).map(function(ie,g){return{target:ie,id:g,total:P.length}})),X=[],K=a(q,V);for(x in E)K.hasOwnProperty(x)||x==="targets"||X.push({name:x,offset:K.offset,tweens:se(E[x],V)});return j=X,E=p(b(U.map(function(ie){return j.map(function(g){var _=O(ie.target,g.name);if(_){var S=oe(g,ie);g={type:_,property:g.name,animatable:ie,tweens:S,duration:S[S.length-1].end,delay:S[0].delay}}else g=void 0;return g})})),function(ie){return!J.und(ie)}),a(q,{children:[],animatables:U,animations:E,duration:Z("duration",E,q,V),delay:Z("delay",E,q,V)})}function te(E){function x(){return window.Promise&&new Promise(function(S){return ie=S})}function B(S){return _.reversed?_.duration-S:S}function P(S){for(var D=0,Q={},ne=_.animations,ge=ne.length;D<ge;){var he=ne[D],de=he.animatable,fe=he.tweens,Te=fe.length-1,ae=fe[Te];Te&&(ae=p(fe,function(Ri){return S<Ri.end})[0]||ae);for(var fe=Math.min(Math.max(S-ae.start-ae.delay,0),ae.duration)/ae.duration,Ke=isNaN(fe)?1:ae.easing(fe,ae.elasticity),fe=ae.to.strings,it=ae.round,Te=[],Pe=void 0,Pe=ae.to.numbers.length,Re=0;Re<Pe;Re++){var Je=void 0,Je=ae.to.numbers[Re],Ln=ae.from.numbers[Re],Je=ae.isPath?ce(ae.value,Ke*Je):Ln+Ke*(Je-Ln);it&&(ae.isColor&&2<Re||(Je=Math.round(Je*it)/it)),Te.push(Je)}if(ae=fe.length)for(Pe=fe[0],Ke=0;Ke<ae;Ke++)it=fe[Ke+1],Re=Te[Ke],isNaN(Re)||(Pe=it?Pe+(Re+it):Pe+(Re+" "));else Pe=Te[0];Ae[he.type](de.target,he.property,Pe,Q,de.id),he.currentValue=Pe,D++}if(D=Object.keys(Q).length)for(ne=0;ne<D;ne++)Ce||(Ce=C(document.body,"transform")?"transform":"-webkit-transform"),_.animatables[ne].target.style[Ce]=Q[ne].join(" ");_.currentTime=S,_.progress=S/_.duration*100}function j(S){_[S]&&_[S](_)}function q(){_.remaining&&_.remaining!==!0&&_.remaining--}function V(S){var D=_.duration,Q=_.offset,ne=Q+_.delay,ge=_.currentTime,he=_.reversed,de=B(S);if(_.children.length){var fe=_.children,Te=fe.length;if(de>=_.currentTime)for(var ae=0;ae<Te;ae++)fe[ae].seek(de);else for(;Te--;)fe[Te].seek(de)}(ne<=de||!D)&&(_.began||(_.began=!0,j("begin")),j("run")),Q<de&&de<D?P(de):(de<=Q&&ge!==0&&(P(0),he&&q()),(D<=de&&ge!==D||!D)&&(P(D),he||q())),j("update"),D<=S&&(_.remaining?(X=U,_.direction==="alternate"&&(_.reversed=!_.reversed)):(_.pause(),_.completed||(_.completed=!0,j("complete"),"Promise"in window&&(ie(),g=x()))),K=0)}E=E===void 0?{}:E;var U,X,K=0,ie=null,g=x(),_=be(E);return _.reset=function(){var S=_.direction,D=_.loop;for(_.currentTime=0,_.progress=0,_.paused=!0,_.began=!1,_.completed=!1,_.reversed=S==="reverse",_.remaining=S==="alternate"&&D===1?2:D,P(0),S=_.children.length;S--;)_.children[S].reset()},_.tick=function(S){U=S,X||(X=U),V((K+U-X)*te.speed)},_.seek=function(S){V(B(S))},_.pause=function(){var S=ue.indexOf(_);-1<S&&ue.splice(S,1),_.paused=!0},_.play=function(){_.paused&&(_.paused=!1,X=0,K=B(_.currentTime),ue.push(_),Me||qe())},_.reverse=function(){_.reversed=!_.reversed,X=0,K=B(_.currentTime)},_.restart=function(){_.pause(),_.reset(),_.play()},_.finished=g,_.reset(),_.autoplay&&_.play(),_}var Ce,Ne={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},$e={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},We="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),J={arr:function(E){return Array.isArray(E)},obj:function(E){return-1<Object.prototype.toString.call(E).indexOf("Object")},pth:function(E){return J.obj(E)&&E.hasOwnProperty("totalLength")},svg:function(E){return E instanceof SVGElement},dom:function(E){return E.nodeType||J.svg(E)},str:function(E){return typeof E=="string"},fnc:function(E){return typeof E=="function"},und:function(E){return E===void 0},hex:function(E){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(E)},rgb:function(E){return/^rgb/.test(E)},hsl:function(E){return/^hsl/.test(E)},col:function(E){return J.hex(E)||J.rgb(E)||J.hsl(E)}},Oe=function(){function E(x,B,P){return(((1-3*P+3*B)*x+(3*P-6*B))*x+3*B)*x}return function(x,B,P,j){if(0<=x&&x<=1&&0<=P&&P<=1){var q=new Float32Array(11);if(x!==B||P!==j)for(var V=0;V<11;++V)q[V]=E(.1*V,x,P);return function(U){if(x===B&&P===j)return U;if(U===0)return 0;if(U===1)return 1;for(var X=0,K=1;K!==10&&q[K]<=U;++K)X+=.1;var K=X+(U-q[--K])/(q[K+1]-q[K])*.1,ie=3*(1-3*P+3*x)*K*K+2*(3*P-6*x)*K+3*x;if(.001<=ie){for(X=0;X<4&&(ie=3*(1-3*P+3*x)*K*K+2*(3*P-6*x)*K+3*x)!=0;++X)var g=E(K,x,P)-U,K=K-g/ie;U=K}else if(ie===0)U=K;else{for(var K=X,X=X+.1,_=0;0<(ie=E(g=K+(X-K)/2,x,P)-U)?X=g:K=g,1e-7<Math.abs(ie)&&++_<10;);U=g}return E(U,B,j)}}}}(),xe=function(){function E(V,U){return V===0||V===1?V:-Math.pow(2,10*(V-1))*Math.sin(2*(V-1-U/(2*Math.PI)*Math.asin(1))*Math.PI/U)}var x,B="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),P={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],E],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(V,U){return 1-E(1-V,U)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(V,U){return V<.5?E(2*V,U)/2:1-E(-2*V+2,U)/2}]},j={linear:Oe(.25,.25,.75,.75)},q={};for(x in P)q.type=x,P[q.type].forEach(function(V){return function(U,X){j["ease"+V.type+B[X]]=J.fnc(U)?U:Oe.apply(W,U)}}(q)),q={type:q.type};return j}(),Ae={css:function(E,x,B){return E.style[x]=B},attribute:function(E,x,B){return E.setAttribute(x,B)},object:function(E,x,B){return E[x]=B},transform:function(E,x,B,P,j){P[j]||(P[j]=[]),P[j].push(x+"("+B+")")}},ue=[],Me=0,qe=function(){function E(){Me=requestAnimationFrame(x)}function x(B){var P=ue.length;if(P){for(var j=0;j<P;)ue[j]&&ue[j].tick(B),j++;E()}else cancelAnimationFrame(Me),Me=0}return E}();return te.version="2.2.0",te.speed=1,te.running=ue,te.remove=function(E){E=Y(E);for(var x=ue.length;x--;)for(var B=ue[x],P=B.animations,j=P.length;j--;)d(E,P[j].animatable.target)&&(P.splice(j,1),P.length||B.pause())},te.getValue=A,te.path=function(E,x){var B=J.str(E)?u(E)[0]:E,P=x||100;return function(j){return{el:B,property:j,totalLength:F(B)*(P/100)}}},te.setDashoffset=function(E){var x=F(E);return E.setAttribute("stroke-dasharray",x),x},te.bezier=Oe,te.easings=xe,te.timeline=function(E){var x=te(E);return x.pause(),x.duration=0,x.add=function(B){return x.children.forEach(function(P){P.began=!0,P.completed=!0}),k(B).forEach(function(P){var j=a(P,i($e,E||{}));j.targets=j.targets||E.targets,P=x.duration;var q=j.offset;j.autoplay=!1,j.direction=x.direction,j.offset=J.und(q)?P:R(q,P),x.began=!0,x.completed=!0,x.seek(j.offset),(j=te(j)).began=!0,j.completed=!0,j.duration>P&&(x.duration=j.duration),x.children.push(j)}),x.seek(0),x.reset(),x.autoplay&&x.restart(),x},x},te.random=function(E,x){return Math.floor(Math.random()*(x-E+1))+E},te}(),function(u,p){var b={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));(c.el.M_Collapsible=c).options=u.extend({},s.defaults,a),c.$headers=c.$el.children("li").children(".collapsible-header"),c.$headers.attr("tabindex",0),c._setupEventHandlers();var y=c.$el.children("li.active").children(".collapsible-body");return c.options.accordion?y.first().css("display","block"):y.css("display","block"),c}return l(s,f),n(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var i=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(a){a.addEventListener("keydown",i._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var i=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(a){a.removeEventListener("keydown",i._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(i){var a=u(i.target).closest(".collapsible-header");if(i.target&&a.length){var c=a.closest(".collapsible");if(c[0]===this.el){var y=a.closest("li"),C=c.children("li"),O=y[0].classList.contains("active"),A=C.index(y);O?this.close(A):this.open(A)}}}},{key:"_handleCollapsibleKeydown",value:function(i){i.keyCode===13&&this._handleCollapsibleClickBound(i)}},{key:"_animateIn",value:function(i){var a=this,c=this.$el.children("li").eq(i);if(c.length){var y=c.children(".collapsible-body");p.remove(y[0]),y.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var C=y.css("padding-top"),O=y.css("padding-bottom"),A=y[0].scrollHeight;y.css({paddingTop:0,paddingBottom:0}),p({targets:y[0],height:A,paddingTop:C,paddingBottom:O,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(R){y.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),typeof a.options.onOpenEnd=="function"&&a.options.onOpenEnd.call(a,c[0])}})}}},{key:"_animateOut",value:function(i){var a=this,c=this.$el.children("li").eq(i);if(c.length){var y=c.children(".collapsible-body");p.remove(y[0]),y.css("overflow","hidden"),p({targets:y[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){y.css({height:"",overflow:"",padding:"",display:""}),typeof a.options.onCloseEnd=="function"&&a.options.onCloseEnd.call(a,c[0])}})}}},{key:"open",value:function(i){var a=this,c=this.$el.children("li").eq(i);if(c.length&&!c[0].classList.contains("active")){if(typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,c[0]),this.options.accordion){var y=this.$el.children("li");this.$el.children("li.active").each(function(C){var O=y.index(u(C));a.close(O)})}c[0].classList.add("active"),this._animateIn(i)}}},{key:"close",value:function(i){var a=this.$el.children("li").eq(i);a.length&&a[0].classList.contains("active")&&(typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,a[0]),a[0].classList.remove("active"),this._animateOut(i))}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Collapsible}},{key:"defaults",get:function(){return b}}]),s}();M.Collapsible=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"collapsible","M_Collapsible")}(cash,M.anime),function(u,p){var b={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return c.el.M_Dropdown=c,s._dropdowns.push(c),c.id=M.getIdFromTrigger(i),c.dropdownEl=document.getElementById(c.id),c.$dropdownEl=u(c.dropdownEl),c.options=u.extend({},s.defaults,a),c.isOpen=!1,c.isScrollable=!1,c.isTouchMoving=!1,c.focusedIndex=-1,c.filterQuery=[],c.options.container?u(c.options.container).append(c.dropdownEl):c.$el.after(c.dropdownEl),c._makeDropdownFocusable(),c._resetFilterQueryBound=c._resetFilterQuery.bind(c),c._handleDocumentClickBound=c._handleDocumentClick.bind(c),c._handleDocumentTouchmoveBound=c._handleDocumentTouchmove.bind(c),c._handleDropdownClickBound=c._handleDropdownClick.bind(c),c._handleDropdownKeydownBound=c._handleDropdownKeydown.bind(c),c._handleTriggerKeydownBound=c._handleTriggerKeydown.bind(c),c._setupEventHandlers(),c}return l(s,f),n(s,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),s._dropdowns.splice(s._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(i){i.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(i){var a=i.toElement||i.relatedTarget,c=!!u(a).closest(".dropdown-content").length,y=!1,C=u(a).closest(".dropdown-trigger");C.length&&C[0].M_Dropdown&&C[0].M_Dropdown.isOpen&&(y=!0),y||c||this.close()}},{key:"_handleDocumentClick",value:function(i){var a=this,c=u(i.target);this.options.closeOnClick&&c.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){a.close()},0):!c.closest(".dropdown-trigger").length&&c.closest(".dropdown-content").length||setTimeout(function(){a.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(i){i.which!==M.keys.ARROW_DOWN&&i.which!==M.keys.ENTER||this.isOpen||(i.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(i){u(i.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(i){if(typeof this.options.onItemClick=="function"){var a=u(i.target).closest("li")[0];this.options.onItemClick.call(this,a)}}},{key:"_handleDropdownKeydown",value:function(i){if(i.which===M.keys.TAB)i.preventDefault(),this.close();else if(i.which!==M.keys.ARROW_DOWN&&i.which!==M.keys.ARROW_UP||!this.isOpen)if(i.which===M.keys.ENTER&&this.isOpen){var a=this.dropdownEl.children[this.focusedIndex],c=u(a).find("a, button").first();c.length?c[0].click():a.click()}else i.which===M.keys.ESC&&this.isOpen&&(i.preventDefault(),this.close());else{i.preventDefault();var y=i.which===M.keys.ARROW_DOWN?1:-1,C=this.focusedIndex,O=!1;do if(C+=y,this.dropdownEl.children[C]&&this.dropdownEl.children[C].tabIndex!==-1){O=!0;break}while(C<this.dropdownEl.children.length&&0<=C);O&&(this.focusedIndex=C,this._focusFocusedItem())}var A=String.fromCharCode(i.which).toLowerCase();if(A&&[9,13,27,38,40].indexOf(i.which)===-1){this.filterQuery.push(A);var R=this.filterQuery.join(""),H=u(this.dropdownEl).find("li").filter(function(N){return u(N).text().toLowerCase().indexOf(R)===0})[0];H&&(this.focusedIndex=u(H).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,u(this.dropdownEl).children().each(function(i){i.getAttribute("tabindex")||i.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){0<=this.focusedIndex&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var i=this.el.getBoundingClientRect(),a=this.dropdownEl.getBoundingClientRect(),c=a.height,y=a.width,C=i.left-a.left,O=i.top-a.top,A={left:C,top:O,height:c,width:y},R=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,H=M.checkPossibleAlignments(this.el,R,A,this.options.coverTrigger?0:i.height),N="top",F=this.options.alignment;if(O+=this.options.coverTrigger?0:i.height,this.isScrollable=!1,H.top||(H.bottom?N="bottom":(this.isScrollable=!0,H.spaceOnTop>H.spaceOnBottom?(N="bottom",c+=H.spaceOnTop,O-=H.spaceOnTop):c+=H.spaceOnBottom)),!H[F]){var ce=F==="left"?"right":"left";H[ce]?F=ce:H.spaceOnLeft>H.spaceOnRight?(F="right",y+=H.spaceOnLeft,C-=H.spaceOnLeft):(F="left",y+=H.spaceOnRight)}return N==="bottom"&&(O=O-a.height+(this.options.coverTrigger?i.height:0)),F==="right"&&(C=C-a.width+i.width),{x:C,y:O,verticalAlignment:N,horizontalAlignment:F,height:c,width:y}}},{key:"_animateIn",value:function(){var i=this;p.remove(this.dropdownEl),p({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(a){if(i.options.autoFocus&&i.dropdownEl.focus(),typeof i.options.onOpenEnd=="function"){var c=a.animatables[0].target;i.options.onOpenEnd.call(c,i.el)}}})}},{key:"_animateOut",value:function(){var i=this;p.remove(this.dropdownEl),p({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(a){i._resetDropdownStyles(),typeof i.options.onCloseEnd=="function"&&(a.animatables[0].target,i.options.onCloseEnd.call(i,i.el))}})}},{key:"_placeDropdown",value:function(){var i=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=i+"px";var a=this._getDropdownPosition();this.dropdownEl.style.left=a.x+"px",this.dropdownEl.style.top=a.y+"px",this.dropdownEl.style.height=a.height+"px",this.dropdownEl.style.width=a.width+"px",this.dropdownEl.style.transformOrigin=(a.horizontalAlignment==="left"?"0":"100%")+" "+(a.verticalAlignment==="top"?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Dropdown}},{key:"defaults",get:function(){return b}}]),s}();k._dropdowns=[],window.M.Dropdown=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"dropdown","M_Dropdown")}(cash,M.anime),function(u,p){var b={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_Modal=c).options=u.extend({},s.defaults,a),c.isOpen=!1,c.id=c.$el.attr("id"),c._openingTrigger=void 0,c.$overlay=u('<div class="modal-overlay"></div>'),c.el.tabIndex=0,c._nthModalOpened=0,s._count++,c._setupEventHandlers(),c}return l(s,f),n(s,[{key:"destroy",value:function(){s._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),s._count===1&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){s._count===0&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(i){var a=u(i.target).closest(".modal-trigger");if(a.length){var c=M.getIdFromTrigger(a[0]),y=document.getElementById(c).M_Modal;y&&y.open(a),i.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(i){u(i.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(i){i.keyCode===27&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(i){this.el.contains(i.target)||this._nthModalOpened!==s._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var i=this;u.extend(this.el.style,{display:"block",opacity:0}),u.extend(this.$overlay[0].style,{display:"block",opacity:0}),p({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var a={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){typeof i.options.onOpenEnd=="function"&&i.options.onOpenEnd.call(i,i.el,i._openingTrigger)}};this.el.classList.contains("bottom-sheet")?u.extend(a,{bottom:0,opacity:1}):u.extend(a,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),p(a)}},{key:"_animateOut",value:function(){var i=this;p({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var a={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){i.el.style.display="none",i.$overlay.remove(),typeof i.options.onCloseEnd=="function"&&i.options.onCloseEnd.call(i,i.el)}};this.el.classList.contains("bottom-sheet")?u.extend(a,{bottom:"-100%",opacity:0}):u.extend(a,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),p(a)}},{key:"open",value:function(i){if(!this.isOpen)return this.isOpen=!0,s._modalsOpen++,this._nthModalOpened=s._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*s._modalsOpen,this.el.style.zIndex=1e3+2*s._modalsOpen+1,this._openingTrigger=i?i[0]:void 0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),p.remove(this.el),p.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,s._modalsOpen--,this._nthModalOpened=0,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),s._modalsOpen===0&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),p.remove(this.el),p.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Modal}},{key:"defaults",get:function(){return b}}]),s}();k._modalsOpen=0,k._count=0,M.Modal=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"modal","M_Modal")}(cash,M.anime),function(u,p){var b={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_Materialbox=c).options=u.extend({},s.defaults,a),c.overlayActive=!1,c.doneAnimating=!0,c.placeholder=u("<div></div>").addClass("material-placeholder"),c.originalWidth=0,c.originalHeight=0,c.originInlineStyles=c.$el.attr("style"),c.caption=c.el.getAttribute("data-caption")||"",c.$el.before(c.placeholder),c.placeholder.append(c.$el),c._setupEventHandlers(),c}return l(s,f),n(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,u(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(i){this.doneAnimating===!1||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(i){i.keyCode===27&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=u();for(var i=this.placeholder[0].parentNode;i!==null&&!u(i).is(document);){var a=u(i);a.css("overflow")!=="visible"&&(a.css("overflow","visible"),this.ancestorsChanged===void 0?this.ancestorsChanged=a:this.ancestorsChanged=this.ancestorsChanged.add(a)),i=i.parentNode}}},{key:"_animateImageIn",value:function(){var i=this,a={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){i.doneAnimating=!0,typeof i.options.onOpenEnd=="function"&&i.options.onOpenEnd.call(i,i.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),this.maxWidth!=="none"&&(a.maxWidth=this.newWidth),this.maxHeight!=="none"&&(a.maxHeight=this.newHeight),p(a)}},{key:"_animateImageOut",value:function(){var i=this,a={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){i.placeholder.css({height:"",width:"",position:"",top:"",left:""}),i.attrWidth&&i.$el.attr("width",i.attrWidth),i.attrHeight&&i.$el.attr("height",i.attrHeight),i.$el.removeAttr("style"),i.originInlineStyles&&i.$el.attr("style",i.originInlineStyles),i.$el.removeClass("active"),i.doneAnimating=!0,i.ancestorsChanged.length&&i.ancestorsChanged.css("overflow",""),typeof i.options.onCloseEnd=="function"&&i.options.onCloseEnd.call(i,i.el)}};p(a)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var i=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=u('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){i.doneAnimating&&i.close()}),this.$el.before(this.$overlay);var a=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*a.left+"px",top:-1*a.top+"px"}),p.remove(this.el),p.remove(this.$overlay[0]),p({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),this.caption!==""&&(this.$photocaption&&p.remove(this.$photoCaption[0]),this.$photoCaption=u('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),u("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),p({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var c=0,y=this.originalWidth/this.windowWidth,C=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,C<y?(c=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*c):(c=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*c,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var i=this;this._updateVars(),this.doneAnimating=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),p.remove(this.el),p.remove(this.$overlay[0]),this.caption!==""&&p.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),p({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){i.overlayActive=!1,i.$overlay.remove()}}),this._animateImageOut(),this.caption!==""&&p({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){i.$photoCaption.remove()}})}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Materialbox}},{key:"defaults",get:function(){return b}}]),s}();M.Materialbox=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"materialbox","M_Materialbox")}(cash,M.anime),function(u){var p={responsiveThreshold:0},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return(a.el.M_Parallax=a).options=u.extend({},d.defaults,i),a._enabled=window.innerWidth>a.options.responsiveThreshold,a.$img=a.$el.find("img").first(),a.$img.each(function(){this.complete&&u(this).trigger("load")}),a._updateParallax(),a._setupEventHandlers(),a._setupStyles(),d._parallaxes.push(a),a}return l(d,f),n(d,[{key:"destroy",value:function(){d._parallaxes.splice(d._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),d._parallaxes.length===0&&(d._handleScrollThrottled=M.throttle(d._handleScroll,5),window.addEventListener("scroll",d._handleScrollThrottled),d._handleWindowResizeThrottled=M.throttle(d._handleWindowResize,5),window.addEventListener("resize",d._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),d._parallaxes.length===0&&(window.removeEventListener("scroll",d._handleScrollThrottled),window.removeEventListener("resize",d._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var s=0<this.$el.height()?this.el.parentNode.offsetHeight:500,i=this.$img[0].offsetHeight-s,a=this.$el.offset().top+s,c=this.$el.offset().top,y=M.getDocumentScrollTop(),C=window.innerHeight,O=i*((y+C-c)/(s+C));this._enabled?y<a&&c<y+C&&(this.$img[0].style.transform="translate3D(-50%, "+O+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Parallax}},{key:"_handleScroll",value:function(){for(var s=0;s<d._parallaxes.length;s++){var i=d._parallaxes[s];i._updateParallax.call(i)}}},{key:"_handleWindowResize",value:function(){for(var s=0;s<d._parallaxes.length;s++){var i=d._parallaxes[s];i._enabled=window.innerWidth>i.options.responsiveThreshold}}},{key:"defaults",get:function(){return p}}]),d}();b._parallaxes=[],M.Parallax=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"parallax","M_Parallax")}(cash),function(u,p){var b={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_Tabs=c).options=u.extend({},s.defaults,a),c.$tabLinks=c.$el.children("li.tab").children("a"),c.index=0,c._setupActiveTabLink(),c.options.swipeable?c._setupSwipeableTabs():c._setupNormalTabs(),c._setTabsAndTabWidth(),c._createIndicator(),c._setupEventHandlers(),c}return l(s,f),n(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),this.tabWidth!==0&&this.tabsWidth!==0&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(i){var a=this,c=u(i.target).closest("li.tab"),y=u(i.target).closest("a");if(y.length&&y.parent().hasClass("tab")){if(c.hasClass("disabled"))i.preventDefault();else if(!y.attr("target")){this.$activeTabLink.removeClass("active");var C=this.$content;this.$activeTabLink=y,this.$content=u(M.escapeHash(y[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var O=this.index;this.index=Math.max(this.$tabLinks.index(y),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){typeof a.options.onShow=="function"&&a.options.onShow.call(a,a.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),typeof this.options.onShow=="function"&&this.options.onShow.call(this,this.$content[0]),C.length&&!C.is(this.$content)&&(C[0].style.display="none",C.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(O),i.preventDefault()}}}},{key:"_createIndicator",value:function(){var i=this,a=document.createElement("li");a.classList.add("indicator"),this.el.appendChild(a),this._indicator=a,setTimeout(function(){i._indicator.style.left=i._calcLeftPos(i.$activeTabLink)+"px",i._indicator.style.right=i._calcRightPos(i.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=u(this.$tabLinks.filter('[href="'+location.hash+'"]')),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=u(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var i=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var a=u();this.$tabLinks.each(function(C){var O=u(M.escapeHash(C.hash));O.addClass("carousel-item"),a=a.add(O)});var c=u('<div class="tabs-content carousel carousel-slider"></div>');a.first().before(c),c.append(a),a[0].style.display="";var y=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(c[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(C){var O=i.index;i.index=u(C).index(),i.$activeTabLink.removeClass("active"),i.$activeTabLink=i.$tabLinks.eq(i.index),i.$activeTabLink.addClass("active"),i._animateIndicator(O),typeof i.options.onShow=="function"&&i.options.onShow.call(i,i.$content[0])}}),this._tabsCarousel.set(y)}},{key:"_teardownSwipeableTabs",value:function(){var i=this._tabsCarousel.$el;this._tabsCarousel.destroy(),i.after(i.children()),i.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(i){if(i.hash){var a=u(M.escapeHash(i.hash));a.length&&(a[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(i){if(i.hash){var a=u(M.escapeHash(i.hash));a.length&&(a[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(i){return Math.ceil(this.tabsWidth-i.position().left-i[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(i){return Math.floor(i.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(i){var a=0,c=0;0<=this.index-i?a=90:c=90;var y={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:a},right:{value:this._calcRightPos(this.$activeTabLink),delay:c},duration:this.options.duration,easing:"easeOutQuad"};p.remove(this._indicator),p(y)}},{key:"select",value:function(i){var a=this.$tabLinks.filter('[href="#'+i+'"]');a.length&&a.trigger("click")}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Tabs}},{key:"defaults",get:function(){return b}}]),s}();window.M.Tabs=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"tabs","M_Tabs")}(cash,M.anime),function(u,p){var b={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_Tooltip=c).options=u.extend({},s.defaults,a),c.isOpen=!1,c.isHovered=!1,c.isFocused=!1,c._appendTooltipEl(),c._setupEventHandlers(),c}return l(s,f),n(s,[{key:"destroy",value:function(){u(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var i=document.createElement("div");i.classList.add("material-tooltip"),this.tooltipEl=i;var a=document.createElement("div");a.classList.add("tooltip-content"),a.innerHTML=this.options.html,i.appendChild(a),document.body.appendChild(i)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(i){this.isOpen||(i=i===void 0||void 0,this.isOpen=!0,this.options=u.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(i))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var i=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){i.isHovered||i.isFocused||i._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(i){var a=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(a.isHovered||a.isFocused||i)&&a._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var i,a=this.el,c=this.tooltipEl,y=a.offsetHeight,C=a.offsetWidth,O=c.offsetHeight,A=c.offsetWidth,R=this.options.margin,H=void 0,N=void 0;this.xMovement=0,this.yMovement=0,H=a.getBoundingClientRect().top+M.getDocumentScrollTop(),N=a.getBoundingClientRect().left+M.getDocumentScrollLeft(),this.options.position==="top"?(H+=-O-R,N+=C/2-A/2,this.yMovement=-this.options.transitionMovement):this.options.position==="right"?(H+=y/2-O/2,N+=C+R,this.xMovement=this.options.transitionMovement):this.options.position==="left"?(H+=y/2-O/2,N+=-A-R,this.xMovement=-this.options.transitionMovement):(H+=y+R,N+=C/2-A/2,this.yMovement=this.options.transitionMovement),i=this._repositionWithinScreen(N,H,A,O),u(c).css({top:i.y+"px",left:i.x+"px"})}},{key:"_repositionWithinScreen",value:function(i,a,c,y){var C=M.getDocumentScrollLeft(),O=M.getDocumentScrollTop(),A=i-C,R=a-O,H={left:A,top:R,width:c,height:y},N=this.options.margin+this.options.transitionMovement,F=M.checkWithinContainer(document.body,H,N);return F.left?A=N:F.right&&(A-=A+c-window.innerWidth),F.top?R=N:F.bottom&&(R-=R+y-window.innerHeight),{x:A+C,y:R+O}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",p.remove(this.tooltipEl),p({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){p.remove(this.tooltipEl),p({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var i={},a=this.el.getAttribute("data-tooltip"),c=this.el.getAttribute("data-position");return a&&(i.html=a),c&&(i.position=c),i}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Tooltip}},{key:"defaults",get:function(){return b}}]),s}();M.Tooltip=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"tooltip","M_Tooltip")}(cash,M.anime),function(u){var p=p||{},b=document.querySelectorAll.bind(document);function k(a){var c="";for(var y in a)a.hasOwnProperty(y)&&(c+=y+":"+a[y]+";");return c}var d={duration:750,show:function(a,c){if(a.button===2)return!1;var y=c||this,C=document.createElement("div");C.className="waves-ripple",y.appendChild(C);var O,A,R,H,N,F,ce,z=(F={top:0,left:0},ce=(O=y)&&O.ownerDocument,A=ce.documentElement,O.getBoundingClientRect!==void 0&&(F=O.getBoundingClientRect()),R=(N=H=ce)!==null&&N===N.window?H:H.nodeType===9&&H.defaultView,{top:F.top+R.pageYOffset-A.clientTop,left:F.left+R.pageXOffset-A.clientLeft}),Y=a.pageY-z.top,se=a.pageX-z.left,oe="scale("+y.clientWidth/100*10+")";"touches"in a&&(Y=a.touches[0].pageY-z.top,se=a.touches[0].pageX-z.left),C.setAttribute("data-hold",Date.now()),C.setAttribute("data-scale",oe),C.setAttribute("data-x",se),C.setAttribute("data-y",Y);var Z={top:Y+"px",left:se+"px"};C.className=C.className+" waves-notransition",C.setAttribute("style",k(Z)),C.className=C.className.replace("waves-notransition",""),Z["-webkit-transform"]=oe,Z["-moz-transform"]=oe,Z["-ms-transform"]=oe,Z["-o-transform"]=oe,Z.transform=oe,Z.opacity="1",Z["-webkit-transition-duration"]=d.duration+"ms",Z["-moz-transition-duration"]=d.duration+"ms",Z["-o-transition-duration"]=d.duration+"ms",Z["transition-duration"]=d.duration+"ms",Z["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",C.setAttribute("style",k(Z))},hide:function(a){s.touchup(a);var c=this,y=(c.clientWidth,null),C=c.getElementsByClassName("waves-ripple");if(!(0<C.length))return!1;var O=(y=C[C.length-1]).getAttribute("data-x"),A=y.getAttribute("data-y"),R=y.getAttribute("data-scale"),H=350-(Date.now()-Number(y.getAttribute("data-hold")));H<0&&(H=0),setTimeout(function(){var N={top:A+"px",left:O+"px",opacity:"0","-webkit-transition-duration":d.duration+"ms","-moz-transition-duration":d.duration+"ms","-o-transition-duration":d.duration+"ms","transition-duration":d.duration+"ms","-webkit-transform":R,"-moz-transform":R,"-ms-transform":R,"-o-transform":R,transform:R};y.setAttribute("style",k(N)),setTimeout(function(){try{c.removeChild(y)}catch{return!1}},d.duration)},H)},wrapInput:function(a){for(var c=0;c<a.length;c++){var y=a[c];if(y.tagName.toLowerCase()==="input"){var C=y.parentNode;if(C.tagName.toLowerCase()==="i"&&C.className.indexOf("waves-effect")!==-1)continue;var O=document.createElement("i");O.className=y.className+" waves-input-wrapper";var A=y.getAttribute("style");A||(A=""),O.setAttribute("style",A),y.className="waves-button-input",y.removeAttribute("style"),C.replaceChild(O,y),O.appendChild(y)}}}},s={touches:0,allowEvent:function(a){var c=!0;return a.type==="touchstart"?s.touches+=1:a.type==="touchend"||a.type==="touchcancel"?setTimeout(function(){0<s.touches&&(s.touches-=1)},500):a.type==="mousedown"&&0<s.touches&&(c=!1),c},touchup:function(a){s.allowEvent(a)}};function i(a){var c=function(y){if(s.allowEvent(y)===!1)return null;for(var C=null,O=y.target||y.srcElement;O.parentNode!==null;){if(!(O instanceof SVGElement)&&O.className.indexOf("waves-effect")!==-1){C=O;break}O=O.parentNode}return C}(a);c!==null&&(d.show(a,c),"ontouchstart"in u&&(c.addEventListener("touchend",d.hide,!1),c.addEventListener("touchcancel",d.hide,!1)),c.addEventListener("mouseup",d.hide,!1),c.addEventListener("mouseleave",d.hide,!1),c.addEventListener("dragend",d.hide,!1))}p.displayEffect=function(a){"duration"in(a=a||{})&&(d.duration=a.duration),d.wrapInput(b(".waves-effect")),"ontouchstart"in u&&document.body.addEventListener("touchstart",i,!1),document.body.addEventListener("mousedown",i,!1)},p.attach=function(a){a.tagName.toLowerCase()==="input"&&(d.wrapInput([a]),a=a.parentNode),"ontouchstart"in u&&a.addEventListener("touchstart",i,!1),a.addEventListener("mousedown",i,!1)},u.Waves=p,document.addEventListener("DOMContentLoaded",function(){p.displayEffect()},!1)}(window),function(u,p){var b={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},k=function(){function d(s){h(this,d),this.options=u.extend({},d.defaults,s),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,d._toasts.length===0&&d._createContainer(),d._toasts.push(this);var i=this._createToast();(i.M_Toast=this).el=i,this.$el=u(i),this._animateIn(),this._setTimer()}return n(d,[{key:"_createToast",value:function(){var s=document.createElement("div");return s.classList.add("toast"),this.options.classes.length&&u(s).addClass(this.options.classes),(typeof HTMLElement=="object"?this.message instanceof HTMLElement:this.message&&typeof this.message=="object"&&this.message!==null&&this.message.nodeType===1&&typeof this.message.nodeName=="string")?s.appendChild(this.message):this.message.jquery?u(s).append(this.message[0]):s.innerHTML=this.message,d._container.appendChild(s),s}},{key:"_animateIn",value:function(){p({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var s=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){s.panning||(s.timeRemaining-=20),s.timeRemaining<=0&&s.dismiss()},20))}},{key:"dismiss",value:function(){var s=this;window.clearInterval(this.counterInterval);var i=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+i+"px)",this.el.style.opacity=0),p({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){typeof s.options.completeCallback=="function"&&s.options.completeCallback(),s.$el.remove(),d._toasts.splice(d._toasts.indexOf(s),1),d._toasts.length===0&&d._removeContainer()}})}}],[{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Toast}},{key:"_createContainer",value:function(){var s=document.createElement("div");s.setAttribute("id","toast-container"),s.addEventListener("touchstart",d._onDragStart),s.addEventListener("touchmove",d._onDragMove),s.addEventListener("touchend",d._onDragEnd),s.addEventListener("mousedown",d._onDragStart),document.addEventListener("mousemove",d._onDragMove),document.addEventListener("mouseup",d._onDragEnd),document.body.appendChild(s),d._container=s}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",d._onDragMove),document.removeEventListener("mouseup",d._onDragEnd),u(d._container).remove(),d._container=null}},{key:"_onDragStart",value:function(s){if(s.target&&u(s.target).closest(".toast").length){var i=u(s.target).closest(".toast")[0].M_Toast;i.panning=!0,(d._draggedToast=i).el.classList.add("panning"),i.el.style.transition="",i.startingXPos=d._xPos(s),i.time=Date.now(),i.xPos=d._xPos(s)}}},{key:"_onDragMove",value:function(s){if(d._draggedToast){s.preventDefault();var i=d._draggedToast;i.deltaX=Math.abs(i.xPos-d._xPos(s)),i.xPos=d._xPos(s),i.velocityX=i.deltaX/(Date.now()-i.time),i.time=Date.now();var a=i.xPos-i.startingXPos,c=i.el.offsetWidth*i.options.activationPercent;i.el.style.transform="translateX("+a+"px)",i.el.style.opacity=1-Math.abs(a/c)}}},{key:"_onDragEnd",value:function(){if(d._draggedToast){var s=d._draggedToast;s.panning=!1,s.el.classList.remove("panning");var i=s.xPos-s.startingXPos,a=s.el.offsetWidth*s.options.activationPercent;Math.abs(i)>a||1<s.velocityX?(s.wasSwiped=!0,s.dismiss()):(s.el.style.transition="transform .2s, opacity .2s",s.el.style.transform="",s.el.style.opacity=""),d._draggedToast=null}}},{key:"_xPos",value:function(s){return s.targetTouches&&1<=s.targetTouches.length?s.targetTouches[0].clientX:s.clientX}},{key:"dismissAll",value:function(){for(var s in d._toasts)d._toasts[s].dismiss()}},{key:"defaults",get:function(){return b}}]),d}();k._toasts=[],k._container=null,k._draggedToast=null,M.Toast=k,M.toast=function(d){return new k(d)}}(cash,M.anime),function(u,p){var b={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_Sidenav=c).id=c.$el.attr("id"),c.options=u.extend({},s.defaults,a),c.isOpen=!1,c.isFixed=c.el.classList.contains("sidenav-fixed"),c.isDragged=!1,c.lastWindowWidth=window.innerWidth,c.lastWindowHeight=window.innerHeight,c._createOverlay(),c._createDragTarget(),c._setupEventHandlers(),c._setupClasses(),c._setupFixed(),s._sidenavs.push(c),c}return l(s,f),n(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var i=s._sidenavs.indexOf(this);0<=i&&s._sidenavs.splice(i,1)}},{key:"_createOverlay",value:function(){var i=document.createElement("div");this._closeBound=this.close.bind(this),i.classList.add("sidenav-overlay"),i.addEventListener("click",this._closeBound),document.body.appendChild(i),this._overlay=i}},{key:"_setupEventHandlers",value:function(){s._sidenavs.length===0&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){s._sidenavs.length===1&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(i){var a=u(i.target).closest(".sidenav-trigger");if(i.target&&a.length){var c=M.getIdFromTrigger(a[0]),y=document.getElementById(c).M_Sidenav;y&&y.open(a),i.preventDefault()}}},{key:"_startDrag",value:function(i){var a=i.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=a,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,p.remove(this.el),p.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(i){var a=i.targetTouches[0].clientX,c=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-a),this._xPos=a,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==c&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(i){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(i),this._dragMoveUpdate(i);var a=this._xPos-this._startingXpos,c=0<a?"right":"left";a=Math.min(this._width,Math.abs(a)),this.options.edge===c&&(a=0);var y=a,C="translateX(-100%)";this.options.edge==="right"&&(C="translateX(100%)",y=-y),this.percentOpen=Math.min(1,a/this._width),this.el.style.transform=C+" translateX("+y+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(.2<this.percentOpen?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(i){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(i),this._dragMoveUpdate(i);var a=this._xPos-this._startingXpos,c=0<a?"right":"left";a=Math.min(this._width,Math.abs(a)),this.options.edge!==c&&(a=0);var y=-a;this.options.edge==="right"&&(y=-y),this.percentOpen=Math.min(1,1-a/this._width),this.el.style.transform="translateX("+y+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(.8<this.percentOpen?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(i){u(i.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(992<window.innerWidth?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){this.options.edge==="right"&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&992<window.innerWidth}},{key:"_createDragTarget",value:function(){var i=document.createElement("div");i.classList.add("drag-target"),document.body.appendChild(i),this.dragTarget=i}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){this.isOpen!==!0&&(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(p.remove(this.el),p({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&this.percentOpen==1||this._animateIn()))}},{key:"close",value:function(){if(this.isOpen!==!1)if(this.isOpen=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var i=this.options.edge==="left"?"-105%":"105%";this.el.style.transform="translateX("+i+")"}else this._enableBodyScrolling(),this.isDragged&&this.percentOpen==0?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var i=this,a=this.options.edge==="left"?-1:1;this.isDragged&&(a=this.options.edge==="left"?a+this.percentOpen:a-this.percentOpen),p.remove(this.el),p({targets:this.el,translateX:[100*a+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){typeof i.options.onOpenEnd=="function"&&i.options.onOpenEnd.call(i,i.el)}})}},{key:"_animateOverlayIn",value:function(){var i=0;this.isDragged?i=this.percentOpen:u(this._overlay).css({display:"block"}),p.remove(this._overlay),p({targets:this._overlay,opacity:[i,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var i=this,a=this.options.edge==="left"?-1:1,c=0;this.isDragged&&(c=this.options.edge==="left"?a+this.percentOpen:a-this.percentOpen),p.remove(this.el),p({targets:this.el,translateX:[100*c+"%",105*a+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){typeof i.options.onCloseEnd=="function"&&i.options.onCloseEnd.call(i,i.el)}})}},{key:"_animateOverlayOut",value:function(){var i=this;p.remove(this._overlay),p({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){u(i._overlay).css("display","none")}})}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Sidenav}},{key:"defaults",get:function(){return b}}]),s}();k._sidenavs=[],window.M.Sidenav=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"sidenav","M_Sidenav")}(cash,M.anime),function(u,p){var b={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(d){return'a[href="#'+d+'"]'}},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_ScrollSpy=c).options=u.extend({},s.defaults,a),s._elements.push(c),s._count++,s._increment++,c.tickId=-1,c.id=s._increment,c._setupEventHandlers(),c._handleWindowScroll(),c}return l(s,f),n(s,[{key:"destroy",value:function(){s._elements.splice(s._elements.indexOf(this),1),s._elementsInView.splice(s._elementsInView.indexOf(this),1),s._visibleElements.splice(s._visibleElements.indexOf(this.$el),1),s._count--,this._removeEventHandlers(),u(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var i=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=i.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),s._count===1&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){s._count===0&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(i){for(var a=u(i.target),c=s._elements.length-1;0<=c;c--){var y=s._elements[c];if(a.is('a[href="#'+y.$el.attr("id")+'"]')){i.preventDefault();var C=y.$el.offset().top+1;p({targets:[document.documentElement,document.body],scrollTop:C-y.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){s._ticks++;for(var i=M.getDocumentScrollTop(),a=M.getDocumentScrollLeft(),c=a+window.innerWidth,y=i+window.innerHeight,C=s._findElements(i,c,y,a),O=0;O<C.length;O++){var A=C[O];A.tickId<0&&A._enter(),A.tickId=s._ticks}for(var R=0;R<s._elementsInView.length;R++){var H=s._elementsInView[R],N=H.tickId;0<=N&&N!==s._ticks&&(H._exit(),H.tickId=-1)}s._elementsInView=C}},{key:"_enter",value:function(){(s._visibleElements=s._visibleElements.filter(function(i){return i.height()!=0}))[0]?(u(this.options.getActiveElement(s._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),s._visibleElements[0][0].M_ScrollSpy&&this.id<s._visibleElements[0][0].M_ScrollSpy.id?s._visibleElements.unshift(this.$el):s._visibleElements.push(this.$el)):s._visibleElements.push(this.$el),u(this.options.getActiveElement(s._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var i=this;(s._visibleElements=s._visibleElements.filter(function(a){return a.height()!=0}))[0]&&(u(this.options.getActiveElement(s._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),(s._visibleElements=s._visibleElements.filter(function(a){return a.attr("id")!=i.$el.attr("id")}))[0]&&u(this.options.getActiveElement(s._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_ScrollSpy}},{key:"_findElements",value:function(i,a,c,y){for(var C=[],O=0;O<s._elements.length;O++){var A=s._elements[O],R=i+A.options.scrollOffset||200;if(0<A.$el.height()){var H=A.$el.offset().top,N=A.$el.offset().left,F=N+A.$el.width(),ce=H+A.$el.height();!(a<N||F<y||c<H||ce<R)&&C.push(A)}}return C}},{key:"defaults",get:function(){return b}}]),s}();k._elements=[],k._elementsInView=[],k._visibleElements=[],k._count=0,k._increment=0,k._ticks=0,M.ScrollSpy=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(u){var p={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(k,d,s){return k.indexOf(s)-d.indexOf(s)}},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return(a.el.M_Autocomplete=a).options=u.extend({},d.defaults,i),a.isOpen=!1,a.count=0,a.activeIndex=-1,a.oldVal,a.$inputField=a.$el.closest(".input-field"),a.$active=u(),a._mousedown=!1,a._setupDropdown(),a._setupEventHandlers(),a}return l(d,f),n(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),window.ontouchstart!==void 0&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),window.ontouchstart!==void 0&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var s=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),u(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(i){s.selectOption(u(i))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(s){s.type==="keyup"&&(d._keydown=!1),this.count=0;var i=this.el.value.toLowerCase();s.keyCode!==13&&s.keyCode!==38&&s.keyCode!==40&&(this.oldVal===i||!M.tabPressed&&s.type==="focus"||this.open(),this.oldVal=i)}},{key:"_handleInputKeydown",value:function(s){d._keydown=!0;var i=s.keyCode,a=void 0,c=u(this.container).children("li").length;i===M.keys.ENTER&&0<=this.activeIndex?(a=u(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(a),s.preventDefault()):i!==M.keys.ARROW_UP&&i!==M.keys.ARROW_DOWN||(s.preventDefault(),i===M.keys.ARROW_UP&&0<this.activeIndex&&this.activeIndex--,i===M.keys.ARROW_DOWN&&this.activeIndex<c-1&&this.activeIndex++,this.$active.removeClass("active"),0<=this.activeIndex&&(this.$active=u(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(s){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(s){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(s){this._mousedown=!1}},{key:"_highlight",value:function(s,i){var a=i.find("img"),c=i.text().toLowerCase().indexOf(""+s.toLowerCase()),y=c+s.length-1,C=i.text().slice(0,c),O=i.text().slice(c,y+1),A=i.text().slice(y+1);i.html("<span>"+C+"<span class='highlight'>"+O+"</span>"+A+"</span>"),a.length&&i.prepend(a)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){u(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(s){var i=s.text().trim();this.el.value=i,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),typeof this.options.onAutocomplete=="function"&&this.options.onAutocomplete.call(this,i)}},{key:"_renderDropdown",value:function(s,i){var a=this;this._resetAutocomplete();var c=[];for(var y in s)if(s.hasOwnProperty(y)&&y.toLowerCase().indexOf(i)!==-1){if(this.count>=this.options.limit)break;var C={data:s[y],key:y};c.push(C),this.count++}this.options.sortFunction&&c.sort(function(H,N){return a.options.sortFunction(H.key.toLowerCase(),N.key.toLowerCase(),i.toLowerCase())});for(var O=0;O<c.length;O++){var A=c[O],R=u("<li></li>");A.data?R.append('<img src="'+A.data+'" class="right circle"><span>'+A.key+"</span>"):R.append("<span>"+A.key+"</span>"),u(this.container).append(R),this._highlight(i,R)}}},{key:"open",value:function(){var s=this.el.value.toLowerCase();this._resetAutocomplete(),s.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,s)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(s){var i=this.el.value.toLowerCase();this.options.data=s,this.isOpen&&this._renderDropdown(s,i)}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Autocomplete}},{key:"defaults",get:function(){return p}}]),d}();b._keydown=!1,M.Autocomplete=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"autocomplete","M_Autocomplete")}(cash),function(u){M.updateTextFields=function(){u("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(p,b){var k=u(this);0<p.value.length||u(p).is(":focus")||p.autofocus||k.attr("placeholder")!==null?k.siblings("label").addClass("active"):p.validity?k.siblings("label").toggleClass("active",p.validity.badInput===!0):k.siblings("label").removeClass("active")})},M.validate_field=function(p){var b=p.attr("data-length")!==null,k=parseInt(p.attr("data-length")),d=p[0].value.length;d!==0||p[0].validity.badInput!==!1||p.is(":required")?p.hasClass("validate")&&(p.is(":valid")&&b&&d<=k||p.is(":valid")&&!b?(p.removeClass("invalid"),p.addClass("valid")):(p.removeClass("valid"),p.addClass("invalid"))):p.hasClass("validate")&&(p.removeClass("valid"),p.removeClass("invalid"))},M.textareaAutoResize=function(p){if(p instanceof Element&&(p=u(p)),p.length){var b=u(".hiddendiv").first();b.length||(b=u('<div class="hiddendiv common"></div>'),u("body").append(b));var k=p.css("font-family"),d=p.css("font-size"),s=p.css("line-height"),i=p.css("padding-top"),a=p.css("padding-right"),c=p.css("padding-bottom"),y=p.css("padding-left");d&&b.css("font-size",d),k&&b.css("font-family",k),s&&b.css("line-height",s),i&&b.css("padding-top",i),a&&b.css("padding-right",a),c&&b.css("padding-bottom",c),y&&b.css("padding-left",y),p.data("original-height")||p.data("original-height",p.height()),p.attr("wrap")==="off"&&b.css("overflow-wrap","normal").css("white-space","pre"),b.text(p[0].value+`
`);var C=b.html().replace(/\n/g,"<br>");b.html(C),0<p[0].offsetWidth&&0<p[0].offsetHeight?b.css("width",p.width()+"px"):b.css("width",window.innerWidth/2+"px"),p.data("original-height")<=b.innerHeight()?p.css("height",b.innerHeight()+"px"):p[0].value.length<p.data("previous-length")&&p.css("height",p.data("original-height")+"px"),p.data("previous-length",p[0].value.length)}else console.error("No textarea element found")},u(document).ready(function(){var p="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";u(document).on("change",p,function(){this.value.length===0&&u(this).attr("placeholder")===null||u(this).siblings("label").addClass("active"),M.validate_field(u(this))}),u(document).ready(function(){M.updateTextFields()}),u(document).on("reset",function(k){var d=u(k.target);d.is("form")&&(d.find(p).removeClass("valid").removeClass("invalid"),d.find(p).each(function(s){this.value.length&&u(this).siblings("label").removeClass("active")}),setTimeout(function(){d.find("select").each(function(){this.M_FormSelect&&u(this).trigger("change")})},0))}),document.addEventListener("focus",function(k){u(k.target).is(p)&&u(k.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(k){var d=u(k.target);if(d.is(p)){var s=".prefix";d[0].value.length===0&&d[0].validity.badInput!==!0&&d.attr("placeholder")===null&&(s+=", label"),d.siblings(s).removeClass("active"),M.validate_field(d)}},!0),u(document).on("keyup","input[type=radio], input[type=checkbox]",function(k){if(k.which===M.keys.TAB)return u(this).addClass("tabbed"),void u(this).one("blur",function(d){u(this).removeClass("tabbed")})});var b=".materialize-textarea";u(b).each(function(){var k=u(this);k.data("original-height",k.height()),k.data("previous-length",this.value.length),M.textareaAutoResize(k)}),u(document).on("keyup",b,function(){M.textareaAutoResize(u(this))}),u(document).on("keydown",b,function(){M.textareaAutoResize(u(this))}),u(document).on("change",'.file-field input[type="file"]',function(){for(var k=u(this).closest(".file-field").find("input.file-path"),d=u(this)[0].files,s=[],i=0;i<d.length;i++)s.push(d[i].name);k[0].value=s.join(", "),k.trigger("change")})})}(cash),function(u,p){var b={indicators:!0,height:400,duration:500,interval:6e3},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_Slider=c).options=u.extend({},s.defaults,a),c.$slider=c.$el.find(".slides"),c.$slides=c.$slider.children("li"),c.activeIndex=c.$slides.filter(function(y){return u(y).hasClass("active")}).first().index(),c.activeIndex!=-1&&(c.$active=c.$slides.eq(c.activeIndex)),c._setSliderHeight(),c.$slides.find(".caption").each(function(y){c._animateCaptionIn(y,0)}),c.$slides.find("img").each(function(y){var C="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";u(y).attr("src")!==C&&(u(y).css("background-image",'url("'+u(y).attr("src")+'")'),u(y).attr("src",C))}),c._setupIndicators(),c.$active?c.$active.css("display","block"):(c.$slides.first().addClass("active"),p({targets:c.$slides.first()[0],opacity:1,duration:c.options.duration,easing:"easeOutQuad"}),c.activeIndex=0,c.$active=c.$slides.eq(c.activeIndex),c.options.indicators&&c.$indicators.eq(c.activeIndex).addClass("active")),c.$active.find("img").each(function(y){p({targets:c.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:c.options.duration,easing:"easeOutQuad"})}),c._setupEventHandlers(),c.start(),c}return l(s,f),n(s,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var i=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(a){a.addEventListener("click",i._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var i=this;this.options.indicators&&this.$indicators.each(function(a){a.removeEventListener("click",i._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(i){var a=u(i.target).index();this.set(a)}},{key:"_handleInterval",value:function(){var i=this.$slider.find(".active").index();this.$slides.length===i+1?i=0:i+=1,this.set(i)}},{key:"_animateCaptionIn",value:function(i,a){var c={targets:i,opacity:0,duration:a,easing:"easeOutQuad"};u(i).hasClass("center-align")?c.translateY=-100:u(i).hasClass("right-align")?c.translateX=100:u(i).hasClass("left-align")&&(c.translateX=-100),p(c)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var i=this;this.options.indicators&&(this.$indicators=u('<ul class="indicators"></ul>'),this.$slides.each(function(a,c){var y=u('<li class="indicator-item"></li>');i.$indicators.append(y[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(i){var a=this;if(i>=this.$slides.length?i=0:i<0&&(i=this.$slides.length-1),this.activeIndex!=i){this.$active=this.$slides.eq(this.activeIndex);var c=this.$active.find(".caption");this.$active.removeClass("active"),p({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){a.$slides.not(".active").each(function(y){p({targets:y,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(c[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(i).addClass("active")),p({targets:this.$slides.eq(i)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),p({targets:this.$slides.eq(i).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(i).addClass("active"),this.activeIndex=i,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var i=this.activeIndex+1;i>=this.$slides.length?i=0:i<0&&(i=this.$slides.length-1),this.set(i)}},{key:"prev",value:function(){var i=this.activeIndex-1;i>=this.$slides.length?i=0:i<0&&(i=this.$slides.length-1),this.set(i)}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Slider}},{key:"defaults",get:function(){return b}}]),s}();M.Slider=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"slider","M_Slider")}(cash,M.anime),function(u,p){u(document).on("click",".card",function(b){if(u(this).children(".card-reveal").length){var k=u(b.target).closest(".card");k.data("initialOverflow")===void 0&&k.data("initialOverflow",k.css("overflow")===void 0?"":k.css("overflow"));var d=u(this).find(".card-reveal");u(b.target).is(u(".card-reveal .card-title"))||u(b.target).is(u(".card-reveal .card-title i"))?p({targets:d[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(s){var i=s.animatables[0].target;u(i).css({display:"none"}),k.css("overflow",k.data("initialOverflow"))}}):(u(b.target).is(u(".card .activator"))||u(b.target).is(u(".card .activator i")))&&(k.css("overflow","hidden"),d.css({display:"block"}),p({targets:d[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(u){var p={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return(a.el.M_Chips=a).options=u.extend({},d.defaults,i),a.$el.addClass("chips input-field"),a.chipsData=[],a.$chips=u(),a._setupInput(),a.hasAutocomplete=0<Object.keys(a.options.autocompleteOptions).length,a.$input.attr("id")||a.$input.attr("id",M.guid()),a.options.data.length&&(a.chipsData=a.options.data,a._renderChips(a.chipsData)),a.hasAutocomplete&&a._setupAutocomplete(),a._setPlaceholder(),a._setupLabel(),a._setupEventHandlers(),a}return l(d,f),n(d,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",d._handleChipsKeydown),document.addEventListener("keyup",d._handleChipsKeyup),this.el.addEventListener("blur",d._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",d._handleChipsKeydown),document.removeEventListener("keyup",d._handleChipsKeyup),this.el.removeEventListener("blur",d._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(s){var i=u(s.target).closest(".chip"),a=u(s.target).is(".close");if(i.length){var c=i.index();a?(this.deleteChip(c),this.$input[0].focus()):this.selectChip(c)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(s){if(d._keydown=!0,s.keyCode===13){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;s.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else s.keyCode!==8&&s.keyCode!==37||this.$input[0].value!==""||!this.chipsData.length||(s.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(s){if(s.tag){var i=document.createElement("div"),a=document.createElement("i");if(i.classList.add("chip"),i.textContent=s.tag,i.setAttribute("tabindex",0),u(a).addClass("material-icons close"),a.textContent="close",s.image){var c=document.createElement("img");c.setAttribute("src",s.image),i.insertBefore(c,i.firstChild)}return i.appendChild(a),i}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var s=0;s<this.chipsData.length;s++){var i=this._renderChip(this.chipsData[s]);this.$el.append(i),this.$chips.add(i)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var s=this;this.options.autocompleteOptions.onAutocomplete=function(i){s.addChip({tag:i}),s.$input[0].value="",s.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=u("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){this.chipsData!==void 0&&!this.chipsData.length&&this.options.placeholder?u(this.$input).prop("placeholder",this.options.placeholder):(this.chipsData===void 0||this.chipsData.length)&&this.options.secondaryPlaceholder&&u(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(s){if(s.hasOwnProperty("tag")&&s.tag!==""){for(var i=!1,a=0;a<this.chipsData.length;a++)if(this.chipsData[a].tag===s.tag){i=!0;break}return!i}return!1}},{key:"addChip",value:function(s){if(this._isValid(s)&&!(this.chipsData.length>=this.options.limit)){var i=this._renderChip(s);this.$chips.add(i),this.chipsData.push(s),u(this.$input).before(i),this._setPlaceholder(),typeof this.options.onChipAdd=="function"&&this.options.onChipAdd.call(this,this.$el,i)}}},{key:"deleteChip",value:function(s){var i=this.$chips.eq(s);this.$chips.eq(s).remove(),this.$chips=this.$chips.filter(function(a){return 0<=u(a).index()}),this.chipsData.splice(s,1),this._setPlaceholder(),typeof this.options.onChipDelete=="function"&&this.options.onChipDelete.call(this,this.$el,i[0])}},{key:"selectChip",value:function(s){var i=this.$chips.eq(s);(this._selectedChip=i)[0].focus(),typeof this.options.onChipSelect=="function"&&this.options.onChipSelect.call(this,this.$el,i[0])}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Chips}},{key:"_handleChipsKeydown",value:function(s){d._keydown=!0;var i=u(s.target).closest(".chips"),a=s.target&&i.length;if(!u(s.target).is("input, textarea")&&a){var c=i[0].M_Chips;if(s.keyCode===8||s.keyCode===46){s.preventDefault();var y=c.chipsData.length;if(c._selectedChip){var C=c._selectedChip.index();c.deleteChip(C),c._selectedChip=null,y=Math.max(C-1,0)}c.chipsData.length&&c.selectChip(y)}else if(s.keyCode===37){if(c._selectedChip){var O=c._selectedChip.index()-1;if(O<0)return;c.selectChip(O)}}else if(s.keyCode===39&&c._selectedChip){var A=c._selectedChip.index()+1;A>=c.chipsData.length?c.$input[0].focus():c.selectChip(A)}}}},{key:"_handleChipsKeyup",value:function(s){d._keydown=!1}},{key:"_handleChipsBlur",value:function(s){d._keydown||(u(s.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return p}}]),d}();b._keydown=!1,M.Chips=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"chips","M_Chips"),u(document).ready(function(){u(document.body).on("click",".chip .close",function(){var k=u(this).closest(".chips");k.length&&k[0].M_Chips||u(this).closest(".chip").remove()})})}(cash),function(u){var p={top:0,bottom:1/0,offset:0,onPositionChange:null},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return(a.el.M_Pushpin=a).options=u.extend({},d.defaults,i),a.originalOffset=a.el.offsetTop,d._pushpins.push(a),a._setupEventHandlers(),a._updatePosition(),a}return l(d,f),n(d,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var s=d._pushpins.indexOf(this);d._pushpins.splice(s,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",d._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",d._updateElements)}},{key:"_updatePosition",value:function(){var s=M.getDocumentScrollTop()+this.options.offset;this.options.top<=s&&this.options.bottom>=s&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pinned")),s<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-top")),s>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px",typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Pushpin}},{key:"_updateElements",value:function(){for(var s in d._pushpins)d._pushpins[s]._updatePosition()}},{key:"defaults",get:function(){return p}}]),d}();b._pushpins=[],M.Pushpin=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"pushpin","M_Pushpin")}(cash),function(u,p){var b={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};u.fn.reverse=[].reverse;var k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_FloatingActionButton=c).options=u.extend({},s.defaults,a),c.isOpen=!1,c.$anchor=c.$el.children("a").first(),c.$menu=c.$el.children("ul").first(),c.$floatingBtns=c.$el.find("ul .btn-floating"),c.$floatingBtnsReverse=c.$el.find("ul .btn-floating").reverse(),c.offsetY=0,c.offsetX=0,c.$el.addClass("direction-"+c.options.direction),c.options.direction==="top"?c.offsetY=40:c.options.direction==="right"?c.offsetX=-40:c.options.direction==="bottom"?c.offsetY=-40:c.offsetX=40,c._setupEventHandlers(),c}return l(s,f),n(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(i){u(i.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var i=this;this.$el.addClass("active");var a=0;this.$floatingBtnsReverse.each(function(c){p({targets:c,opacity:1,scale:[.4,1],translateY:[i.offsetY,0],translateX:[i.offsetX,0],duration:275,delay:a,easing:"easeInOutQuad"}),a+=40})}},{key:"_animateOutFAB",value:function(){var i=this;this.$floatingBtnsReverse.each(function(a){p.remove(a),p({targets:a,opacity:0,scale:.4,translateY:i.offsetY,translateX:i.offsetX,duration:175,easing:"easeOutQuad",complete:function(){i.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var i,a=this,c=window.innerWidth,y=window.innerHeight,C=this.el.getBoundingClientRect(),O=u('<div class="fab-backdrop"></div>'),A=this.$anchor.css("background-color");this.$anchor.append(O),this.offsetX=C.left-c/2+C.width/2,this.offsetY=y-C.bottom,i=c/O[0].clientWidth,this.btnBottom=C.bottom,this.btnLeft=C.left,this.btnWidth=C.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),O.css({"background-color":A}),setTimeout(function(){a.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),a.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){a.$el.css({overflow:"hidden","background-color":A}),O.css({transform:"scale("+i+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),a.$menu.children("li").children("a").css({opacity:1}),a._handleDocumentClickBound=a._handleDocumentClick.bind(a),window.addEventListener("scroll",a._handleCloseBound,!0),document.body.addEventListener("click",a._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var i=this,a=window.innerWidth,c=window.innerHeight,y=this.$el.find(".fab-backdrop"),C=this.$anchor.css("background-color");this.offsetX=this.btnLeft-a/2+this.btnWidth/2,this.offsetY=c-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),y.css({transform:"scale(0)","background-color":C}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){y.remove(),i.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-i.offsetX+"px,0,0)"}),i.$anchor.css({overflow:"",transform:"translate3d(0,"+i.offsetY+"px,0)"}),setTimeout(function(){i.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),i.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_FloatingActionButton}},{key:"defaults",get:function(){return b}}]),s}();M.FloatingActionButton=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(u){var p={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"",nextMonth:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));(a.el.M_Datepicker=a).options=u.extend({},d.defaults,i),i&&i.hasOwnProperty("i18n")&&typeof i.i18n=="object"&&(a.options.i18n=u.extend({},d.defaults.i18n,i.i18n)),a.options.minDate&&a.options.minDate.setHours(0,0,0,0),a.options.maxDate&&a.options.maxDate.setHours(0,0,0,0),a.id=M.guid(),a._setupVariables(),a._insertHTMLIntoDOM(),a._setupModal(),a._setupEventHandlers(),a.options.defaultDate||(a.options.defaultDate=new Date(Date.parse(a.el.value)));var c=a.options.defaultDate;return d._isDate(c)?a.options.setDefaultDate?(a.setDate(c,!0),a.setInputValue()):a.gotoDate(c):a.gotoDate(new Date),a.isOpen=!1,a}return l(d,f),n(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),u(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var s=this.calendarEl.querySelector(".orig-select-year");s&&M.FormSelect.getInstance(s).destroy();var i=this.calendarEl.querySelector(".orig-select-month");i&&M.FormSelect.getInstance(i).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(u(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var s=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){s.isOpen=!1}})}},{key:"toString",value:function(s){var i=this;return s=s||this.options.format,d._isDate(this.date)?s.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(a){return i.formats[a]?i.formats[a]():a}).join(""):""}},{key:"setDate",value:function(s,i){if(!s)return this.date=null,this._renderDateDisplay(),this.draw();if(typeof s=="string"&&(s=new Date(Date.parse(s))),d._isDate(s)){var a=this.options.minDate,c=this.options.maxDate;d._isDate(a)&&s<a?s=a:d._isDate(c)&&c<s&&(s=c),this.date=new Date(s.getTime()),this._renderDateDisplay(),d._setToStartOfDay(this.date),this.gotoDate(this.date),i||typeof this.options.onSelect!="function"||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var s=d._isDate(this.date)?this.date:new Date,i=this.options.i18n,a=i.weekdaysShort[s.getDay()],c=i.monthsShort[s.getMonth()],y=s.getDate();this.yearTextEl.innerHTML=s.getFullYear(),this.dateTextEl.innerHTML=a+", "+c+" "+y}},{key:"gotoDate",value:function(s){var i=!0;if(d._isDate(s)){if(this.calendars){var a=new Date(this.calendars[0].year,this.calendars[0].month,1),c=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),y=s.getTime();c.setMonth(c.getMonth()+1),c.setDate(c.getDate()-1),i=y<a.getTime()||c.getTime()<y}i&&(this.calendars=[{month:s.getMonth(),year:s.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(s){return s.month<0&&(s.year-=Math.ceil(Math.abs(s.month)/12),s.month+=12),11<s.month&&(s.year+=Math.floor(Math.abs(s.month)/12),s.month-=12),s}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(s,i,a){var c=this.options,y=new Date,C=d._getDaysInMonth(s,i),O=new Date(s,i,1).getDay(),A=[],R=[];d._setToStartOfDay(y),0<c.firstDay&&(O-=c.firstDay)<0&&(O+=7);for(var H=i===0?11:i-1,N=i===11?0:i+1,F=i===0?s-1:s,ce=i===11?s+1:s,z=d._getDaysInMonth(F,H),Y=C+O,se=Y;7<se;)se-=7;Y+=7-se;for(var oe=!1,Z=0,be=0;Z<Y;Z++){var te=new Date(s,i,Z-O+1),Ce=!!d._isDate(this.date)&&d._compareDates(te,this.date),Ne=d._compareDates(te,y),$e=c.events.indexOf(te.toDateString())!==-1,We=Z<O||C+O<=Z,J=Z-O+1,Oe=i,xe=s,Ae=c.startRange&&d._compareDates(c.startRange,te),ue=c.endRange&&d._compareDates(c.endRange,te),Me=c.startRange&&c.endRange&&c.startRange<te&&te<c.endRange;We&&(Z<O?(J=z+J,Oe=H,xe=F):(J-=C,Oe=N,xe=ce));var qe={day:J,month:Oe,year:xe,hasEvent:$e,isSelected:Ce,isToday:Ne,isDisabled:c.minDate&&te<c.minDate||c.maxDate&&te>c.maxDate||c.disableWeekends&&d._isWeekend(te)||c.disableDayFn&&c.disableDayFn(te),isEmpty:We,isStartRange:Ae,isEndRange:ue,isInRange:Me,showDaysInNextAndPreviousMonths:c.showDaysInNextAndPreviousMonths};R.push(this.renderDay(qe)),++be==7&&(A.push(this.renderRow(R,c.isRTL,oe)),be=0,oe=!(R=[]))}return this.renderTable(c,A,a)}},{key:"renderDay",value:function(s){var i=[],a="false";if(s.isEmpty){if(!s.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';i.push("is-outside-current-month"),i.push("is-selection-disabled")}return s.isDisabled&&i.push("is-disabled"),s.isToday&&i.push("is-today"),s.isSelected&&(i.push("is-selected"),a="true"),s.hasEvent&&i.push("has-event"),s.isInRange&&i.push("is-inrange"),s.isStartRange&&i.push("is-startrange"),s.isEndRange&&i.push("is-endrange"),'<td data-day="'+s.day+'" class="'+i.join(" ")+'" aria-selected="'+a+'"><button class="datepicker-day-button" type="button" data-year="'+s.year+'" data-month="'+s.month+'" data-day="'+s.day+'">'+s.day+"</button></td>"}},{key:"renderRow",value:function(s,i,a){return'<tr class="datepicker-row'+(a?" is-selected":"")+'">'+(i?s.reverse():s).join("")+"</tr>"}},{key:"renderTable",value:function(s,i,a){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+a+'">'+this.renderHead(s)+this.renderBody(i)+"</table></div>"}},{key:"renderHead",value:function(s){var i=void 0,a=[];for(i=0;i<7;i++)a.push('<th scope="col"><abbr title="'+this.renderDayName(s,i)+'">'+this.renderDayName(s,i,!0)+"</abbr></th>");return"<thead><tr>"+(s.isRTL?a.reverse():a).join("")+"</tr></thead>"}},{key:"renderBody",value:function(s){return"<tbody>"+s.join("")+"</tbody>"}},{key:"renderTitle",value:function(s,i,a,c,y,C){var O,A,R=void 0,H=void 0,N=void 0,F=this.options,ce=a===F.minYear,z=a===F.maxYear,Y='<div id="'+C+'" class="datepicker-controls" role="heading" aria-live="assertive">',se=!0,oe=!0;for(N=[],R=0;R<12;R++)N.push('<option value="'+(a===y?R-i:12+R-i)+'"'+(R===c?' selected="selected"':"")+(ce&&R<F.minMonth||z&&R>F.maxMonth?'disabled="disabled"':"")+">"+F.i18n.months[R]+"</option>");for(O='<select class="datepicker-select orig-select-month" tabindex="-1">'+N.join("")+"</select>",u.isArray(F.yearRange)?(R=F.yearRange[0],H=F.yearRange[1]+1):(R=a-F.yearRange,H=1+a+F.yearRange),N=[];R<H&&R<=F.maxYear;R++)R>=F.minYear&&N.push('<option value="'+R+'" '+(R===a?'selected="selected"':"")+">"+R+"</option>");return A='<select class="datepicker-select orig-select-year" tabindex="-1">'+N.join("")+"</select>",Y+='<button class="month-prev'+(se?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',Y+='<div class="selects-container">',F.showMonthAfterYear?Y+=A+O:Y+=O+A,Y+="</div>",ce&&(c===0||F.minMonth>=c)&&(se=!1),z&&(c===11||F.maxMonth<=c)&&(oe=!1),(Y+='<button class="month-next'+(oe?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(s){if(this.isOpen||s){var i,a=this.options,c=a.minYear,y=a.maxYear,C=a.minMonth,O=a.maxMonth,A="";this._y<=c&&(this._y=c,!isNaN(C)&&this._m<C&&(this._m=C)),this._y>=y&&(this._y=y,!isNaN(O)&&this._m>O&&(this._m=O)),i="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var R=0;R<1;R++)this._renderDateDisplay(),A+=this.renderTitle(this,R,this.calendars[R].year,this.calendars[R].month,this.calendars[0].year,i)+this.render(this.calendars[R].year,this.calendars[R].month,i);this.destroySelects(),this.calendarEl.innerHTML=A;var H=this.calendarEl.querySelector(".orig-select-year"),N=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(H,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(N,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),H.addEventListener("change",this._handleYearChange.bind(this)),N.addEventListener("change",this._handleMonthChange.bind(this)),typeof this.options.onDraw=="function"&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var s=this;this.$modalEl=u(d._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return s.date.getDate()},dd:function(){var i=s.date.getDate();return(i<10?"0":"")+i},ddd:function(){return s.options.i18n.weekdaysShort[s.date.getDay()]},dddd:function(){return s.options.i18n.weekdays[s.date.getDay()]},m:function(){return s.date.getMonth()+1},mm:function(){var i=s.date.getMonth()+1;return(i<10?"0":"")+i},mmm:function(){return s.options.i18n.monthsShort[s.date.getMonth()]},mmmm:function(){return s.options.i18n.months[s.date.getMonth()]},yy:function(){return(""+s.date.getFullYear()).slice(2)},yyyy:function(){return s.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(s){s.which===M.keys.ENTER&&(s.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(s){if(this.isOpen){var i=u(s.target);i.hasClass("is-disabled")||(!i.hasClass("datepicker-day-button")||i.hasClass("is-empty")||i.parent().hasClass("is-disabled")?i.closest(".month-prev").length?this.prevMonth():i.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(s.target.getAttribute("data-year"),s.target.getAttribute("data-month"),s.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(s){this.gotoMonth(s.target.value)}},{key:"_handleYearChange",value:function(s){this.gotoYear(s.target.value)}},{key:"gotoMonth",value:function(s){isNaN(s)||(this.calendars[0].month=parseInt(s,10),this.adjustCalendars())}},{key:"gotoYear",value:function(s){isNaN(s)||(this.calendars[0].year=parseInt(s,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(s){var i=void 0;s.firedBy!==this&&(i=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),d._isDate(i)&&this.setDate(i))}},{key:"renderDayName",value:function(s,i,a){for(i+=s.firstDay;7<=i;)i-=7;return a?s.i18n.weekdaysAbbrev[i]:s.i18n.weekdays[i]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,typeof this.options.onOpen=="function"&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,typeof this.options.onClose=="function"&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"_isDate",value:function(s){return/Date/.test(Object.prototype.toString.call(s))&&!isNaN(s.getTime())}},{key:"_isWeekend",value:function(s){var i=s.getDay();return i===0||i===6}},{key:"_setToStartOfDay",value:function(s){d._isDate(s)&&s.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(s,i){return[31,d._isLeapYear(s)?29:28,31,30,31,30,31,31,30,31,30,31][i]}},{key:"_isLeapYear",value:function(s){return s%4==0&&s%100!=0||s%400==0}},{key:"_compareDates",value:function(s,i){return s.getTime()===i.getTime()}},{key:"_setToStartOfDay",value:function(s){d._isDate(s)&&s.setHours(0,0,0,0)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Datepicker}},{key:"defaults",get:function(){return p}}]),d}();b._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"datepicker","M_Datepicker")}(cash),function(u){var p={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return(a.el.M_Timepicker=a).options=u.extend({},d.defaults,i),a.id=M.guid(),a._insertHTMLIntoDOM(),a._setupModal(),a._setupVariables(),a._setupEventHandlers(),a._clockSetup(),a._pickerSetup(),a}return l(d,f),n(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),u(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),u(this.spanHours).on("click",this.showView.bind(this,"hours")),u(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(s){s.which===M.keys.ENTER&&(s.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(s){s.preventDefault();var i=this.plate.getBoundingClientRect(),a=i.left,c=i.top;this.x0=a+this.options.dialRadius,this.y0=c+this.options.dialRadius,this.moved=!1;var y=d._Pos(s);this.dx=y.x-this.x0,this.dy=y.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(s){s.preventDefault();var i=d._Pos(s),a=i.x-this.x0,c=i.y-this.y0;this.moved=!0,this.setHand(a,c,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(s){var i=this;s.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var a=d._Pos(s),c=a.x-this.x0,y=a.y-this.y0;this.moved&&c===this.dx&&y===this.dy&&this.setHand(c,y),this.currentView==="hours"?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(u(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){i.done()},this.options.duration/2)),typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=u(d._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var s=document.querySelector(this.options.container);this.options.container&&s?this.$modalEl.appendTo(s):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var s=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){typeof s.options.onCloseEnd=="function"&&s.options.onCloseEnd.call(s),s.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var s=u('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&s.css({visibility:""});var i=u('<div class="confirmation-btns"></div>');u('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(i).on("click",this.close.bind(this)),u('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(i).on("click",this.done.bind(this)),i.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=u('<div class="am-btn">AM</div>'),this.$pmBtn=u('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var s=this.options.dialRadius,i=this.options.tickRadius,a=2*s,c=d._createSVGEl("svg");c.setAttribute("class","timepicker-svg"),c.setAttribute("width",a),c.setAttribute("height",a);var y=d._createSVGEl("g");y.setAttribute("transform","translate("+s+","+s+")");var C=d._createSVGEl("circle");C.setAttribute("class","timepicker-canvas-bearing"),C.setAttribute("cx",0),C.setAttribute("cy",0),C.setAttribute("r",4);var O=d._createSVGEl("line");O.setAttribute("x1",0),O.setAttribute("y1",0);var A=d._createSVGEl("circle");A.setAttribute("class","timepicker-canvas-bg"),A.setAttribute("r",i),y.appendChild(O),y.appendChild(A),y.appendChild(C),c.appendChild(y),this._canvas.appendChild(c),this.hand=O,this.bg=A,this.bearing=C,this.g=y}},{key:"_buildHoursView",value:function(){var s=u('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var i=1;i<13;i+=1){var a=s.clone(),c=i/6*Math.PI,y=this.options.outerRadius;a.css({left:this.options.dialRadius+Math.sin(c)*y-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(c)*y-this.options.tickRadius+"px"}),a.html(i===0?"00":i),this.hoursView.appendChild(a[0])}else for(var C=0;C<24;C+=1){var O=s.clone(),A=C/6*Math.PI,R=0<C&&C<13?this.options.innerRadius:this.options.outerRadius;O.css({left:this.options.dialRadius+Math.sin(A)*R-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(A)*R-this.options.tickRadius+"px"}),O.html(C===0?"00":C),this.hoursView.appendChild(O[0])}}},{key:"_buildMinutesView",value:function(){for(var s=u('<div class="timepicker-tick"></div>'),i=0;i<60;i+=5){var a=s.clone(),c=i/30*Math.PI;a.css({left:this.options.dialRadius+Math.sin(c)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(c)*this.options.outerRadius-this.options.tickRadius+"px"}),a.html(d._addLeadingZero(i)),this.minutesView.appendChild(a[0])}}},{key:"_handleAmPmClick",value:function(s){var i=u(s.target);this.amOrPm=i.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary",this.amOrPm==="AM"),this.$pmBtn.toggleClass("text-primary",this.amOrPm==="PM"))}},{key:"_updateTimeFromInput",value:function(){var s=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&s[1]!==void 0&&(0<s[1].toUpperCase().indexOf("AM")?this.amOrPm="AM":this.amOrPm="PM",s[1]=s[1].replace("AM","").replace("PM","")),s[0]==="now"){var i=new Date(+new Date+this.options.fromNow);s=[i.getHours(),i.getMinutes()],this.options.twelveHour&&(this.amOrPm=12<=s[0]&&s[0]<24?"PM":"AM")}this.hours=+s[0]||0,this.minutes=+s[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=d._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(s,i){s==="minutes"&&u(this.hoursView).css("visibility");var a=s==="hours",c=a?this.hoursView:this.minutesView,y=a?this.minutesView:this.hoursView;this.currentView=s,u(this.spanHours).toggleClass("text-primary",a),u(this.spanMinutes).toggleClass("text-primary",!a),y.classList.add("timepicker-dial-out"),u(c).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(i),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){u(y).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(s){var i=this.currentView,a=this[i],c=i==="hours",y=a*(Math.PI/(c?6:30)),C=c&&0<a&&a<13?this.options.innerRadius:this.options.outerRadius,O=Math.sin(y)*C,A=-Math.cos(y)*C,R=this;s?(u(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){u(R.canvas).removeClass("timepicker-canvas-out"),R.setHand(O,A)},s)):this.setHand(O,A)}},{key:"setHand",value:function(s,i,a){var c=this,y=Math.atan2(s,-i),C=this.currentView==="hours",O=Math.PI/(C||a?6:30),A=Math.sqrt(s*s+i*i),R=C&&A<(this.options.outerRadius+this.options.innerRadius)/2,H=R?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(H=this.options.outerRadius),y<0&&(y=2*Math.PI+y);var N=Math.round(y/O);y=N*O,this.options.twelveHour?C?N===0&&(N=12):(a&&(N*=5),N===60&&(N=0)):C?(N===12&&(N=0),N=R?N===0?12:N:N===0?0:N+12):(a&&(N*=5),N===60&&(N=0)),this[this.currentView]!==N&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){c.vibrateTimer=null},100))),this[this.currentView]=N,C?this.spanHours.innerHTML=N:this.spanMinutes.innerHTML=d._addLeadingZero(N);var F=Math.sin(y)*(H-this.options.tickRadius),ce=-Math.cos(y)*(H-this.options.tickRadius),z=Math.sin(y)*H,Y=-Math.cos(y)*H;this.hand.setAttribute("x2",F),this.hand.setAttribute("y2",ce),this.bg.setAttribute("cx",z),this.bg.setAttribute("cy",Y)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(s,i){var a=this.el.value,c=i?"":d._addLeadingZero(this.hours)+":"+d._addLeadingZero(this.minutes);this.time=c,!i&&this.options.twelveHour&&(c=c+" "+this.amOrPm),(this.el.value=c)!==a&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"_addLeadingZero",value:function(s){return(s<10?"0":"")+s}},{key:"_createSVGEl",value:function(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}},{key:"_Pos",value:function(s){return s.targetTouches&&1<=s.targetTouches.length?{x:s.targetTouches[0].clientX,y:s.targetTouches[0].clientY}:{x:s.clientX,y:s.clientY}}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Timepicker}},{key:"defaults",get:function(){return p}}]),d}();b._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"timepicker","M_Timepicker")}(cash),function(u){var p={},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return(a.el.M_CharacterCounter=a).options=u.extend({},d.defaults,i),a.isInvalid=!1,a.isValidLength=!1,a._setupCounter(),a._setupEventHandlers(),a}return l(d,f),n(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),u(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){u(this.counterEl).remove()}},{key:"updateCounter",value:function(){var s=+this.$el.attr("data-length"),i=this.el.value.length;this.isValidLength=i<=s;var a=i;s&&(a+="/"+s,this._validateInput()),u(this.counterEl).html(a)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_CharacterCounter}},{key:"defaults",get:function(){return p}}]),d}();M.CharacterCounter=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"characterCounter","M_CharacterCounter")}(cash),function(u){var p={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return(a.el.M_Carousel=a).options=u.extend({},d.defaults,i),a.hasMultipleSlides=1<a.$el.find(".carousel-item").length,a.showIndicators=a.options.indicators&&a.hasMultipleSlides,a.noWrap=a.options.noWrap||!a.hasMultipleSlides,a.pressed=!1,a.dragged=!1,a.offset=a.target=0,a.images=[],a.itemWidth=a.$el.find(".carousel-item").first().innerWidth(),a.itemHeight=a.$el.find(".carousel-item").first().innerHeight(),a.dim=2*a.itemWidth+a.options.padding||1,a._autoScrollBound=a._autoScroll.bind(a),a._trackBound=a._track.bind(a),a.options.fullWidth&&(a.options.dist=0,a._setCarouselHeight(),a.showIndicators&&a.$el.find(".carousel-fixed-item").addClass("with-indicators")),a.$indicators=u('<ul class="indicators"></ul>'),a.$el.find(".carousel-item").each(function(c,y){if(a.images.push(c),a.showIndicators){var C=u('<li class="indicator-item"></li>');y===0&&C[0].classList.add("active"),a.$indicators.append(C)}}),a.showIndicators&&a.$el.append(a.$indicators),a.count=a.images.length,a.options.numVisible=Math.min(a.count,a.options.numVisible),a.xform="transform",["webkit","Moz","O","ms"].every(function(c){var y=c+"Transform";return document.body.style[y]===void 0||(a.xform=y,!1)}),a._setupEventHandlers(),a._scroll(a.offset),a}return l(d,f),n(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var s=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),window.ontouchstart!==void 0&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(a,c){a.addEventListener("click",s._handleIndicatorClickBound)}));var i=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=i.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var s=this;window.ontouchstart!==void 0&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(i,a){i.removeEventListener("click",s._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(s){s.type==="mousedown"&&u(s.target).is("img")&&s.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(s),this.referenceY=this._ypos(s),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(s){var i=void 0,a=void 0,c=void 0;if(this.pressed)if(i=this._xpos(s),a=this._ypos(s),c=this.reference-i,Math.abs(this.referenceY-a)<30&&!this.verticalDragged)(2<c||c<-2)&&(this.dragged=!0,this.reference=i,this._scroll(this.offset+c));else{if(this.dragged)return s.preventDefault(),s.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return s.preventDefault(),s.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(s){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(10<this.velocity||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(s.preventDefault(),s.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(s){if(this.dragged)return s.preventDefault(),s.stopPropagation(),!1;if(!this.options.fullWidth){var i=u(s.target).closest(".carousel-item").index();this._wrap(this.center)-i!==0&&(s.preventDefault(),s.stopPropagation()),this._cycleTo(i)}}},{key:"_handleIndicatorClick",value:function(s){s.stopPropagation();var i=u(s.target).closest(".indicator-item");i.length&&this._cycleTo(i.index())}},{key:"_handleResize",value:function(s){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(s){var i=this,a=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),c=a.find("img").first();if(c.length)if(c[0].complete){var y=c.height();if(0<y)this.$el.css("height",y+"px");else{var C=c[0].naturalWidth,O=c[0].naturalHeight,A=this.$el.width()/C*O;this.$el.css("height",A+"px")}}else c.one("load",function(H,N){i.$el.css("height",H.offsetHeight+"px")});else if(!s){var R=a.height();this.$el.css("height",R+"px")}}},{key:"_xpos",value:function(s){return s.targetTouches&&1<=s.targetTouches.length?s.targetTouches[0].clientX:s.clientX}},{key:"_ypos",value:function(s){return s.targetTouches&&1<=s.targetTouches.length?s.targetTouches[0].clientY:s.clientY}},{key:"_wrap",value:function(s){return s>=this.count?s%this.count:s<0?this._wrap(this.count+s%this.count):s}},{key:"_track",value:function(){var s,i,a,c;i=(s=Date.now())-this.timestamp,this.timestamp=s,a=this.offset-this.frame,this.frame=this.offset,c=1e3*a/(1+i),this.velocity=.8*c+.2*this.velocity}},{key:"_autoScroll",value:function(){var s=void 0,i=void 0;this.amplitude&&(s=Date.now()-this.timestamp,2<(i=this.amplitude*Math.exp(-s/this.options.duration))||i<-2?(this._scroll(this.target-i),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(s){var i=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),this.scrollingTimeout!=null&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){i.$el.removeClass("scrolling")},this.options.duration);var a,c,y,C,O=void 0,A=void 0,R=void 0,H=void 0,N=void 0,F=void 0,ce=this.center,z=1/this.options.numVisible;if(this.offset=typeof s=="number"?s:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),C=-(y=(c=this.offset-this.center*this.dim)<0?1:-1)*c*2/this.dim,a=this.count>>1,this.options.fullWidth?(R="translateX(0)",F=1):(R="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",R+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",F=1-z*C),this.showIndicators){var Y=this.center%this.count,se=this.$indicators.find(".indicator-item.active");se.index()!==Y&&(se.removeClass("active"),this.$indicators.find(".indicator-item").eq(Y)[0].classList.add("active"))}if(!this.noWrap||0<=this.center&&this.center<this.count){A=this.images[this._wrap(this.center)],u(A).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),A.classList.add("active"));var oe=R+" translateX("+-c/2+"px) translateX("+y*this.options.shift*C*O+"px) translateZ("+this.options.dist*C+"px)";this._updateItemStyle(A,F,0,oe)}for(O=1;O<=a;++O){if(this.options.fullWidth?(H=this.options.dist,N=O===a&&c<0?1-C:1):(H=this.options.dist*(2*O+C*y),N=1-z*(2*O+C*y)),!this.noWrap||this.center+O<this.count){A=this.images[this._wrap(this.center+O)];var Z=R+" translateX("+(this.options.shift+(this.dim*O-c)/2)+"px) translateZ("+H+"px)";this._updateItemStyle(A,N,-O,Z)}if(this.options.fullWidth?(H=this.options.dist,N=O===a&&0<c?1-C:1):(H=this.options.dist*(2*O-C*y),N=1-z*(2*O-C*y)),!this.noWrap||0<=this.center-O){A=this.images[this._wrap(this.center-O)];var be=R+" translateX("+(-this.options.shift+(-this.dim*O-c)/2)+"px) translateZ("+H+"px)";this._updateItemStyle(A,N,-O,be)}}if(!this.noWrap||0<=this.center&&this.center<this.count){A=this.images[this._wrap(this.center)];var te=R+" translateX("+-c/2+"px) translateX("+y*this.options.shift*C+"px) translateZ("+this.options.dist*C+"px)";this._updateItemStyle(A,F,0,te)}var Ce=this.$el.find(".carousel-item").eq(this._wrap(this.center));ce!==this.center&&typeof this.options.onCycleTo=="function"&&this.options.onCycleTo.call(this,Ce[0],this.dragged),typeof this.oneTimeCallback=="function"&&(this.oneTimeCallback.call(this,Ce[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(s,i,a,c){s.style[this.xform]=c,s.style.zIndex=a,s.style.opacity=i,s.style.visibility="visible"}},{key:"_cycleTo",value:function(s,i){var a=this.center%this.count-s;this.noWrap||(a<0?Math.abs(a+this.count)<Math.abs(a)&&(a+=this.count):0<a&&Math.abs(a-this.count)<a&&(a-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),a<0?this.target+=this.dim*Math.abs(a):0<a&&(this.target-=this.dim*a),typeof i=="function"&&(this.oneTimeCallback=i),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(s){(s===void 0||isNaN(s))&&(s=1);var i=this.center+s;if(i>=this.count||i<0){if(this.noWrap)return;i=this._wrap(i)}this._cycleTo(i)}},{key:"prev",value:function(s){(s===void 0||isNaN(s))&&(s=1);var i=this.center-s;if(i>=this.count||i<0){if(this.noWrap)return;i=this._wrap(i)}this._cycleTo(i)}},{key:"set",value:function(s,i){if((s===void 0||isNaN(s))&&(s=0),s>this.count||s<0){if(this.noWrap)return;s=this._wrap(s)}this._cycleTo(s,i)}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Carousel}},{key:"defaults",get:function(){return p}}]),d}();M.Carousel=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"carousel","M_Carousel")}(cash),function(u){var p={onOpen:void 0,onClose:void 0},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return(a.el.M_TapTarget=a).options=u.extend({},d.defaults,i),a.isOpen=!1,a.$origin=u("#"+a.$el.attr("data-target")),a._setup(),a._calculatePositioning(),a._setupEventHandlers(),a}return l(d,f),n(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var s=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=s.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(s){this.open()}},{key:"_handleOriginClick",value:function(s){this.close()}},{key:"_handleResize",value:function(s){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(s){u(s.target).closest(".tap-target-wrapper").length||(this.close(),s.preventDefault(),s.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=u(this.wrapper).find(".tap-target-wave")[0],this.originEl=u(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],u(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(u(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var s=this.$origin.css("position")==="fixed";if(!s)for(var i=this.$origin.parents(),a=0;a<i.length&&!(s=u(i[a]).css("position")=="fixed");a++);var c=this.$origin.outerWidth(),y=this.$origin.outerHeight(),C=s?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,O=s?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,A=window.innerWidth,R=window.innerHeight,H=A/2,N=R/2,F=O<=H,ce=H<O,z=C<=N,Y=N<C,se=.25*A<=O&&O<=.75*A,oe=this.$el.outerWidth(),Z=this.$el.outerHeight(),be=C+y/2-Z/2,te=O+c/2-oe/2,Ce=s?"fixed":"absolute",Ne=se?oe:oe/2+c,$e=Z/2,We=z?Z/2:0,J=F&&!se?oe/2-c:0,Oe=c,xe=Y?"bottom":"top",Ae=2*c,ue=Ae,Me=Z/2-ue/2,qe=oe/2-Ae/2,E={};E.top=z?be+"px":"",E.right=ce?A-te-oe+"px":"",E.bottom=Y?R-be-Z+"px":"",E.left=F?te+"px":"",E.position=Ce,u(this.wrapper).css(E),u(this.contentEl).css({width:Ne+"px",height:$e+"px",top:We+"px",right:"0px",bottom:"0px",left:J+"px",padding:Oe+"px",verticalAlign:xe}),u(this.waveEl).css({top:Me+"px",left:qe+"px",width:Ae+"px",height:ue+"px"})}},{key:"open",value:function(){this.isOpen||(typeof this.options.onOpen=="function"&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&(typeof this.options.onClose=="function"&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_TapTarget}},{key:"defaults",get:function(){return p}}]),d}();M.TapTarget=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"tapTarget","M_TapTarget")}(cash),function(u){var p={classes:"",dropdownOptions:{}},b=function(k){function d(s,i){h(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,s,i));return a.$el.hasClass("browser-default")?r(a):((a.el.M_FormSelect=a).options=u.extend({},d.defaults,i),a.isMultiple=a.$el.prop("multiple"),a.el.tabIndex=-1,a._keysSelected={},a._valueDict={},a._setupDropdown(),a._setupEventHandlers(),a)}return l(d,f),n(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var s=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),u(this.dropdownOptions).find("li:not(.optgroup)").each(function(i){i.addEventListener("click",s._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var s=this;u(this.dropdownOptions).find("li:not(.optgroup)").each(function(i){i.removeEventListener("click",s._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(s){this._setValueToInput()}},{key:"_handleOptionClick",value:function(s){s.preventDefault();var i=u(s.target).closest("li")[0],a=i.id;if(!u(i).hasClass("disabled")&&!u(i).hasClass("optgroup")&&a.length){var c=!0;if(this.isMultiple){var y=u(this.dropdownOptions).find("li.disabled.selected");y.length&&(y.removeClass("selected"),y.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(y[0].id)),c=this._toggleEntryFromArray(a)}else u(this.dropdownOptions).find("li").removeClass("selected"),u(i).toggleClass("selected",c);u(this._valueDict[a].el).prop("selected")!==c&&(u(this._valueDict[a].el).prop("selected",c),this.$el.trigger("change"))}s.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var s=this;this.wrapper=document.createElement("div"),u(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(u(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),u(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(c){if(u(c).is("option")){var y=void 0;y=s.isMultiple?s._appendOptionWithIcon(s.$el,c,"multiple"):s._appendOptionWithIcon(s.$el,c),s._addOptionToValueDict(c,y)}else if(u(c).is("optgroup")){var C=u(c).children("option");u(s.dropdownOptions).append(u('<li class="optgroup"><span>'+c.getAttribute("label")+"</span></li>")[0]),C.each(function(O){var A=s._appendOptionWithIcon(s.$el,O,"optgroup-option");s._addOptionToValueDict(O,A)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),u(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&u(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var i=u('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(i[0]),!this.el.disabled){var a=u.extend({},this.options.dropdownOptions);a.onOpenEnd=function(c){var y=u(s.dropdownOptions).find(".selected").first();if(s.dropdown.isScrollable&&y.length){var C=y[0].getBoundingClientRect().top-s.dropdownOptions.getBoundingClientRect().top;C-=s.dropdownOptions.clientHeight/2,s.dropdownOptions.scrollTop=C}},this.isMultiple&&(a.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,a)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(s,i){var a=Object.keys(this._valueDict).length,c=this.dropdownOptions.id+a,y={};i.id=c,y.el=s,y.optionEl=i,this._valueDict[c]=y}},{key:"_removeDropdown",value:function(){u(this.wrapper).find(".caret").remove(),u(this.input).remove(),u(this.dropdownOptions).remove(),u(this.wrapper).before(this.$el),u(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(s,i,a){var c=i.disabled?"disabled ":"",y=a==="optgroup-option"?"optgroup-option ":"",C=this.isMultiple?'<label><input type="checkbox"'+c+'"/><span>'+i.innerHTML+"</span></label>":i.innerHTML,O=u("<li></li>"),A=u("<span></span>");A.html(C),O.addClass(c+" "+y),O.append(A);var R=i.getAttribute("data-icon");if(R){var H=u('<img alt="" src="'+R+'">');O.prepend(H)}return u(this.dropdownOptions).append(O[0]),O[0]}},{key:"_toggleEntryFromArray",value:function(s){var i=!this._keysSelected.hasOwnProperty(s),a=u(this._valueDict[s].optionEl);return i?this._keysSelected[s]=!0:delete this._keysSelected[s],a.toggleClass("selected",i),a.find('input[type="checkbox"]').prop("checked",i),a.prop("selected",i),i}},{key:"_setValueToInput",value:function(){var s=[];if(this.$el.find("option").each(function(a){if(u(a).prop("selected")){var c=u(a).text();s.push(c)}}),!s.length){var i=this.$el.find("option:disabled").eq(0);i.length&&i[0].value===""&&s.push(i.text())}this.input.value=s.join(", ")}},{key:"_setSelectedStates",value:function(){for(var s in this._keysSelected={},this._valueDict){var i=this._valueDict[s],a=u(i.el).prop("selected");u(i.optionEl).find('input[type="checkbox"]').prop("checked",a),a?(this._activateOption(u(this.dropdownOptions),u(i.optionEl)),this._keysSelected[s]=!0):u(i.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(s,i){i&&(this.isMultiple||s.find("li.selected").removeClass("selected"),u(i).addClass("selected"))}},{key:"getSelectedValues",value:function(){var s=[];for(var i in this._keysSelected)s.push(this._valueDict[i].el.value);return s}}],[{key:"init",value:function(s,i){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,s,i)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_FormSelect}},{key:"defaults",get:function(){return p}}]),d}();M.FormSelect=b,M.jQueryLoaded&&M.initializeJqueryWrapper(b,"formSelect","M_FormSelect")}(cash),function(u,p){var b={},k=function(d){function s(i,a){h(this,s);var c=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,i,a));return(c.el.M_Range=c).options=u.extend({},s.defaults,a),c._mousedown=!1,c._setupThumb(),c._setupEventHandlers(),c}return l(s,f),n(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){u(this.value).html(this.$el.val()),u(this.thumb).hasClass("active")||this._showRangeBubble();var i=this._calcRangeOffset();u(this.thumb).addClass("active").css("left",i+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(i){if(u(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),u(this.thumb).hasClass("active")||this._showRangeBubble(),i.type!=="input"){var a=this._calcRangeOffset();u(this.thumb).addClass("active").css("left",a+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){u(this.thumb).hasClass("active")||this._showRangeBubble();var i=this._calcRangeOffset();u(this.thumb).addClass("active").css("left",i+"px"),u(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var i=7+parseInt(this.$el.css("padding-left"))+"px";u(this.thumb).hasClass("active")&&(p.remove(this.thumb),p({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:i,duration:100})),u(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),u(this.thumb).addClass("thumb"),u(this.value).addClass("value"),u(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){u(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var i=-7+parseInt(u(this.thumb).parent().css("padding-left"))+"px";p.remove(this.thumb),p({targets:this.thumb,height:30,width:30,top:-30,marginLeft:i,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var i=this.$el.width()-15,a=parseFloat(this.$el.attr("max"))||100,c=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-c)/(a-c)*i}}],[{key:"init",value:function(i,a){return t(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,i,a)}},{key:"getInstance",value:function(i){return(i.jquery?i[0]:i).M_Range}},{key:"defaults",get:function(){return b}}]),s}();M.Range=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"range","M_Range"),k.init(u("input[type=range]"))}(cash,M.anime)})($n,$n.exports);const Wi=o=>{let e;return o?e=o:typeof fetch>"u"?e=(...t)=>et(async()=>{const{default:n}=await Promise.resolve().then(()=>vt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class bn extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class qi extends bn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class An extends bn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bn extends bn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var rn;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(rn||(rn={}));var Ui=function(o,e,t,n){function r(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(w){try{m(n.next(w))}catch(T){h(T)}}function v(w){try{m(n.throw(w))}catch(T){h(T)}}function m(w){w.done?l(w.value):r(w.value).then(f,v)}m((n=n.apply(o,e||[])).next())})};class Fi{constructor(e,{headers:t={},customFetch:n,region:r=rn.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Wi(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Ui(this,void 0,void 0,function*(){try{const{headers:r,method:l,body:h}=t;let f={},{region:v}=t;v||(v=this.region);const m=new URL(`${this.url}/${e}`);v&&v!=="any"&&(f["x-region"]=v,m.searchParams.set("forceFunctionRegion",v));let w;h&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=h):typeof h=="string"?(f["Content-Type"]="text/plain",w=h):typeof FormData<"u"&&h instanceof FormData?w=h:(f["Content-Type"]="application/json",w=JSON.stringify(h)));const T=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),r),body:w}).catch(u=>{throw new qi(u)}),L=T.headers.get("x-relay-error");if(L&&L==="true")throw new An(T);if(!T.ok)throw new Bn(T);let I=((n=T.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),W;return I==="application/json"?W=yield T.json():I==="application/octet-stream"?W=yield T.blob():I==="text/event-stream"?W=T:I==="multipart/form-data"?W=yield T.formData():W=yield T.text(),{data:W,error:null,response:T}}catch(r){return{data:null,error:r,response:r instanceof Bn||r instanceof An?r.context:void 0}}})}}var Se={},kn={},Wt={},Mt={},qt={},Ut={},zi=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ft=zi();const Vi=ft.fetch,oi=ft.fetch.bind(ft),ri=ft.Headers,Ki=ft.Request,Ji=ft.Response,vt=Object.freeze(Object.defineProperty({__proto__:null,Headers:ri,Request:Ki,Response:Ji,default:oi,fetch:Vi},Symbol.toStringTag,{value:"Module"})),Qi=Ni(vt);var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});let Xi=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ft.default=Xi;var ai=we&&we.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ut,"__esModule",{value:!0});const Gi=ai(Qi),Yi=ai(Ft);let Zi=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Gi.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var h,f,v,m;let w=null,T=null,L=null,I=l.status,W=l.statusText;if(l.ok){if(this.method!=="HEAD"){const k=await l.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?T=k:T=JSON.parse(k))}const p=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),b=(v=l.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");p&&b&&b.length>1&&(L=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(w={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,L=null,I=406,W="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const p=await l.text();try{w=JSON.parse(p),Array.isArray(w)&&l.status===404&&(T=[],w=null,I=200,W="OK")}catch{l.status===404&&p===""?(I=204,W="No Content"):w={message:p}}if(w&&this.isMaybeSingle&&(!((m=w==null?void 0:w.details)===null||m===void 0)&&m.includes("0 rows"))&&(w=null,I=200,W="OK"),w&&this.shouldThrowOnError)throw new Yi.default(w)}return{error:w,data:T,count:L,status:I,statusText:W}});return this.shouldThrowOnError||(r=r.catch(l=>{var h,f,v;return{error:{message:`${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(f=l==null?void 0:l.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(v=l==null?void 0:l.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};Ut.default=Zi;var es=we&&we.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(qt,"__esModule",{value:!0});const ts=es(Ut);let ns=class extends ts.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:l=r}={}){const h=l?`${l}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const l=typeof r>"u"?"offset":`${r}.offset`,h=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(h,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:l=!1,format:h="text"}={}){var f;const v=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${m}"; options=${v};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};qt.default=ns;var is=we&&we.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Mt,"__esModule",{value:!0});const ss=is(qt);let os=class extends ss.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let l="";r==="plain"?l="pl":r==="phrase"?l="ph":r==="websearch"&&(l="w");const h=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${l}fts${h}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Mt.default=os;var rs=we&&we.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Wt,"__esModule",{value:!0});const yt=rs(Mt);let as=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let l=!1;const h=(e??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",h),n&&this.headers.append("Prefer",`count=${n}`),new yt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const l="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((f,v)=>f.concat(Object.keys(v)),[]);if(h.length>0){const f=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",f.join(","))}}return new yt.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:l=!0}={}){var h;const f="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const v=e.reduce((m,w)=>m.concat(Object.keys(w)),[]);if(v.length>0){const m=[...new Set(v)].map(w=>`"${w}"`);this.url.searchParams.set("columns",m.join(","))}}return new yt.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new yt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new yt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Wt.default=as;var li=we&&we.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(kn,"__esModule",{value:!0});const ls=li(Wt),cs=li(Mt);let hs=class ci{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new ls.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ci(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:l}={}){var h;let f;const v=new URL(`${this.url}/rpc/${e}`);let m;n||r?(f=n?"HEAD":"GET",Object.entries(t).filter(([T,L])=>L!==void 0).map(([T,L])=>[T,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([T,L])=>{v.searchParams.append(T,L)})):(f="POST",m=t);const w=new Headers(this.headers);return l&&w.set("Prefer",`count=${l}`),new cs.default({method:f,url:v,headers:w,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};kn.default=hs;var gt=we&&we.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Se,"__esModule",{value:!0});Se.PostgrestError=Se.PostgrestBuilder=Se.PostgrestTransformBuilder=Se.PostgrestFilterBuilder=Se.PostgrestQueryBuilder=Se.PostgrestClient=void 0;const hi=gt(kn);Se.PostgrestClient=hi.default;const ui=gt(Wt);Se.PostgrestQueryBuilder=ui.default;const di=gt(Mt);Se.PostgrestFilterBuilder=di.default;const fi=gt(qt);Se.PostgrestTransformBuilder=fi.default;const pi=gt(Ut);Se.PostgrestBuilder=pi.default;const vi=gt(Ft);Se.PostgrestError=vi.default;var us=Se.default={PostgrestClient:hi.default,PostgrestQueryBuilder:ui.default,PostgrestFilterBuilder:di.default,PostgrestTransformBuilder:fi.default,PostgrestBuilder:pi.default,PostgrestError:vi.default};const{PostgrestClient:ds,PostgrestQueryBuilder:Zr,PostgrestFilterBuilder:ea,PostgrestTransformBuilder:ta,PostgrestBuilder:na,PostgrestError:ia}=us;class fs{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,r=parseInt(n.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ps="2.15.5",vs=`realtime-js/${ps}`,gs="1.0.0",an=1e4,ms=1e3,ys=100;var kt;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(kt||(kt={}));var me;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(me||(me={}));var Ie;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Ie||(Ie={}));var ln;(function(o){o.websocket="websocket"})(ln||(ln={}));var Ye;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Ye||(Ye={}));class _s{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),l=t.getUint8(2);let h=this.HEADER_LENGTH+2;const f=n.decode(e.slice(h,h+r));h=h+r;const v=n.decode(e.slice(h,h+l));h=h+l;const m=JSON.parse(n.decode(e.slice(h,e.byteLength)));return{ref:null,topic:f,event:v,payload:m}}}class gi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(le||(le={}));const Dn=(o,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((l,h)=>(l[h]=ws(h,o,e,r),l),{})},ws=(o,e,t,n)=>{const r=e.find(f=>f.name===o),l=r==null?void 0:r.type,h=t[o];return l&&!n.includes(l)?mi(l,h):cn(h)},mi=(o,e)=>{if(o.charAt(0)==="_"){const t=o.slice(1,o.length);return Cs(e,t)}switch(o){case le.bool:return bs(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return ks(e);case le.json:case le.jsonb:return Es(e);case le.timestamp:return Ts(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return cn(e);default:return cn(e)}},cn=o=>o,bs=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},ks=o=>{if(typeof o=="string"){const e=parseFloat(o);if(!Number.isNaN(e))return e}return o},Es=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(e){return console.log(`JSON parse error: ${e}`),o}return o},Cs=(o,e)=>{if(typeof o!="string")return o;const t=o.length-1,n=o[t];if(o[0]==="{"&&n==="}"){let l;const h=o.slice(1,t);try{l=JSON.parse("["+h+"]")}catch{l=h?h.split(","):[]}return l.map(f=>mi(e,f))}return o},Ts=o=>typeof o=="string"?o.replace(" ","T"):o,yi=o=>{let e=o;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Jt{constructor(e,t,n={},r=an){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Pn;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(Pn||(Pn={}));class Et{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:l,onLeave:h,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Et.syncState(this.state,r,l,h),this.pendingDiffs.forEach(v=>{this.state=Et.syncDiff(this.state,v,l,h)}),this.pendingDiffs=[],f()}),this.channel._on(n.diff,{},r=>{const{onJoin:l,onLeave:h,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Et.syncDiff(this.state,r,l,h),f())}),this.onJoin((r,l,h)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:h})}),this.onLeave((r,l,h)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const l=this.cloneDeep(e),h=this.transformState(t),f={},v={};return this.map(l,(m,w)=>{h[m]||(v[m]=w)}),this.map(h,(m,w)=>{const T=l[m];if(T){const L=w.map(p=>p.presence_ref),I=T.map(p=>p.presence_ref),W=w.filter(p=>I.indexOf(p.presence_ref)<0),u=T.filter(p=>L.indexOf(p.presence_ref)<0);W.length>0&&(f[m]=W),u.length>0&&(v[m]=u)}else f[m]=w}),this.syncDiff(l,{joins:f,leaves:v},n,r)}static syncDiff(e,t,n,r){const{joins:l,leaves:h}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(l,(f,v)=>{var m;const w=(m=e[f])!==null&&m!==void 0?m:[];if(e[f]=this.cloneDeep(v),w.length>0){const T=e[f].map(I=>I.presence_ref),L=w.filter(I=>T.indexOf(I.presence_ref)<0);e[f].unshift(...L)}n(f,w,v)}),this.map(h,(f,v)=>{let m=e[f];if(!m)return;const w=v.map(T=>T.presence_ref);m=m.filter(T=>w.indexOf(T.presence_ref)<0),e[f]=m,r(f,m,v),m.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rn;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Rn||(Rn={}));var Ct;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Ct||(Ct={}));var He;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(He||(He={}));class En{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Jt(this,Ie.join,this.params,this.timeout),this.rejoinTimer=new gi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=me.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=me.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ie.reply,{},(r,l)=>{this._trigger(this._replyEventName(l),r)}),this.presence=new Et(this),this.broadcastEndpointURL=yi(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==me.closed){const{config:{broadcast:h,presence:f,private:v}}=this.params,m=(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(I=>I.filter))!==null&&r!==void 0?r:[],w=!!this.bindings[Ct.PRESENCE]&&this.bindings[Ct.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,T={},L={broadcast:h,presence:Object.assign(Object.assign({},f),{enabled:w}),postgres_changes:m,private:v};this.socket.accessTokenValue&&(T.access_token=this.socket.accessTokenValue),this._onError(I=>e==null?void 0:e(He.CHANNEL_ERROR,I)),this._onClose(()=>e==null?void 0:e(He.CLOSED)),this.updateJoinPayload(Object.assign({config:L},T)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:I})=>{var W;if(this.socket.setAuth(),I===void 0){e==null||e(He.SUBSCRIBED);return}else{const u=this.bindings.postgres_changes,p=(W=u==null?void 0:u.length)!==null&&W!==void 0?W:0,b=[];for(let k=0;k<p;k++){const d=u[k],{filter:{event:s,schema:i,table:a,filter:c}}=d,y=I&&I[k];if(y&&y.event===s&&y.schema===i&&y.table===a&&y.filter===c)b.push(Object.assign(Object.assign({},d),{id:y.id}));else{this.unsubscribe(),this.state=me.errored,e==null||e(He.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(He.SUBSCRIBED);return}}).receive("error",I=>{this.state=me.errored,e==null||e(He.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(I).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(He.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===me.joined&&e===Ct.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:h}=e,v={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:h,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=m.body)===null||r===void 0?void 0:r.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var h,f,v;const m=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((v=(f=(h=this.params)===null||h===void 0?void 0:h.config)===null||f===void 0?void 0:f.broadcast)===null||v===void 0)&&v.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=me.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ie.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Jt(this,Ie.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=me.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,l=setTimeout(()=>r.abort(),n),h=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(l),h}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Jt(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ys){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,l;const h=e.toLocaleLowerCase(),{close:f,error:v,leave:m,join:w}=Ie;if(n&&[f,v,m,w].indexOf(h)>=0&&n!==this._joinRef())return;let L=this._onMessage(h,t,n);if(t&&!L)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(I=>{var W,u,p;return((W=I.filter)===null||W===void 0?void 0:W.event)==="*"||((p=(u=I.filter)===null||u===void 0?void 0:u.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===h}).map(I=>I.callback(L,n)):(l=this.bindings[h])===null||l===void 0||l.filter(I=>{var W,u,p,b,k,d;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in I){const s=I.id,i=(W=I.filter)===null||W===void 0?void 0:W.event;return s&&((u=t.ids)===null||u===void 0?void 0:u.includes(s))&&(i==="*"||(i==null?void 0:i.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const s=(k=(b=I==null?void 0:I.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return s==="*"||s===((d=t==null?void 0:t.event)===null||d===void 0?void 0:d.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===h}).map(I=>{if(typeof L=="object"&&"ids"in L){const W=L.data,{schema:u,table:p,commit_timestamp:b,type:k,errors:d}=W;L=Object.assign(Object.assign({},{schema:u,table:p,commit_timestamp:b,eventType:k,new:{},old:{},errors:d}),this._getPayloadRecords(W))}I.callback(L,n)})}_isClosed(){return this.state===me.closed}_isJoined(){return this.state===me.joined}_isJoining(){return this.state===me.joining}_isLeaving(){return this.state===me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),l={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&En.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ie.close,{},e)}_onError(e){this._on(Ie.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Dn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Dn(e.columns,e.old_record)),t}}const Qt=()=>{},$t={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ss=[1e3,2e3,5e3,1e4],Os=1e4,xs=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ms{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=an,this.transport=null,this.heartbeatIntervalMs=$t.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qt,this.ref=0,this.reconnectTimer=null,this.logger=Qt,this.conn=null,this.sendBuffer=[],this.serializer=new _s,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let l;return r?l=r:typeof fetch>"u"?l=(...h)=>et(async()=>{const{default:f}=await Promise.resolve().then(()=>vt);return{default:f}},void 0).then(({default:f})=>f(...h)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...h)=>l(...h)},!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ln.websocket}`,this.httpEndpoint=yi(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fs.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gs}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case kt.connecting:return Ye.Connecting;case kt.open:return Ye.Open;case kt.closing:return Ye.Closing;default:return Ye.Closed}}isConnected(){return this.connectionState()===Ye.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===n);if(r)return r;{const l=new En(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:n,payload:r,ref:l}=e,h=()=>{this.encode(e,f=>{var v;(v=this.conn)===null||v===void 0||v.send(f)})};this.log("push",`${t} ${n} (${l})`,r),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ms,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},$t.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:r,payload:l,ref:h}=t,f=h?`(${h})`:"",v=l.status||"";this.log("receive",`${v} ${n} ${r} ${f}`.trim(),l),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(r,l,h)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ie.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([xs],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const r={access_token:t,version:vs};t&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(Ie.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new gi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$t.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,l,h,f,v,m,w;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:an,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:$t.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(h=e==null?void 0:e.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:Qt,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=e==null?void 0:e.reconnectAfterMs)!==null&&v!==void 0?v:T=>Ss[T-1]||Os,this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:(T,L)=>L(JSON.stringify(T)),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Cn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ye(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Ls extends Cn{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hn extends Cn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Is=function(o,e,t,n){function r(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(w){try{m(n.next(w))}catch(T){h(T)}}function v(w){try{m(n.throw(w))}catch(T){h(T)}}function m(w){w.done?l(w.value):r(w.value).then(f,v)}m((n=n.apply(o,e||[])).next())})};const _i=o=>{let e;return o?e=o:typeof fetch>"u"?e=(...t)=>et(async()=>{const{default:n}=await Promise.resolve().then(()=>vt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},$s=()=>Is(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield et(()=>Promise.resolve().then(()=>vt),void 0)).Response:Response}),un=o=>{if(Array.isArray(o))return o.map(t=>un(t));if(typeof o=="function"||o!==Object(o))return o;const e={};return Object.entries(o).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=un(n)}),e},As=o=>{if(typeof o!="object"||o===null)return!1;const e=Object.getPrototypeOf(o);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var nt=function(o,e,t,n){function r(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(w){try{m(n.next(w))}catch(T){h(T)}}function v(w){try{m(n.throw(w))}catch(T){h(T)}}function m(w){w.done?l(w.value):r(w.value).then(f,v)}m((n=n.apply(o,e||[])).next())})};const Xt=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Bs=(o,e,t)=>nt(void 0,void 0,void 0,function*(){const n=yield $s();o instanceof n&&!(t!=null&&t.noResolveJson)?o.json().then(r=>{const l=o.status||500,h=(r==null?void 0:r.statusCode)||l+"";e(new Ls(Xt(r),l,h))}).catch(r=>{e(new hn(Xt(r),r))}):e(new hn(Xt(o),o))}),Ds=(o,e,t,n)=>{const r={method:o,headers:(e==null?void 0:e.headers)||{}};return o==="GET"||!n?r:(As(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function Lt(o,e,t,n,r,l){return nt(this,void 0,void 0,function*(){return new Promise((h,f)=>{o(t,Ds(e,n,r,l)).then(v=>{if(!v.ok)throw v;return n!=null&&n.noResolveJson?v:v.json()}).then(v=>h(v)).catch(v=>Bs(v,f,n))})})}function jt(o,e,t,n){return nt(this,void 0,void 0,function*(){return Lt(o,"GET",e,t,n)})}function Be(o,e,t,n,r){return nt(this,void 0,void 0,function*(){return Lt(o,"POST",e,n,r,t)})}function dn(o,e,t,n,r){return nt(this,void 0,void 0,function*(){return Lt(o,"PUT",e,n,r,t)})}function Ps(o,e,t,n){return nt(this,void 0,void 0,function*(){return Lt(o,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function wi(o,e,t,n,r){return nt(this,void 0,void 0,function*(){return Lt(o,"DELETE",e,n,r,t)})}var ke=function(o,e,t,n){function r(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(w){try{m(n.next(w))}catch(T){h(T)}}function v(w){try{m(n.throw(w))}catch(T){h(T)}}function m(w){w.done?l(w.value):r(w.value).then(f,v)}m((n=n.apply(o,e||[])).next())})};const Rs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class js{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=_i(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return ke(this,void 0,void 0,function*(){try{let l;const h=Object.assign(Object.assign({},jn),r);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(h.upsert)});const v=h.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),v&&l.append("metadata",this.encodeMetadata(v)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",h.cacheControl),v&&l.append("metadata",this.encodeMetadata(v))):(l=n,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType,v&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(v)))),r!=null&&r.headers&&(f=Object.assign(Object.assign({},f),r.headers));const m=this._removeEmptyFolders(t),w=this._getFinalPath(m),T=yield(e=="PUT"?dn:Be)(this.fetch,`${this.url}/object/${w}`,l,Object.assign({headers:f},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:m,id:T.Id,fullPath:T.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ye(l))return{data:null,error:l};throw l}})}upload(e,t,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return ke(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),h=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${h}`);f.searchParams.set("token",t);try{let v;const m=Object.assign({upsert:jn.upsert},r),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(v=new FormData,v.append("cacheControl",m.cacheControl),v.append("",n)):typeof FormData<"u"&&n instanceof FormData?(v=n,v.append("cacheControl",m.cacheControl)):(v=n,w["cache-control"]=`max-age=${m.cacheControl}`,w["content-type"]=m.contentType);const T=yield dn(this.fetch,f.toString(),v,{headers:w});return{data:{path:l,fullPath:T.Key},error:null}}catch(v){if(this.shouldThrowOnError)throw v;if(ye(v))return{data:null,error:v};throw v}})}createSignedUploadUrl(e,t){return ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const l=yield Be(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),h=new URL(this.url+l.url),f=h.searchParams.get("token");if(!f)throw new Cn("No token returned by API");return{data:{signedUrl:h.toString(),path:e,token:f},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}update(e,t,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ke(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}copy(e,t,n){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield Be(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return ke(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),l=yield Be(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const h=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${h}`)},{data:l,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return ke(this,void 0,void 0,function*(){try{const r=yield Be(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${l}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}download(e,t){return ke(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),h=l?`?${l}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield jt(this.fetch,`${this.url}/${r}/${f}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(ye(f))return{data:null,error:f};throw f}})}info(e){return ke(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield jt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:un(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}exists(e){return ke(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ps(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n)&&n instanceof hn){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&r.push(l);const f=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",v=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});v!==""&&r.push(v);let m=r.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${n}${m}`)}}}remove(e){return ke(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}})}list(e,t,n){return ke(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Rs),t),{prefix:e||""});return{data:yield Be(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}})}listV2(e,t){return ke(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Be(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Hs="2.12.1",Ns={"X-Client-Info":`storage-js/${Hs}`};var st=function(o,e,t,n){function r(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(w){try{m(n.next(w))}catch(T){h(T)}}function v(w){try{m(n.throw(w))}catch(T){h(T)}}function m(w){w.done?l(w.value):r(w.value).then(f,v)}m((n=n.apply(o,e||[])).next())})};class Ws{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const l=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},Ns),t),this.fetch=_i(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return st(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ye(e))return{data:null,error:e};throw e}})}getBucket(e){return st(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return st(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return st(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}})}emptyBucket(e){return st(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}})}deleteBucket(e){return st(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}})}}class qs extends Ws{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new js(this.url,this.headers,e,this.fetch)}}const Us="2.57.4";let _t="";typeof Deno<"u"?_t="deno":typeof document<"u"?_t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_t="react-native":_t="node";const Fs={"X-Client-Info":`supabase-js-${_t}/${Us}`},zs={headers:Fs},Vs={schema:"public"},Ks={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Js={};var Qs=function(o,e,t,n){function r(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(w){try{m(n.next(w))}catch(T){h(T)}}function v(w){try{m(n.throw(w))}catch(T){h(T)}}function m(w){w.done?l(w.value):r(w.value).then(f,v)}m((n=n.apply(o,e||[])).next())})};const Xs=o=>{let e;return o?e=o:typeof fetch>"u"?e=oi:e=fetch,(...t)=>e(...t)},Gs=()=>typeof Headers>"u"?ri:Headers,Ys=(o,e,t)=>{const n=Xs(t),r=Gs();return(l,h)=>Qs(void 0,void 0,void 0,function*(){var f;const v=(f=yield e())!==null&&f!==void 0?f:o;let m=new r(h==null?void 0:h.headers);return m.has("apikey")||m.set("apikey",o),m.has("Authorization")||m.set("Authorization",`Bearer ${v}`),n(l,Object.assign(Object.assign({},h),{headers:m}))})};var Zs=function(o,e,t,n){function r(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(w){try{m(n.next(w))}catch(T){h(T)}}function v(w){try{m(n.throw(w))}catch(T){h(T)}}function m(w){w.done?l(w.value):r(w.value).then(f,v)}m((n=n.apply(o,e||[])).next())})};function eo(o){return o.endsWith("/")?o:o+"/"}function to(o,e){var t,n;const{db:r,auth:l,realtime:h,global:f}=o,{db:v,auth:m,realtime:w,global:T}=e,L={db:Object.assign(Object.assign({},v),r),auth:Object.assign(Object.assign({},m),l),realtime:Object.assign(Object.assign({},w),h),storage:{},global:Object.assign(Object.assign(Object.assign({},T),f),{headers:Object.assign(Object.assign({},(t=T==null?void 0:T.headers)!==null&&t!==void 0?t:{}),(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Zs(this,void 0,void 0,function*(){return""})};return o.accessToken?L.accessToken=o.accessToken:delete L.accessToken,L}function no(o){const e=o==null?void 0:o.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eo(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const bi="2.71.1",ct=30*1e3,fn=3,Gt=fn*ct,io="http://localhost:9999",so="supabase.auth.token",oo={"X-Client-Info":`gotrue-js/${bi}`},pn="X-Supabase-Api-Version",ki={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ro=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ao=10*60*1e3;class Tn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function G(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class lo extends Tn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function co(o){return G(o)&&o.name==="AuthApiError"}class Ei extends Tn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ve extends Tn{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Fe extends Ve{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ho(o){return G(o)&&o.name==="AuthSessionMissingError"}class At extends Ve{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bt extends Ve{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Dt extends Ve{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uo(o){return G(o)&&o.name==="AuthImplicitGrantRedirectError"}class Hn extends Ve{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vn extends Ve{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Yt(o){return G(o)&&o.name==="AuthRetryableFetchError"}class Nn extends Ve{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class gn extends Ve{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wn=` 	
\r=`.split(""),fo=(()=>{const o=new Array(128);for(let e=0;e<o.length;e+=1)o[e]=-1;for(let e=0;e<Wn.length;e+=1)o[Wn[e].charCodeAt(0)]=-2;for(let e=0;e<Ht.length;e+=1)o[Ht[e].charCodeAt(0)]=e;return o})();function qn(o,e,t){if(o!==null)for(e.queue=e.queue<<8|o,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Ht[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Ht[n]),e.queuedBits-=6}}function Ci(o,e,t){const n=fo[o];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Un(o){const e=[],t=h=>{e.push(String.fromCodePoint(h))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=h=>{go(h,n,t)};for(let h=0;h<o.length;h+=1)Ci(o.charCodeAt(h),r,l);return e.join("")}function po(o,e){if(o<=127){e(o);return}else if(o<=2047){e(192|o>>6),e(128|o&63);return}else if(o<=65535){e(224|o>>12),e(128|o>>6&63),e(128|o&63);return}else if(o<=1114111){e(240|o>>18),e(128|o>>12&63),e(128|o>>6&63),e(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function vo(o,e){for(let t=0;t<o.length;t+=1){let n=o.charCodeAt(t);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(o.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}po(n,e)}}function go(o,e,t){if(e.utf8seq===0){if(o<=127){t(o);return}for(let n=1;n<6;n+=1)if(!(o>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=o&31;else if(e.utf8seq===3)e.codepoint=o&15;else if(e.utf8seq===4)e.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|o&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function mo(o){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<o.length;r+=1)Ci(o.charCodeAt(r),t,n);return new Uint8Array(e)}function yo(o){const e=[];return vo(o,t=>e.push(t)),new Uint8Array(e)}function _o(o){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};return o.forEach(r=>qn(r,t,n)),qn(null,t,n),e.join("")}function wo(o){return Math.round(Date.now()/1e3)+o}function bo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const e=Math.random()*16|0;return(o=="x"?e:e&3|8).toString(16)})}const Le=()=>typeof window<"u"&&typeof document<"u",Qe={tested:!1,writable:!1},Ti=()=>{if(!Le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qe.tested)return Qe.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Qe.tested=!0,Qe.writable=!0}catch{Qe.tested=!0,Qe.writable=!1}return Qe.writable};function ko(o){const e={},t=new URL(o);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const Si=o=>{let e;return o?e=o:typeof fetch>"u"?e=(...t)=>et(async()=>{const{default:n}=await Promise.resolve().then(()=>vt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Eo=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",ht=async(o,e,t)=>{await o.setItem(e,JSON.stringify(t))},Xe=async(o,e)=>{const t=await o.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ue=async(o,e)=>{await o.removeItem(e)};class zt{constructor(){this.promise=new zt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}zt.promiseConstructor=Promise;function Zt(o){const e=o.split(".");if(e.length!==3)throw new gn("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!ro.test(e[n]))throw new gn("JWT not in base64url format");return{header:JSON.parse(Un(e[0])),payload:JSON.parse(Un(e[1])),signature:mo(e[2]),raw:{header:e[0],payload:e[1]}}}async function Co(o){return await new Promise(e=>{setTimeout(()=>e(null),o)})}function To(o,e){return new Promise((n,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const h=await o(l);if(!e(l,null,h)){n(h);return}}catch(h){if(!e(l,h)){r(h);return}}})()})}function So(o){return("0"+o.toString(16)).substr(-2)}function Oo(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let l=0;l<56;l++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,So).join("")}async function xo(o){const t=new TextEncoder().encode(o),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function Mo(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const t=await xo(o);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ot(o,e,t=!1){const n=Oo();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await ht(o,`${e}-code-verifier`,r);const l=await Mo(n);return[l,n===l?"plain":"s256"]}const Lo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Io(o){const e=o.headers.get(pn);if(!e||!e.match(Lo))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $o(o){if(!o)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(o<=e)throw new Error("JWT has expired")}function Ao(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function rt(o){if(!Bo.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function en(){const o={};return new Proxy(o,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fn(o){return JSON.parse(JSON.stringify(o))}var Do=function(o,e){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(o);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(o,n[r])&&(t[n[r]]=o[n[r]]);return t};const Ge=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Po=[502,503,504];async function zn(o){var e;if(!Eo(o))throw new vn(Ge(o),0);if(Po.includes(o.status))throw new vn(Ge(o),o.status);let t;try{t=await o.json()}catch(l){throw new Ei(Ge(l),l)}let n;const r=Io(o);if(r&&r.getTime()>=ki["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Nn(Ge(t),o.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Fe}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,h)=>l&&typeof h=="string",!0))throw new Nn(Ge(t),o.status,t.weak_password.reasons);throw new lo(Ge(t),o.status||500,n)}const Ro=(o,e,t,n)=>{const r={method:o,headers:(e==null?void 0:e.headers)||{}};return o==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function ee(o,e,t,n){var r;const l=Object.assign({},n==null?void 0:n.headers);l[pn]||(l[pn]=ki["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const h=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(h.redirect_to=n.redirectTo);const f=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",v=await jo(o,e,t+f,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(v):{data:Object.assign({},v),error:null}}async function jo(o,e,t,n,r,l){const h=Ro(e,n,r,l);let f;try{f=await o(t,Object.assign({},h))}catch(v){throw console.error(v),new vn(Ge(v),0)}if(f.ok||await zn(f),n!=null&&n.noResolveJson)return f;try{return await f.json()}catch(v){await zn(v)}}function je(o){var e;let t=null;qo(o)&&(t=Object.assign({},o),o.expires_at||(t.expires_at=wo(o.expires_in)));const n=(e=o.user)!==null&&e!==void 0?e:o;return{data:{session:t,user:n},error:null}}function Vn(o){const e=je(o);return!e.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=o.weak_password),e}function ze(o){var e;return{data:{user:(e=o.user)!==null&&e!==void 0?e:o},error:null}}function Ho(o){return{data:o,error:null}}function No(o){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:l}=o,h=Do(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:l},v=Object.assign({},h);return{data:{properties:f,user:v},error:null}}function Wo(o){return o}function qo(o){return o.access_token&&o.refresh_token&&o.expires_in}const tn=["global","local","others"];var Uo=function(o,e){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(o);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(o,n[r])&&(t[n[r]]=o[n[r]]);return t};class Fo{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Si(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=tn[0]){if(tn.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tn.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ze})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Uo(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:No,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(G(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ze})}catch(t){if(G(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,l,h,f,v;try{const m={nextPage:null,lastPage:0,total:0},w=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:Wo});if(w.error)throw w.error;const T=await w.json(),L=(h=w.headers.get("x-total-count"))!==null&&h!==void 0?h:0,I=(v=(f=w.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&v!==void 0?v:[];return I.length>0&&(I.forEach(W=>{const u=parseInt(W.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(W.split(";")[1].split("=")[1]);m[`${p}Page`]=u}),m.total=parseInt(L)),{data:Object.assign(Object.assign({},T),m),error:null}}catch(m){if(G(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){rt(e);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ze})}catch(t){if(G(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){rt(e);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ze})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){rt(e);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ze})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){rt(e.userId);try{const{data:t,error:n}=await ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(G(t))return{data:null,error:t};throw t}}async _deleteFactor(e){rt(e.userId),rt(e.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}}}function Kn(o={}){return{getItem:e=>o[e]||null,setItem:(e,t)=>{o[e]=t},removeItem:e=>{delete o[e]}}}function zo(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const at={debug:!!(globalThis&&Ti()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Oi extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Vo extends Oi{}async function Ko(o,e,t){at.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),at.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){at.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,r.name);try{return await t()}finally{at.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,r.name)}}else{if(e===0)throw at.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Vo(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(at.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}zo();const Jo={url:io,storageKey:so,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oo,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jn(o,e,t){return await t()}const lt={};class Ot{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ot.nextInstanceID,Ot.nextInstanceID+=1,this.instanceID>0&&Le()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Jo),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Fo({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Si(r.fetch),this.lock=r.lock||Jn,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Le()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ko:this.lock=Jn,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Ti()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Kn(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Kn(this.memoryStorage)),Le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=lt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){lt[this.storageKey]=Object.assign(Object.assign({},lt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=lt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lt[this.storageKey]=Object.assign(Object.assign({},lt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=ko(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Le()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:l}=await this._getSessionFromURL(t,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),uo(l)){const v=(e=l.details)===null||e===void 0?void 0:e.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:h,redirectType:f}=r;return this._debug("#_initialize()","detected session in URL",h,"redirect type",f),await this._saveSession(h),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return G(t)?{error:t}:{error:new Ei("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:je}),{data:h,error:f}=l;if(f||!h)return{data:{user:null,session:null},error:f};const v=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",v)),{data:{user:m,session:v},error:null}}catch(l){if(G(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,n,r;try{let l;if("email"in e){const{email:w,password:T,options:L}=e;let I=null,W=null;this.flowType==="pkce"&&([I,W]=await ot(this.storage,this.storageKey)),l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:L==null?void 0:L.emailRedirectTo,body:{email:w,password:T,data:(t=L==null?void 0:L.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:L==null?void 0:L.captchaToken},code_challenge:I,code_challenge_method:W},xform:je})}else if("phone"in e){const{phone:w,password:T,options:L}=e;l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:T,data:(n=L==null?void 0:L.data)!==null&&n!==void 0?n:{},channel:(r=L==null?void 0:L.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:L==null?void 0:L.captchaToken}},xform:je})}else throw new Bt("You must provide either an email or phone number and a password");const{data:h,error:f}=l;if(f||!h)return{data:{user:null,session:null},error:f};const v=h.session,m=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",v)),{data:{user:m,session:v},error:null}}catch(l){if(G(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:h,options:f}=e;t=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:h,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vn})}else if("phone"in e){const{phone:l,password:h,options:f}=e;t=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:h,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vn})}else throw new Bt("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new At}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,l,h,f,v,m,w,T,L,I;let W,u;if("message"in e)W=e.message,u=e.signature;else{const{chain:p,wallet:b,statement:k,options:d}=e;let s;if(Le())if(typeof b=="object")s=b;else{const a=window;if("solana"in a&&typeof a.solana=="object"&&("signIn"in a.solana&&typeof a.solana.signIn=="function"||"signMessage"in a.solana&&typeof a.solana.signMessage=="function"))s=a.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(d!=null&&d.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");s=b}const i=new URL((t=d==null?void 0:d.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in s&&s.signIn){const a=await s.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},d==null?void 0:d.signInWithSolana),{version:"1",domain:i.host,uri:i.href}),k?{statement:k}:null));let c;if(Array.isArray(a)&&a[0]&&typeof a[0]=="object")c=a[0];else if(a&&typeof a=="object"&&"signedMessage"in a&&"signature"in a)c=a;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in c&&"signature"in c&&(typeof c.signedMessage=="string"||c.signedMessage instanceof Uint8Array)&&c.signature instanceof Uint8Array)W=typeof c.signedMessage=="string"?c.signedMessage:new TextDecoder().decode(c.signedMessage),u=c.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in s)||typeof s.signMessage!="function"||!("publicKey"in s)||typeof s!="object"||!s.publicKey||!("toBase58"in s.publicKey)||typeof s.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");W=[`${i.host} wants you to sign in with your Solana account:`,s.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${i.href}`,`Issued At: ${(r=(n=d==null?void 0:d.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=d==null?void 0:d.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${d.signInWithSolana.notBefore}`]:[],...!((h=d==null?void 0:d.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${d.signInWithSolana.expirationTime}`]:[],...!((f=d==null?void 0:d.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${d.signInWithSolana.chainId}`]:[],...!((v=d==null?void 0:d.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${d.signInWithSolana.nonce}`]:[],...!((m=d==null?void 0:d.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${d.signInWithSolana.requestId}`]:[],...!((T=(w=d==null?void 0:d.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||T===void 0)&&T.length?["Resources",...d.signInWithSolana.resources.map(c=>`- ${c}`)]:[]].join(`
`);const a=await s.signMessage(new TextEncoder().encode(W),"utf8");if(!a||!(a instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");u=a}}try{const{data:p,error:b}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:W,signature:_o(u)},!((L=e.options)===null||L===void 0)&&L.captchaToken?{gotrue_meta_security:{captcha_token:(I=e.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:je});if(b)throw b;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new At}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:b})}catch(p){if(G(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await Xe(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:l,error:h}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:je});if(await Ue(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new At}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:h})}catch(l){if(G(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:l,nonce:h}=e,f=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:l,nonce:h,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:je}),{data:v,error:m}=f;return m?{data:{user:null,session:null},error:m}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new At}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:v,error:m})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,l,h;try{if("email"in e){const{email:f,options:v}=e;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await ot(this.storage,this.storageKey));const{error:T}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=v==null?void 0:v.data)!==null&&t!==void 0?t:{},create_user:(n=v==null?void 0:v.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:m,code_challenge_method:w},redirectTo:v==null?void 0:v.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in e){const{phone:f,options:v}=e,{data:m,error:w}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},create_user:(l=v==null?void 0:v.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},channel:(h=v==null?void 0:v.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:w}}throw new Bt("You must provide either an email or phone number.")}catch(f){if(G(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var t,n;try{let r,l;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:h,error:f}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:je});if(f)throw f;if(!h)throw new Error("An error occurred on token verification.");const v=h.session,m=h.user;return v!=null&&v.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),{data:{user:m,session:v},error:null}}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let l=null,h=null;return this.flowType==="pkce"&&([l,h]=await ot(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:h}),headers:this.headers,xform:Ho})}catch(l){if(G(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Fe;const{error:r}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(G(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:l}=e,{error:h}=await ee(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in e){const{phone:n,type:r,options:l}=e,{data:h,error:f}=await ee(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:f}}throw new Bt("You must provide either an email or phone number and a type")}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Xe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Gt:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const h=await Xe(this.userStorage,this.storageKey+"-user");h!=null&&h.user?e.user=h.user:e.user=en()}if(this.storage.isServer&&e.user){let h=this.suppressGetSessionWarning;e=new Proxy(e,{get:(v,m,w)=>(!h&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(v,m,w))})}return{data:{session:e},error:null}}const{session:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ze}):await this._useSession(async t=>{var n,r,l;const{data:h,error:f}=t;if(f)throw f;return!(!((n=h.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fe}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=h.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:ze})})}catch(t){if(G(t))return ho(t)&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:l}=n;if(l)throw l;if(!r.session)throw new Fe;const h=r.session;let f=null,v=null;this.flowType==="pkce"&&e.email!=null&&([f,v]=await ot(this.storage,this.storageKey));const{data:m,error:w}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:v}),jwt:h.access_token,xform:ze});if(w)throw w;return h.user=m.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fe;const t=Date.now()/1e3;let n=t,r=!0,l=null;const{payload:h}=Zt(e.access_token);if(h.exp&&(n=h.exp,r=n<=t),r){const{session:f,error:v}=await this._callRefreshToken(e.refresh_token);if(v)return{data:{user:null,session:null},error:v};if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:v}=await this._getUser(e.access_token);if(v)throw v;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(G(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:h,error:f}=t;if(f)throw f;e=(n=h.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Fe;const{session:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Le())throw new Dt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Dt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Hn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dt("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Hn("No code detected.");const{data:k,error:d}=await this._exchangeCodeForSession(e.code);if(d)throw d;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:l,refresh_token:h,expires_in:f,expires_at:v,token_type:m}=e;if(!l||!f||!h||!m)throw new Dt("No session defined in URL");const w=Math.round(Date.now()/1e3),T=parseInt(f);let L=w+T;v&&(L=parseInt(v));const I=L-w;I*1e3<=ct&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${T}s`);const W=L-T;w-W>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",W,L,w):w-W<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",W,L,w);const{data:u,error:p}=await this._getUser(l);if(p)throw p;const b={provider_token:n,provider_refresh_token:r,access_token:l,expires_in:T,expires_at:L,refresh_token:h,token_type:m,user:u.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(G(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Xe(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:l}=t;if(l)return{error:l};const h=(n=r.session)===null||n===void 0?void 0:n.access_token;if(h){const{error:f}=await this.admin.signOut(h,e);if(f&&!(co(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=bo(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:l},error:h}=t;if(h)throw h;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await ot(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(G(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async l=>{var h,f,v,m,w;const{data:T,error:L}=l;if(L)throw L;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(v=e.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",I,{headers:this.headers,jwt:(w=(m=T.session)===null||m===void 0?void 0:m.access_token)!==null&&w!==void 0?w:void 0})});if(r)throw r;return Le()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(G(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:l,error:h}=t;if(h)throw h;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await To(async r=>(r>0&&await Co(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:je})),(r,l)=>{const h=200*Math.pow(2,r);return l&&Yt(l)&&Date.now()+h-n<ct})}catch(n){if(this._debug(t,"error",n),G(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Le()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Xe(this.storage,this.storageKey);if(r&&this.userStorage){let h=await Xe(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:r.user},await ht(this.userStorage,this.storageKey+"-user",h)),r.user=(e=h==null?void 0:h.user)!==null&&e!==void 0?e:en()}else if(r&&!r.user&&!r.user){const h=await Xe(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(r.user=h.user,await Ue(this.storage,this.storageKey+"-user"),await ht(this.storage,this.storageKey,r)):r.user=en()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const l=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Gt;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${Gt}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:h}=await this._callRefreshToken(r.refresh_token);h&&(console.error(h),Yt(h)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:f}=await this._getUser(r.access_token);!f&&(h!=null&&h.user)?(r.user=h.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(n,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Fe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new zt;const{data:l,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!l.session)throw new Fe;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={session:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(r,"error",l),G(l)){const h={session:null,error:l};return Yt(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(h),h}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],h=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(v){l.push(v)}});if(await Promise.all(h),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await ht(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const l=Fn(r);await ht(this.storage,this.storageKey,l)}else{const r=Fn(t);await ht(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Ue(this.storage,this.storageKey),await Ue(this.storage,this.storageKey+"-code-verifier"),await Ue(this.storage,this.storageKey+"-user"),this.userStorage&&await Ue(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ct);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/ct);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${ct}ms, refresh threshold is ${fn} ticks`),r<=fn&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Oi)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,h]=await ot(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(h)}`});r.push(f.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);r.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:l}=t;return l?{data:null,error:l}:await ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:l,error:h}=t;if(h)return{data:null,error:h};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:v,error:m}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((r=v==null?void 0:v.totp)===null||r===void 0)&&r.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),{data:v,error:null})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:l}=t;if(l)return{data:null,error:l};const{data:h,error:f}=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:f})})}catch(t){if(G(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:l}=t;return l?{data:null,error:l}:await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(G(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(h=>h.factor_type==="totp"&&h.status==="verified"),l=n.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:n,totp:r,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:l}=e;if(l)return{data:null,error:l};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Zt(r.access_token);let f=null;h.aal&&(f=h.aal);let v=f;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(T=>T.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(v="aal2");const w=h.amr||[];return{data:{currentLevel:f,nextLevel:v,currentAuthenticationMethods:w},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(f=>f.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(f=>f.kid===e),n&&this.jwks_cached_at+ao>r)return n;const{data:l,error:h}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=r,n=l.keys.find(f=>f.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:I,error:W}=await this.getSession();if(W||!I.session)return{data:null,error:W};n=I.session.access_token}const{header:r,payload:l,signature:h,raw:{header:f,payload:v}}=Zt(n);t!=null&&t.allowExpired||$o(l.exp);const m=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!m){const{error:I}=await this.getUser(n);if(I)throw I;return{data:{claims:l,header:r,signature:h},error:null}}const w=Ao(r.alg),T=await crypto.subtle.importKey("jwk",m,w,!0,["verify"]);if(!await crypto.subtle.verify(w,T,h,yo(`${f}.${v}`)))throw new gn("Invalid JWT signature");return{data:{claims:l,header:r,signature:h},error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}}Ot.nextInstanceID=0;const Qo=Ot;class Xo extends Qo{constructor(e){super(e)}}var Go=function(o,e,t,n){function r(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(w){try{m(n.next(w))}catch(T){h(T)}}function v(w){try{m(n.throw(w))}catch(T){h(T)}}function m(w){w.done?l(w.value):r(w.value).then(f,v)}m((n=n.apply(o,e||[])).next())})};class Yo{constructor(e,t,n){var r,l,h;this.supabaseUrl=e,this.supabaseKey=t;const f=no(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const v=`sb-${f.hostname.split(".")[0]}-auth-token`,m={db:Vs,realtime:Js,auth:Object.assign(Object.assign({},Ks),{storageKey:v}),global:zs},w=to(n??{},m);this.storageKey=(r=w.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(l=w.global.headers)!==null&&l!==void 0?l:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(T,L)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(L)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=w.auth)!==null&&h!==void 0?h:{},this.headers,w.global.fetch),this.fetch=Ys(t,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},w.realtime)),this.rest=new ds(new URL("rest/v1",f).href,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),this.storage=new qs(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),w.accessToken||this._listenForAuthEvents()}get functions(){return new Fi(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Go(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:l,storageKey:h,flowType:f,lock:v,debug:m},w,T){const L={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xo({url:this.authUrl.href,headers:Object.assign(Object.assign({},L),w),storageKey:h,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:l,flowType:f,lock:v,debug:m,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(I=>I.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ms(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zo=(o,e,t)=>new Yo(o,e,t);function er(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const e=o.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}er()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tr="https://wxlhidzlwsfcuqzlixzq.supabase.co",nr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4bGhpZHpsd3NmY3VxemxpeHpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4NzY5ODQsImV4cCI6MjA3MzQ1Mjk4NH0.x5zPd5H6tJB1lMjfVQMVo-LswNOOSJuyqXGmSks-Uc4",ve=Zo(tr,nr,{auth:{persistSession:!0,autoRefreshToken:!0}});const ir=new Set(["Code","Title","Amount","Zone","Type","Supplier","Opened","sheet","Description","Notes","Comment"]);function Sn(o){const e={sheet:o.sheet||o.Sheet||"raw"},t={};for(const[n,r]of Object.entries(o||{}))ir.has(n)?e[n]=r:n!=="_isNew"&&(t[n]=r);return Object.keys(t).length&&(e.extra=t),e}function sr(o){const{extra:e,...t}=o||{};return{...e||{},...t}}async function or(o="raw"){const{data:e,error:t}=await ve.from("items").select("*").eq("sheet",o).order("Title",{ascending:!0});if(t)throw console.error("Supabase fetchItems error",{sheetName:o,error:t}),t;return console.log("Supabase fetchItems ok",{sheetName:o,count:(e||[]).length}),(e||[]).map(sr)}async function Qn(o,e,t){const n=Sn({Code:o,[e]:t}),{data:r,error:l}=await ve.from("items").update(n).eq("Code",o).select("Code");if(l)throw console.error("Supabase updateItem error",{code:o,field:e,value:t,error:l}),l;if(!r||r.length===0)throw new Error("No rows updated. Check permissions (RLS) or Code match.")}async function rr(o,e){const t=Sn(e),{data:n,error:r}=await ve.from("items").update(t).eq("Code",o).select("Code");if(r)throw console.error("Supabase updateRow error",{code:o,row:t,error:r}),r;if(!n||n.length===0)throw new Error("No rows updated. Check permissions (RLS) or Code match.");console.log("Supabase updateRow ok",{code:o,affected:n.length})}async function ar(o){const{data:e,error:t}=await ve.from("items").delete().eq("Code",o).select("Code");if(t)throw console.error("Supabase deleteItem error",{code:o,error:t}),t;if(!e||e.length===0)throw new Error("No rows deleted. Check permissions (RLS) or Code match.");console.log("Supabase deleteItem ok",{code:o,affected:e.length})}async function lr(o){var r;const e=Sn(o),{data:t,error:n}=await ve.from("items").insert(e).select("Code");if(n)throw console.error("Supabase createItem error",{row:e,error:n}),n;if(!t||t.length===0)throw new Error("Insert blocked by RLS. Sign in as editor/admin.");console.log("Supabase createItem ok",{code:(r=t[0])==null?void 0:r.Code})}async function cr(o){try{const{error:e}=await ve.from("auth_settings").upsert({id:1,settings:o},{onConflict:"id"});e&&console.debug("saveAuthSettings error (non-fatal)",e)}catch(e){console.debug("saveAuthSettings failed (ignored)",e)}}const hr="inventory-cache",xi="inventory-role";let pe={items:[],filter:{Zone:[],Type:[],Supplier:[]},selected:null,role:"user"};function tt(o){pe.items=o,localStorage.setItem(hr,JSON.stringify(o))}function dt(){return pe.items}function ur(o){pe.selected=pe.items.find(e=>e.Code===o)||null}function dr(o,e){const t=pe.filter[o]||[];t.includes(e)?pe.filter[o]=t.filter(n=>n!==e):pe.filter[o]=[...t,e]}function On(o){pe.role=o;try{localStorage.setItem(xi,o)}catch{}}function Tt(){if(!pe.role)try{const o=localStorage.getItem(xi);o&&(pe.role=o)}catch{}return pe.role||"user"}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var fr=Object.prototype.toString,mt=Array.isArray||function(e){return fr.call(e)==="[object Array]"};function xn(o){return typeof o=="function"}function pr(o){return mt(o)?"array":typeof o}function nn(o){return o.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Xn(o,e){return o!=null&&typeof o=="object"&&e in o}function vr(o,e){return o!=null&&typeof o!="object"&&o.hasOwnProperty&&o.hasOwnProperty(e)}var gr=RegExp.prototype.test;function mr(o,e){return gr.call(o,e)}var yr=/\S/;function _r(o){return!mr(yr,o)}var wr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function br(o){return String(o).replace(/[&<>"'`=\/]/g,function(t){return wr[t]})}var kr=/\s*/,Er=/\s+/,Gn=/\s*=/,Cr=/\s*\}/,Tr=/#|\^|\/|>|\{|&|=|!/;function Sr(o,e){if(!o)return[];var t=!1,n=[],r=[],l=[],h=!1,f=!1,v="",m=0;function w(){if(h&&!f)for(;l.length;)delete r[l.pop()];else l=[];h=!1,f=!1}var T,L,I;function W(y){if(typeof y=="string"&&(y=y.split(Er,2)),!mt(y)||y.length!==2)throw new Error("Invalid tags: "+y);T=new RegExp(nn(y[0])+"\\s*"),L=new RegExp("\\s*"+nn(y[1])),I=new RegExp("\\s*"+nn("}"+y[1]))}W(e||_e.tags);for(var u=new It(o),p,b,k,d,s,i;!u.eos();){if(p=u.pos,k=u.scanUntil(T),k)for(var a=0,c=k.length;a<c;++a)d=k.charAt(a),_r(d)?(l.push(r.length),v+=d):(f=!0,t=!0,v+=" "),r.push(["text",d,p,p+1]),p+=1,d===`
`&&(w(),v="",m=0,t=!1);if(!u.scan(T))break;if(h=!0,b=u.scan(Tr)||"name",u.scan(kr),b==="="?(k=u.scanUntil(Gn),u.scan(Gn),u.scanUntil(L)):b==="{"?(k=u.scanUntil(I),u.scan(Cr),u.scanUntil(L),b="&"):k=u.scanUntil(L),!u.scan(L))throw new Error("Unclosed tag at "+u.pos);if(b==">"?s=[b,k,p,u.pos,v,m,t]:s=[b,k,p,u.pos],m++,r.push(s),b==="#"||b==="^")n.push(s);else if(b==="/"){if(i=n.pop(),!i)throw new Error('Unopened section "'+k+'" at '+p);if(i[1]!==k)throw new Error('Unclosed section "'+i[1]+'" at '+p)}else b==="name"||b==="{"||b==="&"?f=!0:b==="="&&W(k)}if(w(),i=n.pop(),i)throw new Error('Unclosed section "'+i[1]+'" at '+u.pos);return xr(Or(r))}function Or(o){for(var e=[],t,n,r=0,l=o.length;r<l;++r)t=o[r],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function xr(o){for(var e=[],t=e,n=[],r,l,h=0,f=o.length;h<f;++h)switch(r=o[h],r[0]){case"#":case"^":t.push(r),n.push(r),t=r[4]=[];break;case"/":l=n.pop(),l[5]=r[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(r)}return e}function It(o){this.string=o,this.tail=o,this.pos=0}It.prototype.eos=function(){return this.tail===""};It.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};It.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function pt(o,e){this.view=o,this.cache={".":this.view},this.parent=e}pt.prototype.push=function(e){return new pt(e,this)};pt.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var r=this,l,h,f,v=!1;r;){if(e.indexOf(".")>0)for(l=r.view,h=e.split("."),f=0;l!=null&&f<h.length;)f===h.length-1&&(v=Xn(l,h[f])||vr(l,h[f])),l=l[h[f++]];else l=r.view[e],v=Xn(r.view,e);if(v){n=l;break}r=r.parent}t[e]=n}return xn(n)&&(n=n.call(this.view)),n};function Ee(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Ee.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Ee.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||_e.tags).join(":"),l=typeof n<"u",h=l?n.get(r):void 0;return h==null&&(h=Sr(e,t),l&&n.set(r,h)),h};Ee.prototype.render=function(e,t,n,r){var l=this.getConfigTags(r),h=this.parse(e,l),f=t instanceof pt?t:new pt(t,void 0);return this.renderTokens(h,f,n,e,r)};Ee.prototype.renderTokens=function(e,t,n,r,l){for(var h="",f,v,m,w=0,T=e.length;w<T;++w)m=void 0,f=e[w],v=f[0],v==="#"?m=this.renderSection(f,t,n,r,l):v==="^"?m=this.renderInverted(f,t,n,r,l):v===">"?m=this.renderPartial(f,t,n,l):v==="&"?m=this.unescapedValue(f,t):v==="name"?m=this.escapedValue(f,t,l):v==="text"&&(m=this.rawValue(f)),m!==void 0&&(h+=m);return h};Ee.prototype.renderSection=function(e,t,n,r,l){var h=this,f="",v=t.lookup(e[1]);function m(L){return h.render(L,t,n,l)}if(v){if(mt(v))for(var w=0,T=v.length;w<T;++w)f+=this.renderTokens(e[4],t.push(v[w]),n,r,l);else if(typeof v=="object"||typeof v=="string"||typeof v=="number")f+=this.renderTokens(e[4],t.push(v),n,r,l);else if(xn(v)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");v=v.call(t.view,r.slice(e[3],e[5]),m),v!=null&&(f+=v)}else f+=this.renderTokens(e[4],t,n,r,l);return f}};Ee.prototype.renderInverted=function(e,t,n,r,l){var h=t.lookup(e[1]);if(!h||mt(h)&&h.length===0)return this.renderTokens(e[4],t,n,r,l)};Ee.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),l=e.split(`
`),h=0;h<l.length;h++)l[h].length&&(h>0||!n)&&(l[h]=r+l[h]);return l.join(`
`)};Ee.prototype.renderPartial=function(e,t,n,r){if(n){var l=this.getConfigTags(r),h=xn(n)?n(e[1]):n[e[1]];if(h!=null){var f=e[6],v=e[5],m=e[4],w=h;v==0&&m&&(w=this.indentPartial(h,m,f));var T=this.parse(w,l);return this.renderTokens(T,t,n,w,r)}}};Ee.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};Ee.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||_e.escape,l=t.lookup(e[1]);if(l!=null)return typeof l=="number"&&r===_e.escape?String(l):r(l)};Ee.prototype.rawValue=function(e){return e[1]};Ee.prototype.getConfigTags=function(e){return mt(e)?e:e&&typeof e=="object"?e.tags:void 0};Ee.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!mt(e))return e.escape};var _e={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(o){xt.templateCache=o},get templateCache(){return xt.templateCache}},xt=new Ee;_e.clearCache=function(){return xt.clearCache()};_e.parse=function(e,t){return xt.parse(e,t)};_e.render=function(e,t,n,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+pr(e)+'" was given as the first argument for mustache#render(template, view, partials)');return xt.render(e,t,n,r)};_e.escape=br;_e.Scanner=It;_e.Context=pt;_e.Writer=Ee;const Mr=`<div class="card">
  <div class="card-content">
    <span class="card-title">{{item.Title}}</span>

    {{#longTexts.length}}
    <div class="section">
      {{#longTexts}}
      <p>
        <span class="grey-text text-darken-1">{{label}}:</span>
        <span class="editable" data-field="{{key}}">{{value}}</span>
      </p>
      {{/longTexts}}
      <div class="divider"></div>
    </div>
    {{/longTexts.length}}

    <div class="section">
      <table class="striped highlight">
        <thead>
          <tr><th></th><th></th></tr>
        </thead>
        <tbody>
          {{#mainFields}}
          <tr>
            <td class="grey-text text-darken-1">{{label}}</td>
            <td><span class="editable" data-field="{{key}}">{{value}}</span></td>
          </tr>
          {{/mainFields}}
          {{#otherFields}}
          <tr>
            <td class="grey-text text-darken-1">{{label}}</td>
            <td><span class="editable" data-field="{{key}}">{{value}}</span></td>
          </tr>
          {{/otherFields}}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card-action">
    <a id="saveBtn" class="btn waves-effect waves-light"><i class="material-icons left"></i>save</a>
    <a id="deleteBtn" class="btn-flat red-text text-darken-1"><i class="material-icons left"></i>delete</a>
  </div>
</div>
`;async function St(o,e,t,n={}){try{const r={user_id:(o==null?void 0:o.id)||null,user_email:(o==null?void 0:o.email)||null,action:e,item_code:t||null,changes:n},{error:l}=await ve.from("logs").insert(r);l&&console.debug("logs.insert error (non-fatal)",l)}catch(r){console.debug("logs.insert failed (ignored)",r)}}async function Lr(o=200){try{const{data:e,error:t}=await ve.from("logs").select("*").order("created_at",{ascending:!1}).limit(o);if(t)throw t;return e||[]}catch(e){return console.debug("logs.fetch failed",e),[]}}async function Vt(o,e){try{const t={event:o,user_id:(e==null?void 0:e.id)||null,user_email:(e==null?void 0:e.email)||null},{error:n}=await ve.from("auth_logs").insert(t);n&&console.debug("auth_logs.insert error (non-fatal)",n)}catch(t){console.debug("auth_logs.insert failed (ignored)",t)}}const re={user:null,role:"user"};async function Mi(o){if(!o)return"user";const{data:e,error:t}=await ve.from("profiles").select("role").eq("id",o).maybeSingle();if(t)return"user";const n=((e==null?void 0:e.role)||"user").toLowerCase();return n==="admin"||n==="manager"||n==="user"?n:"user"}async function Ir(){try{const o={supabase_url:"https://wxlhidzlwsfcuqzlixzq.supabase.co",anon_key_present:!0,updated_at:new Date().toISOString(),origin:window.location.origin};await cr(o)}catch{}}async function Ze(){let{data:{user:o}}=await ve.auth.getUser();if(!o)try{const t=`sb-${new URL("https://wxlhidzlwsfcuqzlixzq.supabase.co").host.split(".")[0]}-auth-token`,n=localStorage.getItem(t);if(n){const r=JSON.parse(n);if(r!=null&&r.access_token&&(r!=null&&r.refresh_token)){const{error:l}=await ve.auth.setSession({access_token:r.access_token,refresh_token:r.refresh_token});l||({data:{user:o}}=await ve.auth.getUser())}}}catch(e){console.debug("Auth bootstrap from storage failed",e)}re.user=o||null,re.role=await Mi(o==null?void 0:o.id),On(re.role),console.debug("Auth refresh",{user:!!o,role:re.role});try{await Vt("refresh",o||null)}catch{}try{await Ir()}catch{}return re}function Li(o){Ze().then(()=>o==null?void 0:o(re)),ve.auth.onAuthStateChange(async(e,t)=>{var n;console.debug("Auth state change",{event:e,session:t}),re.user=(t==null?void 0:t.user)||re.user,(n=re.user)!=null&&n.id?re.role=await Mi(re.user.id):await Ze(),On(re.role);try{await Vt(e,re.user||null)}catch{}o==null||o(re)})}async function Ii(o){const{data:e,error:t}=await ve.auth.signInWithOtp({email:o,options:{emailRedirectTo:`${window.location.origin}${window.location.pathname}`,shouldCreateUser:!0}});if(console.debug("Auth signInWithOtp response",{data:e,error:t}),t)throw t}async function $i(o,e){const{data:t,error:n}=await ve.auth.signInWithPassword({email:o,password:e});if(console.debug("Auth signInWithPassword",{ok:!n}),n)throw n;try{await Vt("login",t.user||null)}catch{}}async function Ai(o,e){const{data:t,error:n}=await ve.auth.setSession({access_token:o,refresh_token:e});if(console.debug("Auth signInWithToken",{ok:!n}),n)throw n;try{await Vt("login",(t==null?void 0:t.user)||null)}catch{}}async function $r(){const{error:o}=await ve.auth.signOut();if(console.debug("Auth signOut",{error:o}),o)throw o}async function Bi(){var e;let o=!1;try{const n=new URLSearchParams(window.location.search).get("code");if(n){const{data:r,error:l}=await ve.auth.exchangeCodeForSession(n);console.debug("Auth exchangeCodeForSession",{data:r,error:l}),l||(await Ze(),o=!0)}if(window.location.hash&&window.location.hash.includes("access_token")){const r=new URLSearchParams(window.location.hash.slice(1)),l=r.get("access_token"),h=r.get("refresh_token");if(l&&h){const{data:f,error:v}=await ve.auth.setSession({access_token:l,refresh_token:h});console.debug("Auth setSession from hash",{ok:!v,data:f,error:v}),v||(await Ze(),o=!0)}else await Ze(),o=!0}}catch(t){console.error("Auth redirect handling error",t)}finally{if(!o)try{await Ze(),o=!0}catch(n){console.error("Auth fallback refresh failed",n)}const t=new URL(window.location.href);t.searchParams.delete("code"),t.hash="",window.history.replaceState({},document.title,t.toString());try{re.user&&((e=window.M)!=null&&e.toast)&&window.M.toast({html:`Signed in as ${re.user.email}`,displayLength:2e3})}catch{}}}const Yn=Object.freeze(Object.defineProperty({__proto__:null,authState:re,handleAuthRedirect:Bi,onAuthChange:Li,refreshAuth:Ze,signInWithOtp:Ii,signInWithPassword:$i,signInWithToken:Ai,signOut:$r},Symbol.toStringTag,{value:"Module"})),De=Object.create(null),Ar=new Set(["Description","Notes","Comment","Note","Remarks"]);function sn(o){return{Code:"Code",Title:"Title",Amount:"Amount",Opened:"Opened",Supplier:"Supplier",Zone:"Zone",Type:"Type",Description:"Description",Notes:"Notes",Comment:"Comment"}[o]||o}function Zn(o){const e=o==null?void 0:o.Code,t=e&&De[e]?De[e]:{},n={...o,...t},r=["Description","Notes","Comment"],l=["Title","Amount","Zone","Type","Supplier","Opened","Code"],h=r.filter(m=>n[m]).map(m=>({key:m,label:sn(m),value:String(n[m]??"")})),f=l.filter(m=>m!=="Title"&&n[m]!==void 0).map(m=>({key:m,label:sn(m),value:String(n[m]??"")})),v=Object.keys(n).filter(m=>!r.includes(m)&&!l.includes(m)).sort().map(m=>({key:m,label:sn(m),value:String(n[m]??"")}));return{item:n,longTexts:h,mainFields:f,otherFields:v}}function ei(o,e,t,n,r){const l=t.Code,h=o.querySelector(`.editable[data-field="${CSS.escape(n)}"]`);if(!h)return;const f=document.createElement("span");f.className="inline-edit",f.setAttribute("data-field",n);let v;if(Ar.has(n)){const L=document.createElement("textarea");L.className="inline-input materialize-textarea",L.value=r??"";const I=()=>{L.style.height="auto",L.style.height=L.scrollHeight+"px";try{window.M&&typeof window.M.textareaAutoResize=="function"&&window.M.textareaAutoResize(L)}catch{}};I(),L.addEventListener("input",I),v=L}else{const L=document.createElement("input");L.type=n.toLowerCase().includes("amount")?"number":"text",L.value=r??"",L.className="inline-input",v=L}const m=document.createElement("button");m.textContent="",m.className="inline-ok";const w=document.createElement("button");w.textContent="",w.className="inline-cancel",f.append(v,m,w),h.replaceWith(f),v.focus();const T=L=>{L&&(De[l]||(De[l]={}),De[l][n]=v.value)};m.addEventListener("click",()=>T(!0)),w.addEventListener("click",()=>T(!1)),m.addEventListener("click",()=>ut(e,o,t)),w.addEventListener("click",()=>ut(e,o,t)),v.addEventListener("keydown",L=>{(v.tagName==="INPUT"&&L.key==="Enter"||v.tagName==="TEXTAREA"&&L.key==="Enter"&&(L.ctrlKey||L.metaKey))&&(L.preventDefault(),T(!0),ut(e,o,t)),L.key==="Escape"&&(L.preventDefault(),T(!1),ut(e,o,t))})}function ut(o,e,t){if(!t){e.innerHTML="";return}const n=Zn(t);e.innerHTML=_e.render(o,n),e.querySelectorAll(".editable[data-field]").forEach(h=>{h.addEventListener("click",()=>{const f=h.getAttribute("data-field"),v=h.textContent||"";ei(e,o,t,f,v)})}),e.querySelectorAll("table td").forEach(h=>{const f=h.querySelector(".editable[data-field]");f&&h.addEventListener("click",()=>{if(h.querySelector(".inline-edit"))return;const v=f.getAttribute("data-field"),m=f.textContent||"";ei(e,o,t,v,m)})});const r=e.querySelector("#saveBtn");if(r){const h=Tt();re.user&&(h==="admin"||h==="manager")?r.addEventListener("click",async()=>{var T,L,I,W,u;const v=t.Code;e.querySelectorAll(".inline-edit").forEach(p=>{const b=p.getAttribute("data-field"),k=p.querySelector("input,textarea");b&&k&&(De[v]||(De[v]={}),De[v][b]=k.value)});const m=De[v]||{};if(Object.keys(m).length===0){(T=window.M)!=null&&T.toast&&window.M.toast({html:" ",displayLength:1500});return}let w;try{r.classList.add("disabled"),w=document.createElement("div"),w.className="preloader-wrapper small active",w.innerHTML='<div class="spinner-layer spinner-blue-only"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div>',(L=r.parentNode)==null||L.insertBefore(w,r.nextSibling);const p={...t,...m};delete p._isNew,t._isNew?(await lr(p),await St(re.user,"create",p.Code,{data:{Title:p.Title}})):(await rr(v,p),await St(re.user,"update",v,{changes:m})),tt(dt().map(d=>d.Code===v?p:d)),delete De[v];try{const d=document.querySelector(`tr[data-code="${CSS.escape(v)}"]`);if(d){const i=d.querySelectorAll("td");i[0]&&(i[0].textContent=String(p.Title??"")),i[1]&&(i[1].textContent=String(p.Amount??"")),i[2]&&(i[2].textContent=String(p.Opened??""))}Nt();const s=document.getElementById("quick-search");s&&s.dispatchEvent(new Event("input"))}catch{}const b=dt().find(d=>d.Code===v)||p,k=Zn(b);e.innerHTML=_e.render(o,k),ut(o,e,b),(I=window.M)!=null&&I.toast&&window.M.toast({html:"",displayLength:1500})}catch(p){console.error(p);const b=(p==null?void 0:p.message)||" ";(W=window.M)!=null&&W.toast&&window.M.toast({html:b,displayLength:3e3})}finally{(u=w==null?void 0:w.parentNode)==null||u.removeChild(w),r.classList.remove("disabled")}}):(r.classList.add("disabled"),r.addEventListener("click",v=>{var w;v.preventDefault();const m=re.user?" ":",   ";(w=window.M)!=null&&w.toast&&window.M.toast({html:m,displayLength:2e3})},{once:!0}))}const l=e.querySelector("#deleteBtn");if(l){const h=Tt();re.user&&h==="admin"?l.addEventListener("click",async()=>{var v;try{await ar(t.Code),tt(dt().filter(m=>m.Code!==t.Code)),e.innerHTML="",await St(re.user,"delete",t.Code,{})}catch(m){console.error("Delete failed",m),(v=window.M)!=null&&v.toast&&window.M.toast({html:" ",displayLength:2e3})}}):(l.classList.add("disabled"),l.addEventListener("click",v=>{var w;v.preventDefault();const m=re.user?"   ":",   ";(w=window.M)!=null&&w.toast&&window.M.toast({html:m,displayLength:2e3})},{once:!0}))}}function ti(o,e,t){const n=Tt(),r=n==="admin"||n==="manager",l=n==="admin"||n==="manager"||n==="user",h={items:dt().map(v=>({...v,canEditAmount:r,canDecrement:l}))};e.innerHTML=_e.render(o,h);const f=e.querySelectorAll("tr[data-code]");f.forEach(v=>{v.addEventListener("click",()=>{f.forEach(m=>m.classList.remove("active","selected")),v.classList.add("active","selected"),ur(v.dataset.code),ut(Mr,t,pe.selected)})}),e.querySelectorAll(".amt-dec").forEach(v=>{v.addEventListener("click",async m=>{var u;m.preventDefault(),m.stopPropagation();const w=v.closest("tr[data-code]");if(!w)return;const T=w.getAttribute("data-code"),L=pe.items.find(p=>p.Code===T),I=Number((L==null?void 0:L.Amount)??0)||0,W=Math.max(0,I-1);if(W!==I)try{await Qn(T,"Amount",W),tt(pe.items.map(b=>b.Code===T?{...b,Amount:W}:b));const p=w.querySelector(".amt-text");p&&(p.textContent=String(W)),await St(re.user,"decrement",T,{from:I,to:W})}catch(p){console.error("Amount decrement failed",p),(u=window.M)!=null&&u.toast&&window.M.toast({html:"Failed to update amount",displayLength:2e3})}})}),e.querySelectorAll(".amt-save").forEach(v=>{v.addEventListener("click",async m=>{var p,b,k;if(m.preventDefault(),m.stopPropagation(),!(Tt()==="admin"||Tt()==="manager"))return((p=window.M)==null?void 0:p.toast)&&window.M.toast({html:" ",displayLength:1500});const w=v.closest("tr[data-code]");if(!w)return;const T=w.getAttribute("data-code"),L=w.querySelector(".amt-input"),I=Number((L==null?void 0:L.value)??0)||0,W=pe.items.find(d=>d.Code===T),u=Number((W==null?void 0:W.Amount)??0)||0;try{await Qn(T,"Amount",I),tt(pe.items.map(d=>d.Code===T?{...d,Amount:I}:d)),await St(re.user,"update",T,{field:"Amount",from:u,to:I}),(b=window.M)!=null&&b.toast&&window.M.toast({html:"",displayLength:1200})}catch(d){console.error("Amount save failed",d),(k=window.M)!=null&&k.toast&&window.M.toast({html:" ",displayLength:2e3})}})})}function Nt(){document.querySelectorAll("tr[data-code]").forEach(e=>{const t=e.dataset.code,n=pe.items.find(l=>l.Code===t);let r=!0;for(const l in pe.filter){const h=pe.filter[l];if(h.length>0&&!h.includes(n[l])){r=!1;break}}r?e.classList.remove("hide"):e.classList.add("hide")})}const Br=`<div class="tag-group">
  <div class="tag-title">Zone</div>
  <div class="tag-chips">
    {{#zones}}
    <a href="#" class="chip {{#active}}active selected{{/active}}" data-kind="{{kind}}" data-value="{{value}}">{{label}}</a>
    {{/zones}}
  </div>
</div>

<div class="tag-group">
  <div class="tag-title">Type</div>
  <div class="tag-chips">
    {{#types}}
    <a href="#" class="chip {{#active}}active selected{{/active}}" data-kind="{{kind}}" data-value="{{value}}">{{label}}</a>
    {{/types}}
  </div>
</div>

<div class="tag-group">
  <div class="tag-title">Supplier</div>
  <div class="tag-chips">
    {{#suppliers}}
    <a href="#" class="chip {{#active}}active selected{{/active}}" data-kind="{{kind}}" data-value="{{value}}">{{label}}</a>
    {{/suppliers}}
  </div>
</div>

<div class="section">
  <div class="input-field">
    <input id="quick-search" type="text" class="validate" />
    <label for="quick-search">Search rows</label>
  </div>
</div>

`;function Dr(){const o=dt(),e=l=>[...new Set(l.filter(Boolean))].sort(),t=e(o.map(l=>l.Zone)).map(l=>({kind:"Zone",value:l,label:l})),n=e(o.map(l=>l.Type)).map(l=>({kind:"Type",value:l,label:l})),r=e(o.map(l=>l.Supplier)).map(l=>({kind:"Supplier",value:l,label:l}));return{zones:t,types:n,suppliers:r}}function mn(o){if(!(o instanceof Element))return;const{zones:e,types:t,suppliers:n}=Dr(),r=(h,f)=>(pe.filter[h]||[]).includes(f),l={zones:e.map(h=>({...h,active:r(h.kind,h.value)})),types:t.map(h=>({...h,active:r(h.kind,h.value)})),suppliers:n.map(h=>({...h,active:r(h.kind,h.value)}))};o.innerHTML=_e.render(Br,l),o.querySelectorAll("[data-kind][data-value]").forEach(h=>{h.addEventListener("click",f=>{f.preventDefault();const v=h.getAttribute("data-kind"),m=h.getAttribute("data-value");dr(v,m),mn(o),Nt()})})}const ni=`<table class="highlight striped">
  <thead>
    <tr>
      <th>Title</th>
      <th>Amount</th>
      <th>Opened</th>
    </tr>
  </thead>
  <tbody>
    {{#items}}
      <tr data-code="{{Code}}">
        <td>{{Title}}</td>
        <td>
            <span class="amt-text">{{Amount}}</span>
        </td>
        <td>{{Opened}}</td>
      </tr>
    {{/items}}
  </tbody>
</table>
`,Pr=`<div class="container">
  <div class="head-menu">
    <span id="sheet-title" class="current_tab"></span>
    <span id="sheet-links" class="other_tabs"></span>
    <span class="right" id="auth-panel" style="display:inline-flex; align-items:center; gap:8px;">
      <a id="btn-open-logs" class="btn-flat waves-effect" style="display:none;">Logs</a>
      <span id="auth-email-label" class="grey-text text-darken-1">Guest</span>
      <span id="auth-signed-out" style="display:none;">
        <input id="auth-email" type="email" placeholder="you@example.com" style="width:14rem; text-align:left;" />
        <a id="auth-signin" class="btn-small waves-effect">Sign in</a>
      </span>
      <span id="auth-signed-in" style="display:none;">
        <a id="auth-signout" class="btn-small waves-effect btn-flat">Sign out</a>
      </span>
    </span>
  </div>

  <ul class="collapsible">
    <li class="active">
      <div class="collapsible-header">
        <span>Filters</span>
      </div>
      <div class="collapsible-body">
        <div id="tags-container"></div>
      </div>
    </li>
  </ul>

  <div class="progress hide" id="preloader-wrapper">
    <div class="indeterminate"></div>
  </div>

  <div class="row">
    <div id="table-container" class="col s12 m6"></div>
    <div id="card-container" class="col s12 m6"></div>
  </div>
</div>

<!-- Add Item Modal -->
<div id="add-item-modal" class="modal">
  <div class="modal-content">
    <h5>Add New Item</h5>
    <form id="add-item-form">
      <div class="row">
        <div class="input-field col s12 m6">
          <input id="add-title" type="text" />
          <label for="add-title">Title</label>
        </div>
        <div class="input-field col s12 m6">
          <input id="add-amount" type="number" />
          <label for="add-amount">Amount</label>
        </div>
        <div class="input-field col s12 m6">
          <input id="add-zone" type="text" />
          <label for="add-zone">Zone</label>
        </div>
        <div class="input-field col s12 m6">
          <input id="add-type" type="text" />
          <label for="add-type">Type</label>
        </div>
        <div class="input-field col s12 m6">
          <input id="add-supplier" type="text" />
          <label for="add-supplier">Supplier</label>
        </div>
        <div class="input-field col s12 m6">
          <input id="add-opened" type="text" />
          <label for="add-opened">Opened</label>
        </div>
      </div>

      <div class="section">
        <h6>Additional Fields</h6>
        <div id="add-extra-list" class="row"></div>
        <a id="add-extra-add" class="btn-small waves-effect"><i class="material-icons left">add</i>Add field</a>
      </div>

      <div class="section">
        <h6>TDS Paste (optional)</h6>
        <div class="input-field">
          <textarea id="add-tds" class="materialize-textarea" placeholder="Key: Value\\nKey2: Value2 or JSON"></textarea>
          <label for="add-tds">TDS Raw</label>
        </div>
        <a id="add-tds-parse" class="btn-flat waves-effect"><i class="material-icons left">playlist_add</i>Parse into fields</a>
      </div>

      <div class="modal-footer" style="padding:0; border-top:none;">
        <button type="submit" class="modal-close btn waves-effect"><i class="material-icons left">save</i>Create</button>
        <a class="modal-close btn-flat">Cancel</a>
      </div>
    </form>
  </div>
</div>

<!-- Floating Add Button -->
<div class="fixed-action-btn">
  <a id="add-item-btn" class="btn-floating btn-large red waves-effect waves-light">
    <i class="large material-icons">add</i>
  </a>
</div>

<!-- Logs Modal -->
<div id="logs-modal" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h5>Change Log</h5>
    <div id="logs-body"></div>
  </div>
  <div class="modal-footer">
    <a class="modal-close btn-flat">Close</a>
  </div>
  </div>
`,Rr=`<div class="container" style="margin-top:8rem; max-width:520px;">
  <div class="card">
    <div class="card-content">
      <span class="card-title">Inventory Manager  Sign in</span>
      <p class="grey-text">,   .</p>

      <div class="section">
        <div class="input-field">
          <input id="login-email" type="email" />
          <label for="login-email">Email</label>
        </div>
        <div class="input-field">
          <input id="login-password" type="password" />
          <label for="login-password">Password (optional)</label>
        </div>
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <a id="btn-login-password" class="btn waves-effect">Sign in</a>
          <a id="btn-login-otp" class="btn-flat waves-effect">Magic link</a>
        </div>
      </div>

      <div class="section">
        <div class="input-field">
          <input id="login-access" type="text" />
          <label for="login-access">Access token</label>
        </div>
        <div class="input-field">
          <input id="login-refresh" type="text" />
          <label for="login-refresh">Refresh token</label>
        </div>
        <a id="btn-login-token" class="btn-flat waves-effect">Use tokens</a>
      </div>
    </div>
  </div>
</div>

`,jr=`<table class="striped">
  <thead>
    <tr>
      <th>Time</th>
      <th>User</th>
      <th>Action</th>
      <th>Item</th>
      <th>Changes</th>
    </tr>
  </thead>
  <tbody>
    {{#logs}}
    <tr>
      <td>{{created_at}}</td>
      <td>{{user_email}}</td>
      <td>{{action}}</td>
      <td>{{item_code}}</td>
      <td><code style="white-space:pre;">{{changes}}</code></td>
    </tr>
    {{/logs}}
  </tbody>
</table>

`;let Pt,yn,wt,_n,bt;const ii={raw:"Raw materials",office:"Office",our:"Our products"};function Mn(){return new URLSearchParams(window.location.search).get("sheet")||"raw"}function Hr(){const o=document.querySelectorAll(".collapsible");window.M&&o.length&&window.M.Collapsible.init(o)}function Nr(){if(window.__modalsInited)return;const o=document.querySelectorAll(".modal");window.M&&o.length&&(window.M.Modal.init(o,{}),window.__modalsInited=!0)}function Wr(){const o=document.getElementById("auth-email-label"),e=document.getElementById("auth-signed-out"),t=document.getElementById("auth-signed-in"),n=document.getElementById("auth-email"),r=document.getElementById("auth-signin"),l=document.getElementById("auth-signout");if(!o&&!r&&!l)return;let h=null;function f(){const v=!!h;o&&(o.textContent=v?h.email||"User":"Guest"),e&&(e.style.display=v?"none":""),t&&(t.style.display=v?"":"none")}r&&r.addEventListener("click",async()=>{var m,w;const v=((n==null?void 0:n.value)||"").trim();if(v)try{await(await et(()=>Promise.resolve().then(()=>Yn),void 0)).signInWithOtp(v),console.log("Auth: magic link requested for",v),(m=window.M)!=null&&m.toast&&window.M.toast({html:`     ${v}`,displayLength:3e3})}catch(T){console.error("Auth: signInWithOtp error",T),(w=window.M)!=null&&w.toast&&window.M.toast({html:"  ",displayLength:3e3})}}),l&&l.addEventListener("click",async()=>{try{await(await et(()=>Promise.resolve().then(()=>Yn),void 0)).signOut()}catch(v){console.error("Auth: signOut error",v)}f()}),Li(v=>{if(h=v.user,On(v.role),f(),!v.user){try{tt([])}catch{}Di();return}try{Kt(Mn())}catch{}Pi()}),f()}function on(o="",e=""){const t=document.getElementById("add-extra-list");if(!t)return;const n=document.createElement("div");n.className="col s12",n.innerHTML=`
    <div class="row" style="margin-bottom:0;">
      <div class="input-field col s5">
        <input type="text" class="extra-name" value="${o}" />
        <label class="active">Field</label>
      </div>
      <div class="input-field col s7">
        <input type="text" class="extra-value" value="${e}" />
        <label class="active">Value</label>
      </div>
    </div>
  `,t.appendChild(n)}function qr(o){let e={};const t=(o||"").trim();if(!t)return e;try{const n=JSON.parse(t);if(n&&typeof n=="object")return n}catch{}return t.split(/\n+/).forEach(n=>{const r=n.match(/^\s*([^:]+)\s*:\s*(.*)$/);if(r){const l=r[1].trim(),h=r[2].trim();l&&(e[l]=h)}}),e}function Ur(){return"tmp-"+Date.now().toString(36)+"-"+Math.random().toString(36).slice(2,6)}function Rt(){const o=document.getElementById("quick-search"),e=((o==null?void 0:o.value)||"").toLowerCase().trim();document.querySelectorAll("tr[data-code]").forEach(n=>{var l;const r=((l=n.textContent)==null?void 0:l.toLowerCase())||"";!e||r.includes(e)?n.classList.remove("search-hide"):n.classList.add("search-hide")})}function Fr(){const o=document.getElementById("quick-search");o&&o.addEventListener("input",Rt)}function zr(){var o;(o=document.getElementById("preloader-wrapper"))==null||o.classList.remove("hide")}function si(){var o;(o=document.getElementById("preloader-wrapper"))==null||o.classList.add("hide")}async function Kt(o){var f,v;if(zr(),!re.user){si();return}_n&&(_n.innerHTML=`<a href="?sheet=${o}">${ii[o]||o}</a>`),bt&&(bt.innerHTML=Object.entries(ii).filter(([m])=>m!==o).map(([m,w])=>`<a href="?sheet=${m}" data-sheet="${m}">${w}</a>`).join(" "));try{const m=await or(o);if(tt(m),ti(ni,Pt,yn),wt){const w=((f=document.getElementById("quick-search"))==null?void 0:f.value)||"";mn(wt),Fr();const T=document.getElementById("quick-search");T&&(T.value=w,window.M&&window.M.updateTextFields&&window.M.updateTextFields())}Nt(),Rt(),Hr(),Nr()}catch(m){console.error("Load error:",m);const w=(m==null?void 0:m.message)||"  ";(v=window.M)!=null&&v.toast&&window.M.toast({html:w,displayLength:3e3})}finally{si()}bt&&bt.querySelectorAll("a").forEach(m=>{m.addEventListener("click",w=>{w.preventDefault();const T=m.dataset.sheet;history.pushState({sheet:T},"",`?sheet=${T}`),Kt(T)})});const e=document.getElementById("quick-search");e&&(e.addEventListener("input",Rt),["click","mousedown","keydown"].forEach(m=>{e.addEventListener(m,w=>w.stopPropagation())}));const t=document.getElementById("add-item-btn"),n=document.getElementById("add-item-modal"),r=document.getElementById("add-item-form"),l=document.getElementById("add-extra-add"),h=document.getElementById("add-tds-parse");if(!window.__addUiBound&&t&&n&&window.M){window.__addUiBound=!0;const m=window.M.Modal.getInstance(n)||window.M.Modal.init(n);t.addEventListener("click",()=>{r&&typeof r.reset=="function"&&r.reset();const w=document.getElementById("add-extra-list");w&&(w.innerHTML=""),on(),m.open()})}l&&l.addEventListener("click",()=>on()),h&&!h.__bound&&(h.__bound=!0,h.addEventListener("click",()=>{const m=document.getElementById("add-tds"),w=m&&"value"in m?m.value:"",T=qr(w);Object.entries(T).forEach(([L,I])=>on(String(L),String(I))),m&&"value"in m&&(m.value=""),window.M&&window.M.updateTextFields&&window.M.updateTextFields()})),r&&!r.__bound&&(r.__bound=!0,r.addEventListener("submit",m=>{m.preventDefault();const w=y=>{const C=document.getElementById(y);return C&&"value"in C?C.value:""},T=y=>(y||"").toString().trim(),L=T(w("add-title")),I=w("add-amount"),W=T(w("add-zone")),u=T(w("add-type")),p=T(w("add-supplier")),b=T(w("add-opened")),k=document.getElementById("add-extra-list"),d={};if(k){const y=k.querySelectorAll(".extra-name"),C=k.querySelectorAll(".extra-value");y.forEach((O,A)=>{const R="value"in O?O.value.trim():"",H=C[A]&&"value"in C[A]?C[A].value:"";R&&(d[R]=H)})}const s=Ur(),i={Code:s,Title:L,Amount:I,Zone:W,Type:u,Supplier:p,Opened:b,sheet:o,_isNew:!0,...d},a=dt();tt([...a||[],i]),ti(ni,Pt,yn),wt&&mn(wt),Nt(),Rt();const c=Pt.querySelector(`tr[data-code="${s}"]`);c&&"click"in c&&c.click();try{const y=document.getElementById("add-item-modal");if(y&&window.M){let O=window.M.Modal.getInstance(y);O||(O=window.M.Modal.init(y,{})),setTimeout(()=>{try{O&&O.close()}catch{}},0)}r&&typeof r.reset=="function"&&r.reset();const C=document.getElementById("add-extra-list");C&&(C.innerHTML="")}catch(y){console.debug("Modal close fallback",y)}}))}window.addEventListener("popstate",o=>{var t;const e=((t=o.state)==null?void 0:t.sheet)||Mn();Kt(e)});function Vr(o){const e=m=>o.querySelector(m),t=e("#login-email"),n=e("#login-password"),r=e("#btn-login-password"),l=e("#btn-login-otp"),h=e("#login-access"),f=e("#login-refresh"),v=e("#btn-login-token");r&&r.addEventListener("click",async()=>{var m;try{await $i((t==null?void 0:t.value)||"",(n==null?void 0:n.value)||""),wn()}catch(w){console.error(w),(m=window.M)!=null&&m.toast&&window.M.toast({html:"Login failed",displayLength:2e3})}}),l&&l.addEventListener("click",async()=>{var m,w;try{await Ii((t==null?void 0:t.value)||""),(m=window.M)!=null&&m.toast&&window.M.toast({html:"Magic link sent",displayLength:2e3})}catch(T){console.error(T),(w=window.M)!=null&&w.toast&&window.M.toast({html:"Magic link error",displayLength:2e3})}}),v&&v.addEventListener("click",async()=>{var m;try{await Ai((h==null?void 0:h.value)||"",(f==null?void 0:f.value)||""),wn()}catch(w){console.error(w),(m=window.M)!=null&&m.toast&&window.M.toast({html:"Token login failed",displayLength:2e3})}})}function Di(){const o=document.getElementById("app-root");o.innerHTML=_e.render(Rr,{}),Vr(o)}function wn(){const o=document.getElementById("app-root");o.innerHTML=_e.render(Pr,{}),Pt=document.getElementById("table-container"),yn=document.getElementById("card-container"),wt=document.getElementById("tags-container"),_n=document.getElementById("sheet-title"),bt=document.getElementById("sheet-links"),Wr(),Kt(Mn()),Pi(),Kr()}function Pi(){try{const o=document.getElementById("add-item-btn");if(!o)return;const e=(window.localStorage.getItem("inventory-role")||"").toLowerCase(),t=e==="admin"||e==="manager";o.style.display=t?"":"none"}catch{}}async function Kr(){const o=document.getElementById("btn-open-logs"),e=document.getElementById("logs-modal");if(!o||!e)return;const t=(window.localStorage.getItem("inventory-role")||"").toLowerCase(),n=t==="admin"||t==="manager";o.style.display=n?"":"none",n&&(window.M&&window.M.Modal.init(e,{}),o.addEventListener("click",async r=>{var l,h,f;r.preventDefault();try{const m={logs:(await Lr(300)).map(L=>({...L,changes:JSON.stringify(L.changes??{},null,0)}))},w=document.getElementById("logs-body");w&&(w.innerHTML=_e.render(jr,m));const T=((l=window.M)==null?void 0:l.Modal.getInstance(e))||((h=window.M)==null?void 0:h.Modal.init(e,{}));(f=T==null?void 0:T.open)==null||f.call(T)}catch(v){console.error(v)}}))}(async function(){await Bi(),re.user?wn():Di()})();
