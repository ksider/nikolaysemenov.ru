(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();const On="modulepreload",xn=function(o){return"/inv/"+o},Si={},Ne=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=Promise.allSettled(t.map(g=>{if(g=xn(g),g in Si)return;Si[g]=!0;const _=g.endsWith(".css"),b=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const T=document.createElement("link");if(T.rel=_?"stylesheet":On,_||(T.as="script"),T.crossOrigin="",T.href=g,f&&T.setAttribute("nonce",f),document.head.appendChild(T),_)return new Promise((L,A)=>{T.addEventListener("load",L),T.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return r.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})};var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mn(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var r=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return o[i]}})}),t}var Oi={exports:{}};/*!
 * Materialize v1.0.0-rc.2 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */(function(o,e){var t=function c(p,w,k){p===null&&(p=Function.prototype);var d=Object.getOwnPropertyDescriptor(p,w);if(d===void 0){var n=Object.getPrototypeOf(p);return n===null?void 0:c(n,w,k)}if("value"in d)return d.value;var s=d.get;return s!==void 0?s.call(k):void 0},i=function(){function c(p,w){for(var k=0;k<w.length;k++){var d=w[k];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,d.key,d)}}return function(p,w,k){return w&&c(p.prototype,w),k&&c(p,k),p}}();function r(c,p){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||typeof p!="object"&&typeof p!="function"?c:p}function l(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(c,p):c.__proto__=p)}function u(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}window.cash=function(){var c,p=document,w=window,k=Array.prototype,d=k.slice,n=k.filter,s=k.push,a=function(){},h=function(v){return typeof v==typeof a&&v.call},m=function(v){return typeof v=="string"},C=/^#[\w-]*$/,O=/^\.[\w-]*$/,I=/<.+>/,R=/^\w+$/;function H(v,y){y=y||p;var S=O.test(v)?y.getElementsByClassName(v.slice(1)):R.test(v)?y.getElementsByTagName(v):y.querySelectorAll(v);return S}function N(v){if(!c){var y=(c=p.implementation.createHTMLDocument(null)).createElement("base");y.href=p.location.href,c.head.appendChild(y)}return c.body.innerHTML=v,c.body.childNodes}function F(v){p.readyState!=="loading"?v():p.addEventListener("DOMContentLoaded",v)}function le(v,y){if(!v)return this;if(v.cash&&v!==w)return v;var S,D=v,Q=0;if(m(v))D=C.test(v)?p.getElementById(v.slice(1)):I.test(v)?N(v):H(v,y);else if(h(v))return F(v),this;if(!D)return this;if(D.nodeType||D===w)this[0]=D,this.length=1;else for(S=this.length=D.length;Q<S;Q++)this[Q]=D[Q];return this}function z(v,y){return new le(v,y)}var Y=z.fn=z.prototype=le.prototype={cash:!0,length:0,push:s,splice:k.splice,map:k.map,init:le};function se(v,y){for(var S=v.length,D=0;D<S&&y.call(v[D],v[D],D,v)!==!1;D++);}function re(v,y){var S=v&&(v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector);return!!S&&S.call(v,y)}function Z(v){return m(v)?re:v.cash?function(y){return v.is(y)}:function(y,S){return y===S}}function me(v){return z(d.call(v).filter(function(y,S,D){return D.indexOf(y)===S}))}Object.defineProperty(Y,"constructor",{value:z}),z.parseHTML=N,z.noop=a,z.isFunction=h,z.isString=m,z.extend=Y.extend=function(v){v=v||{};var y=d.call(arguments),S=y.length,D=1;for(y.length===1&&(v=this,D=0);D<S;D++)if(y[D])for(var Q in y[D])y[D].hasOwnProperty(Q)&&(v[Q]=y[D][Q]);return v},z.extend({merge:function(v,y){for(var S=+y.length,D=v.length,Q=0;Q<S;D++,Q++)v[D]=y[Q];return v.length=D,v},each:se,matches:re,unique:me,isArray:Array.isArray,isNumeric:function(v){return!isNaN(parseFloat(v))&&isFinite(v)}});var te=z.uid="_cash"+Date.now();function be(v){return v[te]=v[te]||{}}function We(v,y,S){return be(v)[y]=S}function Ae(v,y){var S=be(v);return S[y]===void 0&&(S[y]=v.dataset?v.dataset[y]:z(v).attr("data-"+y)),S[y]}Y.extend({data:function(v,y){if(m(v))return y===void 0?Ae(this[0],v):this.each(function(D){return We(D,v,y)});for(var S in v)this.data(S,v[S]);return this},removeData:function(v){return this.each(function(y){return D=v,void((Q=be(S=y))?delete Q[D]:S.dataset?delete S.dataset[D]:z(S).removeAttr("data-"+name));var S,D,Q})}});var qe=/\S+/g;function J(v){return m(v)&&v.match(qe)}function Se(v,y){return v.classList?v.classList.contains(y):new RegExp("(^| )"+y+"( |$)","gi").test(v.className)}function xe(v,y,S){v.classList?v.classList.add(y):S.indexOf(" "+y+" ")&&(v.className+=" "+y)}function Ie(v,y){v.classList?v.classList.remove(y):v.className=v.className.replace(y,"")}Y.extend({addClass:function(v){var y=J(v);return y?this.each(function(S){var D=" "+S.className+" ";se(y,function(Q){xe(S,Q,D)})}):this},attr:function(v,y){if(v){if(m(v))return y===void 0?this[0]?this[0].getAttribute?this[0].getAttribute(v):this[0][v]:void 0:this.each(function(D){D.setAttribute?D.setAttribute(v,y):D[v]=y});for(var S in v)this.attr(S,v[S]);return this}},hasClass:function(v){var y=!1,S=J(v);return S&&S.length&&this.each(function(D){return!(y=Se(D,S[0]))}),y},prop:function(v,y){if(m(v))return y===void 0?this[0][v]:this.each(function(D){D[v]=y});for(var S in v)this.prop(S,v[S]);return this},removeAttr:function(v){return this.each(function(y){y.removeAttribute?y.removeAttribute(v):delete y[v]})},removeClass:function(v){if(!arguments.length)return this.attr("class","");var y=J(v);return y?this.each(function(S){se(y,function(D){Ie(S,D)})}):this},removeProp:function(v){return this.each(function(y){delete y[v]})},toggleClass:function(v,y){if(y!==void 0)return this[y?"addClass":"removeClass"](v);var S=J(v);return S?this.each(function(D){var Q=" "+D.className+" ";se(S,function(ie){Se(D,ie)?Ie(D,ie):xe(D,ie,Q)})}):this}}),Y.extend({add:function(v,y){return me(z.merge(this,z(v,y)))},each:function(v){return se(this,v),this},eq:function(v){return z(this.get(v))},filter:function(v){if(!v)return this;var y=h(v)?v:Z(v);return z(n.call(this,function(S){return y(S,v)}))},first:function(){return this.eq(0)},get:function(v){return v===void 0?d.call(this):v<0?this[v+this.length]:this[v]},index:function(v){var y=v?z(v)[0]:this[0],S=v?this:z(y).parent().children();return d.call(S).indexOf(y)},last:function(){return this.eq(-1)}});var ue,Me,Ue,E,x,B,P=(x=/(?:^\w|[A-Z]|\b\w)/g,B=/[\s-_]+/g,function(v){return v.replace(x,function(y,S){return y[S===0?"toLowerCase":"toUpperCase"]()}).replace(B,"")}),j=(ue={},Me=document,Ue=Me.createElement("div"),E=Ue.style,function(v){if(v=P(v),ue[v])return ue[v];var y=v.charAt(0).toUpperCase()+v.slice(1),S=(v+" "+["webkit","moz","ms","o"].join(y+" ")+y).split(" ");return se(S,function(D){if(D in E)return ue[D]=v=ue[v]=D,!1}),ue[v]});function q(v,y){return parseInt(w.getComputedStyle(v[0],null)[y],10)||0}function V(v,y,S){var D,Q=Ae(v,"_cashEvents"),ie=Q&&Q[y];ie&&(S?(v.removeEventListener(y,S),0<=(D=ie.indexOf(S))&&ie.splice(D,1)):(se(ie,function(fe){v.removeEventListener(y,fe)}),ie=[]))}function U(v,y){return"&"+encodeURIComponent(v)+"="+encodeURIComponent(y).replace(/%20/g,"+")}function X(v){var y,S,D,Q=v.type;if(!Q)return null;switch(Q.toLowerCase()){case"select-one":return 0<=(D=(S=v).selectedIndex)?S.options[D].value:null;case"select-multiple":return y=[],se(v.options,function(ie){ie.selected&&y.push(ie.value)}),y.length?y:null;case"radio":case"checkbox":return v.checked?v.value:null;default:return v.value?v.value:null}}function K(v,y,S){var D=m(y);D||!y.length?se(v,D?function(Q){return Q.insertAdjacentHTML(S?"afterbegin":"beforeend",y)}:function(Q,ie){return function(fe,he,ce){if(ce){var de=fe.childNodes[0];fe.insertBefore(he,de)}else fe.appendChild(he)}(Q,ie===0?y:y.cloneNode(!0),S)}):se(y,function(Q){return K(v,Q,S)})}z.prefixedProp=j,z.camelCase=P,Y.extend({css:function(v,y){if(m(v))return v=j(v),1<arguments.length?this.each(function(D){return D.style[v]=y}):w.getComputedStyle(this[0])[v];for(var S in v)this.css(S,v[S]);return this}}),se(["Width","Height"],function(v){var y=v.toLowerCase();Y[y]=function(){return this[0].getBoundingClientRect()[y]},Y["inner"+v]=function(){return this[0]["client"+v]},Y["outer"+v]=function(S){return this[0]["offset"+v]+(S?q(this,"margin"+(v==="Width"?"Left":"Top"))+q(this,"margin"+(v==="Width"?"Right":"Bottom")):0)}}),Y.extend({off:function(v,y){return this.each(function(S){return V(S,v,y)})},on:function(v,y,S,D){var Q;if(!m(v)){for(var ie in v)this.on(ie,y,v[ie]);return this}return h(y)&&(S=y,y=null),v==="ready"?(F(S),this):(y&&(Q=S,S=function(fe){for(var he=fe.target;!re(he,y);){if(he===this||he===null)return he=!1;he=he.parentNode}he&&Q.call(he,fe)}),this.each(function(fe){var he,ce,de,ke,oe=S;D&&(oe=function(){S.apply(this,arguments),V(fe,v,oe)}),ce=v,de=oe,(ke=Ae(he=fe,"_cashEvents")||We(he,"_cashEvents",{}))[ce]=ke[ce]||[],ke[ce].push(de),he.addEventListener(ce,de)}))},one:function(v,y,S){return this.on(v,y,S,!0)},ready:F,trigger:function(v,y){if(document.createEvent){var S=document.createEvent("HTMLEvents");return S.initEvent(v,!0,!1),S=this.extend(S,y),this.each(function(D){return D.dispatchEvent(S)})}}}),Y.extend({serialize:function(){var v="";return se(this[0].elements||this,function(y){if(!y.disabled&&y.tagName!=="FIELDSET"){var S=y.name;switch(y.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var D=X(y);D!==null&&se(D,function(ie){v+=U(S,ie)});break;default:var Q=X(y);Q!==null&&(v+=U(S,Q))}}}),v.substr(1)},val:function(v){return v===void 0?X(this[0]):this.each(function(y){return y.value=v})}}),Y.extend({after:function(v){return z(v).insertAfter(this),this},append:function(v){return K(this,v),this},appendTo:function(v){return K(z(v),this),this},before:function(v){return z(v).insertBefore(this),this},clone:function(){return z(this.map(function(v){return v.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(v){if(v===void 0)return this[0].innerHTML;var y=v.nodeType?v[0].outerHTML:v;return this.each(function(S){return S.innerHTML=y})},insertAfter:function(v){var y=this;return z(v).each(function(S,D){var Q=S.parentNode,ie=S.nextSibling;y.each(function(fe){Q.insertBefore(D===0?fe:fe.cloneNode(!0),ie)})}),this},insertBefore:function(v){var y=this;return z(v).each(function(S,D){var Q=S.parentNode;y.each(function(ie){Q.insertBefore(D===0?ie:ie.cloneNode(!0),S)})}),this},prepend:function(v){return K(this,v,!0),this},prependTo:function(v){return K(z(v),this,!0),this},remove:function(){return this.each(function(v){if(v.parentNode)return v.parentNode.removeChild(v)})},text:function(v){return v===void 0?this[0].textContent:this.each(function(y){return y.textContent=v})}});var ne=p.documentElement;return Y.extend({position:function(){var v=this[0];return{left:v.offsetLeft,top:v.offsetTop}},offset:function(){var v=this[0].getBoundingClientRect();return{top:v.top+w.pageYOffset-ne.clientTop,left:v.left+w.pageXOffset-ne.clientLeft}},offsetParent:function(){return z(this[0].offsetParent)}}),Y.extend({children:function(v){var y=[];return this.each(function(S){s.apply(y,S.children)}),y=me(y),v?y.filter(function(S){return re(S,v)}):y},closest:function(v){return!v||this.length<1?z():this.is(v)?this.filter(v):this.parent().closest(v)},is:function(v){if(!v)return!1;var y=!1,S=Z(v);return this.each(function(D){return!(y=S(D,v))}),y},find:function(v){if(!v||v.nodeType)return z(v&&this.has(v).length?v:null);var y=[];return this.each(function(S){s.apply(y,H(v,S))}),me(y)},has:function(v){var y=m(v)?function(S){return H(v,S).length!==0}:function(S){return S.contains(v)};return this.filter(y)},next:function(){return z(this[0].nextElementSibling)},not:function(v){if(!v)return this;var y=Z(v);return this.filter(function(S){return!y(S,v)})},parent:function(){var v=[];return this.each(function(y){y&&y.parentNode&&v.push(y.parentNode)}),me(v)},parents:function(v){var y,S=[];return this.each(function(D){for(y=D;y&&y.parentNode&&y!==p.body.parentNode;)y=y.parentNode,(!v||v&&re(y,v))&&S.push(y)}),me(S)},prev:function(){return z(this[0].previousElementSibling)},siblings:function(v){var y=this.parent().children(v),S=this[0];return y.filter(function(D){return D!==S})}}),z}();var f=function(){function c(p,w,k){u(this,c),w instanceof Element||console.error(Error(w+" is not an HTML Element"));var d=p.getInstance(w);d&&d.destroy(),this.el=w,this.$el=cash(w)}return i(c,null,[{key:"init",value:function(p,w,k){var d=null;if(w instanceof Element)d=new p(w,k);else if(w&&(w.jquery||w.cash||w instanceof NodeList)){for(var n=[],s=0;s<w.length;s++)n.push(new p(w[s],k));d=n}return d}}]),c}();(function(c){c.Package?M={}:c.M={},M.jQueryLoaded=!!c.jQuery})(window),e.nodeType||(!o.nodeType&&o.exports&&(e=o.exports=M),e.default=M),M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var g=function(c){M.keyDown=!0,c.which!==M.keys.TAB&&c.which!==M.keys.ARROW_DOWN&&c.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},_=function(c){M.keyDown=!1,c.which!==M.keys.TAB&&c.which!==M.keys.ARROW_DOWN&&c.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},b=function(c){M.keyDown&&document.body.classList.add("keyboard-focused")},T=function(c){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",g,!0),document.addEventListener("keyup",_,!0),document.addEventListener("focus",b,!0),document.addEventListener("blur",T,!0),M.initializeJqueryWrapper=function(c,p,w){jQuery.fn[p]=function(k){if(c.prototype[k]){var d=Array.prototype.slice.call(arguments,1);if(k.slice(0,3)==="get"){var n=this.first()[0][w];return n[k].apply(n,d)}return this.each(function(){var s=this[w];s[k].apply(s,d)})}if(typeof k=="object"||!k)return c.init(this,k),this;jQuery.error("Method "+k+" does not exist on jQuery."+p)}},M.AutoInit=function(c){var p=c||document.body,w={Autocomplete:p.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:p.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:p.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:p.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:p.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:p.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:p.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:p.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:p.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:p.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:p.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:p.querySelectorAll("select:not(.no-autoinit)"),Sidenav:p.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:p.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:p.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:p.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:p.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:p.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var k in w)M[k].init(w[k])},M.objectSelectorString=function(c){return((c.prop("tagName")||"")+(c.attr("id")||"")+(c.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function c(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()}}(),M.escapeHash=function(c){return c.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(c){var p=$(c),w=p.add(p.parents()),k=!1;return w.each(function(){if($(this).css("position")==="fixed")return!(k=!0)}),k},M.checkWithinContainer=function(c,p,w){var k={top:!1,right:!1,bottom:!1,left:!1},d=c.getBoundingClientRect(),n=c===document.body?Math.max(d.bottom,window.innerHeight):d.bottom,s=c.scrollLeft,a=c.scrollTop,h=p.left-s,m=p.top-a;return(h<d.left+w||h<w)&&(k.left=!0),(h+p.width>d.right-w||h+p.width>window.innerWidth-w)&&(k.right=!0),(m<d.top+w||m<w)&&(k.top=!0),(m+p.height>n-w||m+p.height>window.innerHeight-w)&&(k.bottom=!0),k},M.checkPossibleAlignments=function(c,p,w,k){var d={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},n=getComputedStyle(p).overflow==="visible",s=p.getBoundingClientRect(),a=Math.min(s.height,window.innerHeight),h=Math.min(s.width,window.innerWidth),m=c.getBoundingClientRect(),C=p.scrollLeft,O=p.scrollTop,I=w.left-C,R=w.top-O,H=w.top+m.height-O;return d.spaceOnRight=n?window.innerWidth-(m.left+w.width):h-(I+w.width),d.spaceOnRight<0&&(d.left=!1),d.spaceOnLeft=n?m.right-w.width:I-w.width+m.width,d.spaceOnLeft<0&&(d.right=!1),d.spaceOnBottom=n?window.innerHeight-(m.top+w.height+k):a-(R+w.height+k),d.spaceOnBottom<0&&(d.top=!1),d.spaceOnTop=n?m.bottom-(w.height+k):H-(w.height-k),d.spaceOnTop<0&&(d.bottom=!1),d},M.getOverflowParent=function(c){return c==null?null:c===document.body||getComputedStyle(c).overflow!=="visible"?c:M.getOverflowParent(c.parentElement)},M.getIdFromTrigger=function(c){var p=c.getAttribute("data-target");return p||(p=(p=c.getAttribute("href"))?p.slice(1):""),p},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var L=Date.now||function(){return new Date().getTime()};M.throttle=function(c,p,w){var k=void 0,d=void 0,n=void 0,s=null,a=0;w||(w={});var h=function(){a=w.leading===!1?0:L(),s=null,n=c.apply(k,d),k=d=null};return function(){var m=L();a||w.leading!==!1||(a=m);var C=p-(m-a);return k=this,d=arguments,C<=0?(clearTimeout(s),s=null,a=m,n=c.apply(k,d),k=d=null):s||w.trailing===!1||(s=setTimeout(h,C)),n}};var A={scope:{}};A.defineProperty=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,w){if(w.get||w.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[p]=w.value)},A.getGlobal=function(c){return typeof window<"u"&&window===c?c:typeof ge<"u"&&ge!=null?ge:c},A.global=A.getGlobal(ge),A.SYMBOL_PREFIX="jscomp_symbol_",A.initSymbol=function(){A.initSymbol=function(){},A.global.Symbol||(A.global.Symbol=A.Symbol)},A.symbolCounter_=0,A.Symbol=function(c){return A.SYMBOL_PREFIX+(c||"")+A.symbolCounter_++},A.initSymbolIterator=function(){A.initSymbol();var c=A.global.Symbol.iterator;c||(c=A.global.Symbol.iterator=A.global.Symbol("iterator")),typeof Array.prototype[c]!="function"&&A.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return A.arrayIterator(this)}}),A.initSymbolIterator=function(){}},A.arrayIterator=function(c){var p=0;return A.iteratorPrototype(function(){return p<c.length?{done:!1,value:c[p++]}:{done:!0}})},A.iteratorPrototype=function(c){return A.initSymbolIterator(),(c={next:c})[A.global.Symbol.iterator]=function(){return this},c},A.array=A.array||{},A.iteratorFromArray=function(c,p){A.initSymbolIterator(),c instanceof String&&(c+="");var w=0,k={next:function(){if(w<c.length){var d=w++;return{value:p(d,c[d]),done:!1}}return k.next=function(){return{done:!0,value:void 0}},k.next()}};return k[Symbol.iterator]=function(){return k},k},A.polyfill=function(c,p,w,k){if(p){for(w=A.global,c=c.split("."),k=0;k<c.length-1;k++){var d=c[k];d in w||(w[d]={}),w=w[d]}(p=p(k=w[c=c[c.length-1]]))!=k&&p!=null&&A.defineProperty(w,c,{configurable:!0,writable:!0,value:p})}},A.polyfill("Array.prototype.keys",function(c){return c||function(){return A.iteratorFromArray(this,function(p){return p})}},"es6-impl","es3");var W=ge;M.anime=function(){function c(E){if(!J.col(E))try{return document.querySelectorAll(E)}catch{}}function p(E,x){for(var B=E.length,P=2<=arguments.length?x:void 0,j=[],q=0;q<B;q++)if(q in E){var V=E[q];x.call(P,V,q,E)&&j.push(V)}return j}function w(E){return E.reduce(function(x,B){return x.concat(J.arr(B)?w(B):B)},[])}function k(E){return J.arr(E)?E:(J.str(E)&&(E=c(E)||E),E instanceof NodeList||E instanceof HTMLCollection?[].slice.call(E):[E])}function d(E,x){return E.some(function(B){return B===x})}function n(E){var x,B={};for(x in E)B[x]=E[x];return B}function s(E,x){var B,P=n(E);for(B in E)P[B]=x.hasOwnProperty(B)?x[B]:E[B];return P}function a(E,x){var B,P=n(E);for(B in x)P[B]=J.und(E[B])?x[B]:E[B];return P}function h(E){if(E=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(E))return E[2]}function m(E,x){return J.fnc(E)?E(x.target,x.id,x.total):E}function C(E,x){if(x in E.style)return getComputedStyle(E).getPropertyValue(x.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function O(E,x){return J.dom(E)&&d(qe,x)?"transform":J.dom(E)&&(E.getAttribute(x)||J.svg(E)&&E[x])?"attribute":J.dom(E)&&x!=="transform"&&C(E,x)?"css":E[x]!=null?"object":void 0}function I(E,x){switch(O(E,x)){case"transform":return function(B,P){var j,q=-1<(j=P).indexOf("translate")||j==="perspective"?"px":-1<j.indexOf("rotate")||-1<j.indexOf("skew")?"deg":void 0,q=-1<P.indexOf("scale")?1:0+q;if(!(B=B.style.transform))return q;for(var V=[],U=[],X=[],K=/(\w+)\((.+?)\)/g;V=K.exec(B);)U.push(V[1]),X.push(V[2]);return(B=p(X,function(ne,v){return U[v]===P})).length?B[0]:q}(E,x);case"css":return C(E,x);case"attribute":return E.getAttribute(x)}return E[x]||0}function R(E,x){var B=/^(\*=|\+=|-=)/.exec(E);if(!B)return E;var P=h(E)||0;switch(x=parseFloat(x),E=parseFloat(E.replace(B[0],"")),B[0][0]){case"+":return x+E+P;case"-":return x-E+P;case"*":return x*E+P}}function H(E,x){return Math.sqrt(Math.pow(x.x-E.x,2)+Math.pow(x.y-E.y,2))}function N(E){E=E.points;for(var x,B=0,P=0;P<E.numberOfItems;P++){var j=E.getItem(P);0<P&&(B+=H(x,j)),x=j}return B}function F(E){if(E.getTotalLength)return E.getTotalLength();switch(E.tagName.toLowerCase()){case"circle":return 2*Math.PI*E.getAttribute("r");case"rect":return 2*E.getAttribute("width")+2*E.getAttribute("height");case"line":return H({x:E.getAttribute("x1"),y:E.getAttribute("y1")},{x:E.getAttribute("x2"),y:E.getAttribute("y2")});case"polyline":return N(E);case"polygon":var x=E.points;return N(E)+H(x.getItem(x.numberOfItems-1),x.getItem(0))}}function le(E,x){function B(V){return V=V===void 0?0:V,E.el.getPointAtLength(1<=x+V?x+V:0)}var P=B(),j=B(-1),q=B(1);switch(E.property){case"x":return P.x;case"y":return P.y;case"angle":return 180*Math.atan2(q.y-j.y,q.x-j.x)/Math.PI}}function z(E,x){var B,P=/-?\d*\.?\d+/g;if(B=J.pth(E)?E.totalLength:E,J.col(B))if(J.rgb(B)){var j=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(B);B=j?"rgba("+j[1]+",1)":B}else B=J.hex(B)?function(q){q=q.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(X,K,ne,v){return K+K+ne+ne+v+v});var U=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(q);q=parseInt(U[1],16);var V=parseInt(U[2],16),U=parseInt(U[3],16);return"rgba("+q+","+V+","+U+",1)"}(B):J.hsl(B)?function(q){function V(y,S,D){return D<0&&(D+=1),1<D&&--D,D<1/6?y+6*(S-y)*D:D<.5?S:D<2/3?y+(S-y)*(2/3-D)*6:y}var K=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(q)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(q);q=parseInt(K[1])/360;var U=parseInt(K[2])/100,X=parseInt(K[3])/100,K=K[4]||1;if(U==0)X=U=q=X;else{var ne=X<.5?X*(1+U):X+U-X*U,v=2*X-ne,X=V(v,ne,q+1/3),U=V(v,ne,q);q=V(v,ne,q-1/3)}return"rgba("+255*X+","+255*U+","+255*q+","+K+")"}(B):void 0;else j=(j=h(B))?B.substr(0,B.length-j.length):B,B=x&&!/\s/g.test(B)?j+x:j;return{original:B+="",numbers:B.match(P)?B.match(P).map(Number):[0],strings:J.str(E)||x?B.split(P):[]}}function Y(E){return p(E=E?w(J.arr(E)?E.map(k):k(E)):[],function(x,B,P){return P.indexOf(x)===B})}function se(E,x){var B=n(x);if(J.arr(E)){var P=E.length;P!==2||J.obj(E[0])?J.fnc(x.duration)||(B.duration=x.duration/P):E={value:E}}return k(E).map(function(j,q){return q=q?0:x.delay,j=J.obj(j)&&!J.pth(j)?j:{value:j},J.und(j.delay)&&(j.delay=q),j}).map(function(j){return a(j,B)})}function re(E,x){var B;return E.tweens.map(function(P){var j=(P=function(X,K){var ne,v={};for(ne in X){var y=m(X[ne],K);J.arr(y)&&(y=y.map(function(S){return m(S,K)})).length===1&&(y=y[0]),v[ne]=y}return v.duration=parseFloat(v.duration),v.delay=parseFloat(v.delay),v}(P,x)).value,U=I(x.target,E.name),q=B?B.to.original:U,q=J.arr(j)?j[0]:q,V=R(J.arr(j)?j[1]:j,q),U=h(V)||h(q)||h(U);return P.from=z(q,U),P.to=z(V,U),P.start=B?B.end:E.offset,P.end=P.start+P.delay+P.duration,P.easing=function(X){return J.arr(X)?Se.apply(this,X):xe[X]}(P.easing),P.elasticity=(1e3-Math.min(Math.max(P.elasticity,1),999))/1e3,P.isPath=J.pth(j),P.isColor=J.col(P.from.original),P.isColor&&(P.round=1),B=P})}function Z(E,x,B,P){var j=E==="delay";return x.length?(j?Math.min:Math.max).apply(Math,x.map(function(q){return q[E]})):j?P.delay:B.offset+P.delay+P.duration}function me(E){var x,B,P,j,q=s(We,E),V=s(Ae,E),U=(B=E.targets,(P=Y(B)).map(function(ne,v){return{target:ne,id:v,total:P.length}})),X=[],K=a(q,V);for(x in E)K.hasOwnProperty(x)||x==="targets"||X.push({name:x,offset:K.offset,tweens:se(E[x],V)});return j=X,E=p(w(U.map(function(ne){return j.map(function(v){var y=O(ne.target,v.name);if(y){var S=re(v,ne);v={type:y,property:v.name,animatable:ne,tweens:S,duration:S[S.length-1].end,delay:S[0].delay}}else v=void 0;return v})})),function(ne){return!J.und(ne)}),a(q,{children:[],animatables:U,animations:E,duration:Z("duration",E,q,V),delay:Z("delay",E,q,V)})}function te(E){function x(){return window.Promise&&new Promise(function(S){return ne=S})}function B(S){return y.reversed?y.duration-S:S}function P(S){for(var D=0,Q={},ie=y.animations,fe=ie.length;D<fe;){var he=ie[D],ce=he.animatable,de=he.tweens,ke=de.length-1,oe=de[ke];ke&&(oe=p(de,function(Sn){return S<Sn.end})[0]||oe);for(var de=Math.min(Math.max(S-oe.start-oe.delay,0),oe.duration)/oe.duration,Qe=isNaN(de)?1:oe.easing(de,oe.elasticity),de=oe.to.strings,it=oe.round,ke=[],Pe=void 0,Pe=oe.to.numbers.length,Re=0;Re<Pe;Re++){var Xe=void 0,Xe=oe.to.numbers[Re],Ti=oe.from.numbers[Re],Xe=oe.isPath?le(oe.value,Qe*Xe):Ti+Qe*(Xe-Ti);it&&(oe.isColor&&2<Re||(Xe=Math.round(Xe*it)/it)),ke.push(Xe)}if(oe=de.length)for(Pe=de[0],Qe=0;Qe<oe;Qe++)it=de[Qe+1],Re=ke[Qe],isNaN(Re)||(Pe=it?Pe+(Re+it):Pe+(Re+" "));else Pe=ke[0];Ie[he.type](ce.target,he.property,Pe,Q,ce.id),he.currentValue=Pe,D++}if(D=Object.keys(Q).length)for(ie=0;ie<D;ie++)be||(be=C(document.body,"transform")?"transform":"-webkit-transform"),y.animatables[ie].target.style[be]=Q[ie].join(" ");y.currentTime=S,y.progress=S/y.duration*100}function j(S){y[S]&&y[S](y)}function q(){y.remaining&&y.remaining!==!0&&y.remaining--}function V(S){var D=y.duration,Q=y.offset,ie=Q+y.delay,fe=y.currentTime,he=y.reversed,ce=B(S);if(y.children.length){var de=y.children,ke=de.length;if(ce>=y.currentTime)for(var oe=0;oe<ke;oe++)de[oe].seek(ce);else for(;ke--;)de[ke].seek(ce)}(ie<=ce||!D)&&(y.began||(y.began=!0,j("begin")),j("run")),Q<ce&&ce<D?P(ce):(ce<=Q&&fe!==0&&(P(0),he&&q()),(D<=ce&&fe!==D||!D)&&(P(D),he||q())),j("update"),D<=S&&(y.remaining?(X=U,y.direction==="alternate"&&(y.reversed=!y.reversed)):(y.pause(),y.completed||(y.completed=!0,j("complete"),"Promise"in window&&(ne(),v=x()))),K=0)}E=E===void 0?{}:E;var U,X,K=0,ne=null,v=x(),y=me(E);return y.reset=function(){var S=y.direction,D=y.loop;for(y.currentTime=0,y.progress=0,y.paused=!0,y.began=!1,y.completed=!1,y.reversed=S==="reverse",y.remaining=S==="alternate"&&D===1?2:D,P(0),S=y.children.length;S--;)y.children[S].reset()},y.tick=function(S){U=S,X||(X=U),V((K+U-X)*te.speed)},y.seek=function(S){V(B(S))},y.pause=function(){var S=ue.indexOf(y);-1<S&&ue.splice(S,1),y.paused=!0},y.play=function(){y.paused&&(y.paused=!1,X=0,K=B(y.currentTime),ue.push(y),Me||Ue())},y.reverse=function(){y.reversed=!y.reversed,X=0,K=B(y.currentTime)},y.restart=function(){y.pause(),y.reset(),y.play()},y.finished=v,y.reset(),y.autoplay&&y.play(),y}var be,We={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},Ae={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},qe="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),J={arr:function(E){return Array.isArray(E)},obj:function(E){return-1<Object.prototype.toString.call(E).indexOf("Object")},pth:function(E){return J.obj(E)&&E.hasOwnProperty("totalLength")},svg:function(E){return E instanceof SVGElement},dom:function(E){return E.nodeType||J.svg(E)},str:function(E){return typeof E=="string"},fnc:function(E){return typeof E=="function"},und:function(E){return E===void 0},hex:function(E){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(E)},rgb:function(E){return/^rgb/.test(E)},hsl:function(E){return/^hsl/.test(E)},col:function(E){return J.hex(E)||J.rgb(E)||J.hsl(E)}},Se=function(){function E(x,B,P){return(((1-3*P+3*B)*x+(3*P-6*B))*x+3*B)*x}return function(x,B,P,j){if(0<=x&&x<=1&&0<=P&&P<=1){var q=new Float32Array(11);if(x!==B||P!==j)for(var V=0;V<11;++V)q[V]=E(.1*V,x,P);return function(U){if(x===B&&P===j)return U;if(U===0)return 0;if(U===1)return 1;for(var X=0,K=1;K!==10&&q[K]<=U;++K)X+=.1;var K=X+(U-q[--K])/(q[K+1]-q[K])*.1,ne=3*(1-3*P+3*x)*K*K+2*(3*P-6*x)*K+3*x;if(.001<=ne){for(X=0;X<4&&(ne=3*(1-3*P+3*x)*K*K+2*(3*P-6*x)*K+3*x)!=0;++X)var v=E(K,x,P)-U,K=K-v/ne;U=K}else if(ne===0)U=K;else{for(var K=X,X=X+.1,y=0;0<(ne=E(v=K+(X-K)/2,x,P)-U)?X=v:K=v,1e-7<Math.abs(ne)&&++y<10;);U=v}return E(U,B,j)}}}}(),xe=function(){function E(V,U){return V===0||V===1?V:-Math.pow(2,10*(V-1))*Math.sin(2*(V-1-U/(2*Math.PI)*Math.asin(1))*Math.PI/U)}var x,B="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),P={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],E],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(V,U){return 1-E(1-V,U)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(V,U){return V<.5?E(2*V,U)/2:1-E(-2*V+2,U)/2}]},j={linear:Se(.25,.25,.75,.75)},q={};for(x in P)q.type=x,P[q.type].forEach(function(V){return function(U,X){j["ease"+V.type+B[X]]=J.fnc(U)?U:Se.apply(W,U)}}(q)),q={type:q.type};return j}(),Ie={css:function(E,x,B){return E.style[x]=B},attribute:function(E,x,B){return E.setAttribute(x,B)},object:function(E,x,B){return E[x]=B},transform:function(E,x,B,P,j){P[j]||(P[j]=[]),P[j].push(x+"("+B+")")}},ue=[],Me=0,Ue=function(){function E(){Me=requestAnimationFrame(x)}function x(B){var P=ue.length;if(P){for(var j=0;j<P;)ue[j]&&ue[j].tick(B),j++;E()}else cancelAnimationFrame(Me),Me=0}return E}();return te.version="2.2.0",te.speed=1,te.running=ue,te.remove=function(E){E=Y(E);for(var x=ue.length;x--;)for(var B=ue[x],P=B.animations,j=P.length;j--;)d(E,P[j].animatable.target)&&(P.splice(j,1),P.length||B.pause())},te.getValue=I,te.path=function(E,x){var B=J.str(E)?c(E)[0]:E,P=x||100;return function(j){return{el:B,property:j,totalLength:F(B)*(P/100)}}},te.setDashoffset=function(E){var x=F(E);return E.setAttribute("stroke-dasharray",x),x},te.bezier=Se,te.easings=xe,te.timeline=function(E){var x=te(E);return x.pause(),x.duration=0,x.add=function(B){return x.children.forEach(function(P){P.began=!0,P.completed=!0}),k(B).forEach(function(P){var j=a(P,s(Ae,E||{}));j.targets=j.targets||E.targets,P=x.duration;var q=j.offset;j.autoplay=!1,j.direction=x.direction,j.offset=J.und(q)?P:R(q,P),x.began=!0,x.completed=!0,x.seek(j.offset),(j=te(j)).began=!0,j.completed=!0,j.duration>P&&(x.duration=j.duration),x.children.push(j)}),x.seek(0),x.reset(),x.autoplay&&x.restart(),x},x},te.random=function(E,x){return Math.floor(Math.random()*(x-E+1))+E},te}(),function(c,p){var w={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));(h.el.M_Collapsible=h).options=c.extend({},n.defaults,a),h.$headers=h.$el.children("li").children(".collapsible-header"),h.$headers.attr("tabindex",0),h._setupEventHandlers();var m=h.$el.children("li.active").children(".collapsible-body");return h.options.accordion?m.first().css("display","block"):m.css("display","block"),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var s=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(a){a.addEventListener("keydown",s._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var s=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(a){a.removeEventListener("keydown",s._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(s){var a=c(s.target).closest(".collapsible-header");if(s.target&&a.length){var h=a.closest(".collapsible");if(h[0]===this.el){var m=a.closest("li"),C=h.children("li"),O=m[0].classList.contains("active"),I=C.index(m);O?this.close(I):this.open(I)}}}},{key:"_handleCollapsibleKeydown",value:function(s){s.keyCode===13&&this._handleCollapsibleClickBound(s)}},{key:"_animateIn",value:function(s){var a=this,h=this.$el.children("li").eq(s);if(h.length){var m=h.children(".collapsible-body");p.remove(m[0]),m.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var C=m.css("padding-top"),O=m.css("padding-bottom"),I=m[0].scrollHeight;m.css({paddingTop:0,paddingBottom:0}),p({targets:m[0],height:I,paddingTop:C,paddingBottom:O,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(R){m.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),typeof a.options.onOpenEnd=="function"&&a.options.onOpenEnd.call(a,h[0])}})}}},{key:"_animateOut",value:function(s){var a=this,h=this.$el.children("li").eq(s);if(h.length){var m=h.children(".collapsible-body");p.remove(m[0]),m.css("overflow","hidden"),p({targets:m[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){m.css({height:"",overflow:"",padding:"",display:""}),typeof a.options.onCloseEnd=="function"&&a.options.onCloseEnd.call(a,h[0])}})}}},{key:"open",value:function(s){var a=this,h=this.$el.children("li").eq(s);if(h.length&&!h[0].classList.contains("active")){if(typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,h[0]),this.options.accordion){var m=this.$el.children("li");this.$el.children("li.active").each(function(C){var O=m.index(c(C));a.close(O)})}h[0].classList.add("active"),this._animateIn(s)}}},{key:"close",value:function(s){var a=this.$el.children("li").eq(s);a.length&&a[0].classList.contains("active")&&(typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,a[0]),a[0].classList.remove("active"),this._animateOut(s))}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Collapsible}},{key:"defaults",get:function(){return w}}]),n}();M.Collapsible=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"collapsible","M_Collapsible")}(cash,M.anime),function(c,p){var w={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return h.el.M_Dropdown=h,n._dropdowns.push(h),h.id=M.getIdFromTrigger(s),h.dropdownEl=document.getElementById(h.id),h.$dropdownEl=c(h.dropdownEl),h.options=c.extend({},n.defaults,a),h.isOpen=!1,h.isScrollable=!1,h.isTouchMoving=!1,h.focusedIndex=-1,h.filterQuery=[],h.options.container?c(h.options.container).append(h.dropdownEl):h.$el.after(h.dropdownEl),h._makeDropdownFocusable(),h._resetFilterQueryBound=h._resetFilterQuery.bind(h),h._handleDocumentClickBound=h._handleDocumentClick.bind(h),h._handleDocumentTouchmoveBound=h._handleDocumentTouchmove.bind(h),h._handleDropdownClickBound=h._handleDropdownClick.bind(h),h._handleDropdownKeydownBound=h._handleDropdownKeydown.bind(h),h._handleTriggerKeydownBound=h._handleTriggerKeydown.bind(h),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),n._dropdowns.splice(n._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(s){s.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(s){var a=s.toElement||s.relatedTarget,h=!!c(a).closest(".dropdown-content").length,m=!1,C=c(a).closest(".dropdown-trigger");C.length&&C[0].M_Dropdown&&C[0].M_Dropdown.isOpen&&(m=!0),m||h||this.close()}},{key:"_handleDocumentClick",value:function(s){var a=this,h=c(s.target);this.options.closeOnClick&&h.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){a.close()},0):!h.closest(".dropdown-trigger").length&&h.closest(".dropdown-content").length||setTimeout(function(){a.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(s){s.which!==M.keys.ARROW_DOWN&&s.which!==M.keys.ENTER||this.isOpen||(s.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(s){c(s.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(s){if(typeof this.options.onItemClick=="function"){var a=c(s.target).closest("li")[0];this.options.onItemClick.call(this,a)}}},{key:"_handleDropdownKeydown",value:function(s){if(s.which===M.keys.TAB)s.preventDefault(),this.close();else if(s.which!==M.keys.ARROW_DOWN&&s.which!==M.keys.ARROW_UP||!this.isOpen)if(s.which===M.keys.ENTER&&this.isOpen){var a=this.dropdownEl.children[this.focusedIndex],h=c(a).find("a, button").first();h.length?h[0].click():a.click()}else s.which===M.keys.ESC&&this.isOpen&&(s.preventDefault(),this.close());else{s.preventDefault();var m=s.which===M.keys.ARROW_DOWN?1:-1,C=this.focusedIndex,O=!1;do if(C+=m,this.dropdownEl.children[C]&&this.dropdownEl.children[C].tabIndex!==-1){O=!0;break}while(C<this.dropdownEl.children.length&&0<=C);O&&(this.focusedIndex=C,this._focusFocusedItem())}var I=String.fromCharCode(s.which).toLowerCase();if(I&&[9,13,27,38,40].indexOf(s.which)===-1){this.filterQuery.push(I);var R=this.filterQuery.join(""),H=c(this.dropdownEl).find("li").filter(function(N){return c(N).text().toLowerCase().indexOf(R)===0})[0];H&&(this.focusedIndex=c(H).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,c(this.dropdownEl).children().each(function(s){s.getAttribute("tabindex")||s.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){0<=this.focusedIndex&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var s=this.el.getBoundingClientRect(),a=this.dropdownEl.getBoundingClientRect(),h=a.height,m=a.width,C=s.left-a.left,O=s.top-a.top,I={left:C,top:O,height:h,width:m},R=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,H=M.checkPossibleAlignments(this.el,R,I,this.options.coverTrigger?0:s.height),N="top",F=this.options.alignment;if(O+=this.options.coverTrigger?0:s.height,this.isScrollable=!1,H.top||(H.bottom?N="bottom":(this.isScrollable=!0,H.spaceOnTop>H.spaceOnBottom?(N="bottom",h+=H.spaceOnTop,O-=H.spaceOnTop):h+=H.spaceOnBottom)),!H[F]){var le=F==="left"?"right":"left";H[le]?F=le:H.spaceOnLeft>H.spaceOnRight?(F="right",m+=H.spaceOnLeft,C-=H.spaceOnLeft):(F="left",m+=H.spaceOnRight)}return N==="bottom"&&(O=O-a.height+(this.options.coverTrigger?s.height:0)),F==="right"&&(C=C-a.width+s.width),{x:C,y:O,verticalAlignment:N,horizontalAlignment:F,height:h,width:m}}},{key:"_animateIn",value:function(){var s=this;p.remove(this.dropdownEl),p({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(a){if(s.options.autoFocus&&s.dropdownEl.focus(),typeof s.options.onOpenEnd=="function"){var h=a.animatables[0].target;s.options.onOpenEnd.call(h,s.el)}}})}},{key:"_animateOut",value:function(){var s=this;p.remove(this.dropdownEl),p({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(a){s._resetDropdownStyles(),typeof s.options.onCloseEnd=="function"&&(a.animatables[0].target,s.options.onCloseEnd.call(s,s.el))}})}},{key:"_placeDropdown",value:function(){var s=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=s+"px";var a=this._getDropdownPosition();this.dropdownEl.style.left=a.x+"px",this.dropdownEl.style.top=a.y+"px",this.dropdownEl.style.height=a.height+"px",this.dropdownEl.style.width=a.width+"px",this.dropdownEl.style.transformOrigin=(a.horizontalAlignment==="left"?"0":"100%")+" "+(a.verticalAlignment==="top"?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Dropdown}},{key:"defaults",get:function(){return w}}]),n}();k._dropdowns=[],window.M.Dropdown=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"dropdown","M_Dropdown")}(cash,M.anime),function(c,p){var w={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_Modal=h).options=c.extend({},n.defaults,a),h.isOpen=!1,h.id=h.$el.attr("id"),h._openingTrigger=void 0,h.$overlay=c('<div class="modal-overlay"></div>'),h.el.tabIndex=0,h._nthModalOpened=0,n._count++,h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){n._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),n._count===1&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){n._count===0&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(s){var a=c(s.target).closest(".modal-trigger");if(a.length){var h=M.getIdFromTrigger(a[0]),m=document.getElementById(h).M_Modal;m&&m.open(a),s.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(s){c(s.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(s){s.keyCode===27&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(s){this.el.contains(s.target)||this._nthModalOpened!==n._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var s=this;c.extend(this.el.style,{display:"block",opacity:0}),c.extend(this.$overlay[0].style,{display:"block",opacity:0}),p({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var a={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){typeof s.options.onOpenEnd=="function"&&s.options.onOpenEnd.call(s,s.el,s._openingTrigger)}};this.el.classList.contains("bottom-sheet")?c.extend(a,{bottom:0,opacity:1}):c.extend(a,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),p(a)}},{key:"_animateOut",value:function(){var s=this;p({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var a={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){s.el.style.display="none",s.$overlay.remove(),typeof s.options.onCloseEnd=="function"&&s.options.onCloseEnd.call(s,s.el)}};this.el.classList.contains("bottom-sheet")?c.extend(a,{bottom:"-100%",opacity:0}):c.extend(a,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),p(a)}},{key:"open",value:function(s){if(!this.isOpen)return this.isOpen=!0,n._modalsOpen++,this._nthModalOpened=n._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*n._modalsOpen,this.el.style.zIndex=1e3+2*n._modalsOpen+1,this._openingTrigger=s?s[0]:void 0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),p.remove(this.el),p.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,n._modalsOpen--,this._nthModalOpened=0,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),n._modalsOpen===0&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),p.remove(this.el),p.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Modal}},{key:"defaults",get:function(){return w}}]),n}();k._modalsOpen=0,k._count=0,M.Modal=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"modal","M_Modal")}(cash,M.anime),function(c,p){var w={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_Materialbox=h).options=c.extend({},n.defaults,a),h.overlayActive=!1,h.doneAnimating=!0,h.placeholder=c("<div></div>").addClass("material-placeholder"),h.originalWidth=0,h.originalHeight=0,h.originInlineStyles=h.$el.attr("style"),h.caption=h.el.getAttribute("data-caption")||"",h.$el.before(h.placeholder),h.placeholder.append(h.$el),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,c(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(s){this.doneAnimating===!1||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(s){s.keyCode===27&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=c();for(var s=this.placeholder[0].parentNode;s!==null&&!c(s).is(document);){var a=c(s);a.css("overflow")!=="visible"&&(a.css("overflow","visible"),this.ancestorsChanged===void 0?this.ancestorsChanged=a:this.ancestorsChanged=this.ancestorsChanged.add(a)),s=s.parentNode}}},{key:"_animateImageIn",value:function(){var s=this,a={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){s.doneAnimating=!0,typeof s.options.onOpenEnd=="function"&&s.options.onOpenEnd.call(s,s.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),this.maxWidth!=="none"&&(a.maxWidth=this.newWidth),this.maxHeight!=="none"&&(a.maxHeight=this.newHeight),p(a)}},{key:"_animateImageOut",value:function(){var s=this,a={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){s.placeholder.css({height:"",width:"",position:"",top:"",left:""}),s.attrWidth&&s.$el.attr("width",s.attrWidth),s.attrHeight&&s.$el.attr("height",s.attrHeight),s.$el.removeAttr("style"),s.originInlineStyles&&s.$el.attr("style",s.originInlineStyles),s.$el.removeClass("active"),s.doneAnimating=!0,s.ancestorsChanged.length&&s.ancestorsChanged.css("overflow",""),typeof s.options.onCloseEnd=="function"&&s.options.onCloseEnd.call(s,s.el)}};p(a)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var s=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=c('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){s.doneAnimating&&s.close()}),this.$el.before(this.$overlay);var a=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*a.left+"px",top:-1*a.top+"px"}),p.remove(this.el),p.remove(this.$overlay[0]),p({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),this.caption!==""&&(this.$photocaption&&p.remove(this.$photoCaption[0]),this.$photoCaption=c('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),c("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),p({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var h=0,m=this.originalWidth/this.windowWidth,C=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,C<m?(h=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*h):(h=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*h,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var s=this;this._updateVars(),this.doneAnimating=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),p.remove(this.el),p.remove(this.$overlay[0]),this.caption!==""&&p.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),p({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){s.overlayActive=!1,s.$overlay.remove()}}),this._animateImageOut(),this.caption!==""&&p({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){s.$photoCaption.remove()}})}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Materialbox}},{key:"defaults",get:function(){return w}}]),n}();M.Materialbox=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"materialbox","M_Materialbox")}(cash,M.anime),function(c){var p={responsiveThreshold:0},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(a.el.M_Parallax=a).options=c.extend({},d.defaults,s),a._enabled=window.innerWidth>a.options.responsiveThreshold,a.$img=a.$el.find("img").first(),a.$img.each(function(){this.complete&&c(this).trigger("load")}),a._updateParallax(),a._setupEventHandlers(),a._setupStyles(),d._parallaxes.push(a),a}return l(d,f),i(d,[{key:"destroy",value:function(){d._parallaxes.splice(d._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),d._parallaxes.length===0&&(d._handleScrollThrottled=M.throttle(d._handleScroll,5),window.addEventListener("scroll",d._handleScrollThrottled),d._handleWindowResizeThrottled=M.throttle(d._handleWindowResize,5),window.addEventListener("resize",d._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),d._parallaxes.length===0&&(window.removeEventListener("scroll",d._handleScrollThrottled),window.removeEventListener("resize",d._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var n=0<this.$el.height()?this.el.parentNode.offsetHeight:500,s=this.$img[0].offsetHeight-n,a=this.$el.offset().top+n,h=this.$el.offset().top,m=M.getDocumentScrollTop(),C=window.innerHeight,O=s*((m+C-h)/(n+C));this._enabled?m<a&&h<m+C&&(this.$img[0].style.transform="translate3D(-50%, "+O+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Parallax}},{key:"_handleScroll",value:function(){for(var n=0;n<d._parallaxes.length;n++){var s=d._parallaxes[n];s._updateParallax.call(s)}}},{key:"_handleWindowResize",value:function(){for(var n=0;n<d._parallaxes.length;n++){var s=d._parallaxes[n];s._enabled=window.innerWidth>s.options.responsiveThreshold}}},{key:"defaults",get:function(){return p}}]),d}();w._parallaxes=[],M.Parallax=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"parallax","M_Parallax")}(cash),function(c,p){var w={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_Tabs=h).options=c.extend({},n.defaults,a),h.$tabLinks=h.$el.children("li.tab").children("a"),h.index=0,h._setupActiveTabLink(),h.options.swipeable?h._setupSwipeableTabs():h._setupNormalTabs(),h._setTabsAndTabWidth(),h._createIndicator(),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),this.tabWidth!==0&&this.tabsWidth!==0&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(s){var a=this,h=c(s.target).closest("li.tab"),m=c(s.target).closest("a");if(m.length&&m.parent().hasClass("tab")){if(h.hasClass("disabled"))s.preventDefault();else if(!m.attr("target")){this.$activeTabLink.removeClass("active");var C=this.$content;this.$activeTabLink=m,this.$content=c(M.escapeHash(m[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var O=this.index;this.index=Math.max(this.$tabLinks.index(m),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){typeof a.options.onShow=="function"&&a.options.onShow.call(a,a.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),typeof this.options.onShow=="function"&&this.options.onShow.call(this,this.$content[0]),C.length&&!C.is(this.$content)&&(C[0].style.display="none",C.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(O),s.preventDefault()}}}},{key:"_createIndicator",value:function(){var s=this,a=document.createElement("li");a.classList.add("indicator"),this.el.appendChild(a),this._indicator=a,setTimeout(function(){s._indicator.style.left=s._calcLeftPos(s.$activeTabLink)+"px",s._indicator.style.right=s._calcRightPos(s.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=c(this.$tabLinks.filter('[href="'+location.hash+'"]')),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=c(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var s=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var a=c();this.$tabLinks.each(function(C){var O=c(M.escapeHash(C.hash));O.addClass("carousel-item"),a=a.add(O)});var h=c('<div class="tabs-content carousel carousel-slider"></div>');a.first().before(h),h.append(a),a[0].style.display="";var m=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(h[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(C){var O=s.index;s.index=c(C).index(),s.$activeTabLink.removeClass("active"),s.$activeTabLink=s.$tabLinks.eq(s.index),s.$activeTabLink.addClass("active"),s._animateIndicator(O),typeof s.options.onShow=="function"&&s.options.onShow.call(s,s.$content[0])}}),this._tabsCarousel.set(m)}},{key:"_teardownSwipeableTabs",value:function(){var s=this._tabsCarousel.$el;this._tabsCarousel.destroy(),s.after(s.children()),s.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(s){if(s.hash){var a=c(M.escapeHash(s.hash));a.length&&(a[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(s){if(s.hash){var a=c(M.escapeHash(s.hash));a.length&&(a[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(s){return Math.ceil(this.tabsWidth-s.position().left-s[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(s){return Math.floor(s.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(s){var a=0,h=0;0<=this.index-s?a=90:h=90;var m={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:a},right:{value:this._calcRightPos(this.$activeTabLink),delay:h},duration:this.options.duration,easing:"easeOutQuad"};p.remove(this._indicator),p(m)}},{key:"select",value:function(s){var a=this.$tabLinks.filter('[href="#'+s+'"]');a.length&&a.trigger("click")}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Tabs}},{key:"defaults",get:function(){return w}}]),n}();window.M.Tabs=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"tabs","M_Tabs")}(cash,M.anime),function(c,p){var w={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_Tooltip=h).options=c.extend({},n.defaults,a),h.isOpen=!1,h.isHovered=!1,h.isFocused=!1,h._appendTooltipEl(),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){c(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var s=document.createElement("div");s.classList.add("material-tooltip"),this.tooltipEl=s;var a=document.createElement("div");a.classList.add("tooltip-content"),a.innerHTML=this.options.html,s.appendChild(a),document.body.appendChild(s)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(s){this.isOpen||(s=s===void 0||void 0,this.isOpen=!0,this.options=c.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(s))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var s=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){s.isHovered||s.isFocused||s._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(s){var a=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(a.isHovered||a.isFocused||s)&&a._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var s,a=this.el,h=this.tooltipEl,m=a.offsetHeight,C=a.offsetWidth,O=h.offsetHeight,I=h.offsetWidth,R=this.options.margin,H=void 0,N=void 0;this.xMovement=0,this.yMovement=0,H=a.getBoundingClientRect().top+M.getDocumentScrollTop(),N=a.getBoundingClientRect().left+M.getDocumentScrollLeft(),this.options.position==="top"?(H+=-O-R,N+=C/2-I/2,this.yMovement=-this.options.transitionMovement):this.options.position==="right"?(H+=m/2-O/2,N+=C+R,this.xMovement=this.options.transitionMovement):this.options.position==="left"?(H+=m/2-O/2,N+=-I-R,this.xMovement=-this.options.transitionMovement):(H+=m+R,N+=C/2-I/2,this.yMovement=this.options.transitionMovement),s=this._repositionWithinScreen(N,H,I,O),c(h).css({top:s.y+"px",left:s.x+"px"})}},{key:"_repositionWithinScreen",value:function(s,a,h,m){var C=M.getDocumentScrollLeft(),O=M.getDocumentScrollTop(),I=s-C,R=a-O,H={left:I,top:R,width:h,height:m},N=this.options.margin+this.options.transitionMovement,F=M.checkWithinContainer(document.body,H,N);return F.left?I=N:F.right&&(I-=I+h-window.innerWidth),F.top?R=N:F.bottom&&(R-=R+m-window.innerHeight),{x:I+C,y:R+O}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",p.remove(this.tooltipEl),p({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){p.remove(this.tooltipEl),p({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var s={},a=this.el.getAttribute("data-tooltip"),h=this.el.getAttribute("data-position");return a&&(s.html=a),h&&(s.position=h),s}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Tooltip}},{key:"defaults",get:function(){return w}}]),n}();M.Tooltip=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"tooltip","M_Tooltip")}(cash,M.anime),function(c){var p=p||{},w=document.querySelectorAll.bind(document);function k(a){var h="";for(var m in a)a.hasOwnProperty(m)&&(h+=m+":"+a[m]+";");return h}var d={duration:750,show:function(a,h){if(a.button===2)return!1;var m=h||this,C=document.createElement("div");C.className="waves-ripple",m.appendChild(C);var O,I,R,H,N,F,le,z=(F={top:0,left:0},le=(O=m)&&O.ownerDocument,I=le.documentElement,O.getBoundingClientRect!==void 0&&(F=O.getBoundingClientRect()),R=(N=H=le)!==null&&N===N.window?H:H.nodeType===9&&H.defaultView,{top:F.top+R.pageYOffset-I.clientTop,left:F.left+R.pageXOffset-I.clientLeft}),Y=a.pageY-z.top,se=a.pageX-z.left,re="scale("+m.clientWidth/100*10+")";"touches"in a&&(Y=a.touches[0].pageY-z.top,se=a.touches[0].pageX-z.left),C.setAttribute("data-hold",Date.now()),C.setAttribute("data-scale",re),C.setAttribute("data-x",se),C.setAttribute("data-y",Y);var Z={top:Y+"px",left:se+"px"};C.className=C.className+" waves-notransition",C.setAttribute("style",k(Z)),C.className=C.className.replace("waves-notransition",""),Z["-webkit-transform"]=re,Z["-moz-transform"]=re,Z["-ms-transform"]=re,Z["-o-transform"]=re,Z.transform=re,Z.opacity="1",Z["-webkit-transition-duration"]=d.duration+"ms",Z["-moz-transition-duration"]=d.duration+"ms",Z["-o-transition-duration"]=d.duration+"ms",Z["transition-duration"]=d.duration+"ms",Z["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Z["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",C.setAttribute("style",k(Z))},hide:function(a){n.touchup(a);var h=this,m=(h.clientWidth,null),C=h.getElementsByClassName("waves-ripple");if(!(0<C.length))return!1;var O=(m=C[C.length-1]).getAttribute("data-x"),I=m.getAttribute("data-y"),R=m.getAttribute("data-scale"),H=350-(Date.now()-Number(m.getAttribute("data-hold")));H<0&&(H=0),setTimeout(function(){var N={top:I+"px",left:O+"px",opacity:"0","-webkit-transition-duration":d.duration+"ms","-moz-transition-duration":d.duration+"ms","-o-transition-duration":d.duration+"ms","transition-duration":d.duration+"ms","-webkit-transform":R,"-moz-transform":R,"-ms-transform":R,"-o-transform":R,transform:R};m.setAttribute("style",k(N)),setTimeout(function(){try{h.removeChild(m)}catch{return!1}},d.duration)},H)},wrapInput:function(a){for(var h=0;h<a.length;h++){var m=a[h];if(m.tagName.toLowerCase()==="input"){var C=m.parentNode;if(C.tagName.toLowerCase()==="i"&&C.className.indexOf("waves-effect")!==-1)continue;var O=document.createElement("i");O.className=m.className+" waves-input-wrapper";var I=m.getAttribute("style");I||(I=""),O.setAttribute("style",I),m.className="waves-button-input",m.removeAttribute("style"),C.replaceChild(O,m),O.appendChild(m)}}}},n={touches:0,allowEvent:function(a){var h=!0;return a.type==="touchstart"?n.touches+=1:a.type==="touchend"||a.type==="touchcancel"?setTimeout(function(){0<n.touches&&(n.touches-=1)},500):a.type==="mousedown"&&0<n.touches&&(h=!1),h},touchup:function(a){n.allowEvent(a)}};function s(a){var h=function(m){if(n.allowEvent(m)===!1)return null;for(var C=null,O=m.target||m.srcElement;O.parentNode!==null;){if(!(O instanceof SVGElement)&&O.className.indexOf("waves-effect")!==-1){C=O;break}O=O.parentNode}return C}(a);h!==null&&(d.show(a,h),"ontouchstart"in c&&(h.addEventListener("touchend",d.hide,!1),h.addEventListener("touchcancel",d.hide,!1)),h.addEventListener("mouseup",d.hide,!1),h.addEventListener("mouseleave",d.hide,!1),h.addEventListener("dragend",d.hide,!1))}p.displayEffect=function(a){"duration"in(a=a||{})&&(d.duration=a.duration),d.wrapInput(w(".waves-effect")),"ontouchstart"in c&&document.body.addEventListener("touchstart",s,!1),document.body.addEventListener("mousedown",s,!1)},p.attach=function(a){a.tagName.toLowerCase()==="input"&&(d.wrapInput([a]),a=a.parentNode),"ontouchstart"in c&&a.addEventListener("touchstart",s,!1),a.addEventListener("mousedown",s,!1)},c.Waves=p,document.addEventListener("DOMContentLoaded",function(){p.displayEffect()},!1)}(window),function(c,p){var w={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},k=function(){function d(n){u(this,d),this.options=c.extend({},d.defaults,n),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,d._toasts.length===0&&d._createContainer(),d._toasts.push(this);var s=this._createToast();(s.M_Toast=this).el=s,this.$el=c(s),this._animateIn(),this._setTimer()}return i(d,[{key:"_createToast",value:function(){var n=document.createElement("div");return n.classList.add("toast"),this.options.classes.length&&c(n).addClass(this.options.classes),(typeof HTMLElement=="object"?this.message instanceof HTMLElement:this.message&&typeof this.message=="object"&&this.message!==null&&this.message.nodeType===1&&typeof this.message.nodeName=="string")?n.appendChild(this.message):this.message.jquery?c(n).append(this.message[0]):n.innerHTML=this.message,d._container.appendChild(n),n}},{key:"_animateIn",value:function(){p({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var n=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){n.panning||(n.timeRemaining-=20),n.timeRemaining<=0&&n.dismiss()},20))}},{key:"dismiss",value:function(){var n=this;window.clearInterval(this.counterInterval);var s=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+s+"px)",this.el.style.opacity=0),p({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){typeof n.options.completeCallback=="function"&&n.options.completeCallback(),n.$el.remove(),d._toasts.splice(d._toasts.indexOf(n),1),d._toasts.length===0&&d._removeContainer()}})}}],[{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Toast}},{key:"_createContainer",value:function(){var n=document.createElement("div");n.setAttribute("id","toast-container"),n.addEventListener("touchstart",d._onDragStart),n.addEventListener("touchmove",d._onDragMove),n.addEventListener("touchend",d._onDragEnd),n.addEventListener("mousedown",d._onDragStart),document.addEventListener("mousemove",d._onDragMove),document.addEventListener("mouseup",d._onDragEnd),document.body.appendChild(n),d._container=n}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",d._onDragMove),document.removeEventListener("mouseup",d._onDragEnd),c(d._container).remove(),d._container=null}},{key:"_onDragStart",value:function(n){if(n.target&&c(n.target).closest(".toast").length){var s=c(n.target).closest(".toast")[0].M_Toast;s.panning=!0,(d._draggedToast=s).el.classList.add("panning"),s.el.style.transition="",s.startingXPos=d._xPos(n),s.time=Date.now(),s.xPos=d._xPos(n)}}},{key:"_onDragMove",value:function(n){if(d._draggedToast){n.preventDefault();var s=d._draggedToast;s.deltaX=Math.abs(s.xPos-d._xPos(n)),s.xPos=d._xPos(n),s.velocityX=s.deltaX/(Date.now()-s.time),s.time=Date.now();var a=s.xPos-s.startingXPos,h=s.el.offsetWidth*s.options.activationPercent;s.el.style.transform="translateX("+a+"px)",s.el.style.opacity=1-Math.abs(a/h)}}},{key:"_onDragEnd",value:function(){if(d._draggedToast){var n=d._draggedToast;n.panning=!1,n.el.classList.remove("panning");var s=n.xPos-n.startingXPos,a=n.el.offsetWidth*n.options.activationPercent;Math.abs(s)>a||1<n.velocityX?(n.wasSwiped=!0,n.dismiss()):(n.el.style.transition="transform .2s, opacity .2s",n.el.style.transform="",n.el.style.opacity=""),d._draggedToast=null}}},{key:"_xPos",value:function(n){return n.targetTouches&&1<=n.targetTouches.length?n.targetTouches[0].clientX:n.clientX}},{key:"dismissAll",value:function(){for(var n in d._toasts)d._toasts[n].dismiss()}},{key:"defaults",get:function(){return w}}]),d}();k._toasts=[],k._container=null,k._draggedToast=null,M.Toast=k,M.toast=function(d){return new k(d)}}(cash,M.anime),function(c,p){var w={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_Sidenav=h).id=h.$el.attr("id"),h.options=c.extend({},n.defaults,a),h.isOpen=!1,h.isFixed=h.el.classList.contains("sidenav-fixed"),h.isDragged=!1,h.lastWindowWidth=window.innerWidth,h.lastWindowHeight=window.innerHeight,h._createOverlay(),h._createDragTarget(),h._setupEventHandlers(),h._setupClasses(),h._setupFixed(),n._sidenavs.push(h),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var s=n._sidenavs.indexOf(this);0<=s&&n._sidenavs.splice(s,1)}},{key:"_createOverlay",value:function(){var s=document.createElement("div");this._closeBound=this.close.bind(this),s.classList.add("sidenav-overlay"),s.addEventListener("click",this._closeBound),document.body.appendChild(s),this._overlay=s}},{key:"_setupEventHandlers",value:function(){n._sidenavs.length===0&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){n._sidenavs.length===1&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(s){var a=c(s.target).closest(".sidenav-trigger");if(s.target&&a.length){var h=M.getIdFromTrigger(a[0]),m=document.getElementById(h).M_Sidenav;m&&m.open(a),s.preventDefault()}}},{key:"_startDrag",value:function(s){var a=s.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=a,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,p.remove(this.el),p.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(s){var a=s.targetTouches[0].clientX,h=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-a),this._xPos=a,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==h&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(s){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(s),this._dragMoveUpdate(s);var a=this._xPos-this._startingXpos,h=0<a?"right":"left";a=Math.min(this._width,Math.abs(a)),this.options.edge===h&&(a=0);var m=a,C="translateX(-100%)";this.options.edge==="right"&&(C="translateX(100%)",m=-m),this.percentOpen=Math.min(1,a/this._width),this.el.style.transform=C+" translateX("+m+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(.2<this.percentOpen?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(s){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(s),this._dragMoveUpdate(s);var a=this._xPos-this._startingXpos,h=0<a?"right":"left";a=Math.min(this._width,Math.abs(a)),this.options.edge!==h&&(a=0);var m=-a;this.options.edge==="right"&&(m=-m),this.percentOpen=Math.min(1,1-a/this._width),this.el.style.transform="translateX("+m+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(.8<this.percentOpen?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(s){c(s.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(992<window.innerWidth?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){this.options.edge==="right"&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&992<window.innerWidth}},{key:"_createDragTarget",value:function(){var s=document.createElement("div");s.classList.add("drag-target"),document.body.appendChild(s),this.dragTarget=s}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){this.isOpen!==!0&&(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(p.remove(this.el),p({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&this.percentOpen==1||this._animateIn()))}},{key:"close",value:function(){if(this.isOpen!==!1)if(this.isOpen=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var s=this.options.edge==="left"?"-105%":"105%";this.el.style.transform="translateX("+s+")"}else this._enableBodyScrolling(),this.isDragged&&this.percentOpen==0?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var s=this,a=this.options.edge==="left"?-1:1;this.isDragged&&(a=this.options.edge==="left"?a+this.percentOpen:a-this.percentOpen),p.remove(this.el),p({targets:this.el,translateX:[100*a+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){typeof s.options.onOpenEnd=="function"&&s.options.onOpenEnd.call(s,s.el)}})}},{key:"_animateOverlayIn",value:function(){var s=0;this.isDragged?s=this.percentOpen:c(this._overlay).css({display:"block"}),p.remove(this._overlay),p({targets:this._overlay,opacity:[s,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var s=this,a=this.options.edge==="left"?-1:1,h=0;this.isDragged&&(h=this.options.edge==="left"?a+this.percentOpen:a-this.percentOpen),p.remove(this.el),p({targets:this.el,translateX:[100*h+"%",105*a+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){typeof s.options.onCloseEnd=="function"&&s.options.onCloseEnd.call(s,s.el)}})}},{key:"_animateOverlayOut",value:function(){var s=this;p.remove(this._overlay),p({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){c(s._overlay).css("display","none")}})}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Sidenav}},{key:"defaults",get:function(){return w}}]),n}();k._sidenavs=[],window.M.Sidenav=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"sidenav","M_Sidenav")}(cash,M.anime),function(c,p){var w={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(d){return'a[href="#'+d+'"]'}},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_ScrollSpy=h).options=c.extend({},n.defaults,a),n._elements.push(h),n._count++,n._increment++,h.tickId=-1,h.id=n._increment,h._setupEventHandlers(),h._handleWindowScroll(),h}return l(n,f),i(n,[{key:"destroy",value:function(){n._elements.splice(n._elements.indexOf(this),1),n._elementsInView.splice(n._elementsInView.indexOf(this),1),n._visibleElements.splice(n._visibleElements.indexOf(this.$el),1),n._count--,this._removeEventHandlers(),c(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var s=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=s.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),n._count===1&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){n._count===0&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(s){for(var a=c(s.target),h=n._elements.length-1;0<=h;h--){var m=n._elements[h];if(a.is('a[href="#'+m.$el.attr("id")+'"]')){s.preventDefault();var C=m.$el.offset().top+1;p({targets:[document.documentElement,document.body],scrollTop:C-m.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){n._ticks++;for(var s=M.getDocumentScrollTop(),a=M.getDocumentScrollLeft(),h=a+window.innerWidth,m=s+window.innerHeight,C=n._findElements(s,h,m,a),O=0;O<C.length;O++){var I=C[O];I.tickId<0&&I._enter(),I.tickId=n._ticks}for(var R=0;R<n._elementsInView.length;R++){var H=n._elementsInView[R],N=H.tickId;0<=N&&N!==n._ticks&&(H._exit(),H.tickId=-1)}n._elementsInView=C}},{key:"_enter",value:function(){(n._visibleElements=n._visibleElements.filter(function(s){return s.height()!=0}))[0]?(c(this.options.getActiveElement(n._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),n._visibleElements[0][0].M_ScrollSpy&&this.id<n._visibleElements[0][0].M_ScrollSpy.id?n._visibleElements.unshift(this.$el):n._visibleElements.push(this.$el)):n._visibleElements.push(this.$el),c(this.options.getActiveElement(n._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var s=this;(n._visibleElements=n._visibleElements.filter(function(a){return a.height()!=0}))[0]&&(c(this.options.getActiveElement(n._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),(n._visibleElements=n._visibleElements.filter(function(a){return a.attr("id")!=s.$el.attr("id")}))[0]&&c(this.options.getActiveElement(n._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_ScrollSpy}},{key:"_findElements",value:function(s,a,h,m){for(var C=[],O=0;O<n._elements.length;O++){var I=n._elements[O],R=s+I.options.scrollOffset||200;if(0<I.$el.height()){var H=I.$el.offset().top,N=I.$el.offset().left,F=N+I.$el.width(),le=H+I.$el.height();!(a<N||F<m||h<H||le<R)&&C.push(I)}}return C}},{key:"defaults",get:function(){return w}}]),n}();k._elements=[],k._elementsInView=[],k._visibleElements=[],k._count=0,k._increment=0,k._ticks=0,M.ScrollSpy=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(c){var p={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(k,d,n){return k.indexOf(n)-d.indexOf(n)}},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(a.el.M_Autocomplete=a).options=c.extend({},d.defaults,s),a.isOpen=!1,a.count=0,a.activeIndex=-1,a.oldVal,a.$inputField=a.$el.closest(".input-field"),a.$active=c(),a._mousedown=!1,a._setupDropdown(),a._setupEventHandlers(),a}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),window.ontouchstart!==void 0&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),window.ontouchstart!==void 0&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var n=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),c(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(s){n.selectOption(c(s))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(n){n.type==="keyup"&&(d._keydown=!1),this.count=0;var s=this.el.value.toLowerCase();n.keyCode!==13&&n.keyCode!==38&&n.keyCode!==40&&(this.oldVal===s||!M.tabPressed&&n.type==="focus"||this.open(),this.oldVal=s)}},{key:"_handleInputKeydown",value:function(n){d._keydown=!0;var s=n.keyCode,a=void 0,h=c(this.container).children("li").length;s===M.keys.ENTER&&0<=this.activeIndex?(a=c(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(a),n.preventDefault()):s!==M.keys.ARROW_UP&&s!==M.keys.ARROW_DOWN||(n.preventDefault(),s===M.keys.ARROW_UP&&0<this.activeIndex&&this.activeIndex--,s===M.keys.ARROW_DOWN&&this.activeIndex<h-1&&this.activeIndex++,this.$active.removeClass("active"),0<=this.activeIndex&&(this.$active=c(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(n){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(n){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(n){this._mousedown=!1}},{key:"_highlight",value:function(n,s){var a=s.find("img"),h=s.text().toLowerCase().indexOf(""+n.toLowerCase()),m=h+n.length-1,C=s.text().slice(0,h),O=s.text().slice(h,m+1),I=s.text().slice(m+1);s.html("<span>"+C+"<span class='highlight'>"+O+"</span>"+I+"</span>"),a.length&&s.prepend(a)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){c(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(n){var s=n.text().trim();this.el.value=s,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),typeof this.options.onAutocomplete=="function"&&this.options.onAutocomplete.call(this,s)}},{key:"_renderDropdown",value:function(n,s){var a=this;this._resetAutocomplete();var h=[];for(var m in n)if(n.hasOwnProperty(m)&&m.toLowerCase().indexOf(s)!==-1){if(this.count>=this.options.limit)break;var C={data:n[m],key:m};h.push(C),this.count++}this.options.sortFunction&&h.sort(function(H,N){return a.options.sortFunction(H.key.toLowerCase(),N.key.toLowerCase(),s.toLowerCase())});for(var O=0;O<h.length;O++){var I=h[O],R=c("<li></li>");I.data?R.append('<img src="'+I.data+'" class="right circle"><span>'+I.key+"</span>"):R.append("<span>"+I.key+"</span>"),c(this.container).append(R),this._highlight(s,R)}}},{key:"open",value:function(){var n=this.el.value.toLowerCase();this._resetAutocomplete(),n.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,n)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(n){var s=this.el.value.toLowerCase();this.options.data=n,this.isOpen&&this._renderDropdown(n,s)}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Autocomplete}},{key:"defaults",get:function(){return p}}]),d}();w._keydown=!1,M.Autocomplete=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"autocomplete","M_Autocomplete")}(cash),function(c){M.updateTextFields=function(){c("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(p,w){var k=c(this);0<p.value.length||c(p).is(":focus")||p.autofocus||k.attr("placeholder")!==null?k.siblings("label").addClass("active"):p.validity?k.siblings("label").toggleClass("active",p.validity.badInput===!0):k.siblings("label").removeClass("active")})},M.validate_field=function(p){var w=p.attr("data-length")!==null,k=parseInt(p.attr("data-length")),d=p[0].value.length;d!==0||p[0].validity.badInput!==!1||p.is(":required")?p.hasClass("validate")&&(p.is(":valid")&&w&&d<=k||p.is(":valid")&&!w?(p.removeClass("invalid"),p.addClass("valid")):(p.removeClass("valid"),p.addClass("invalid"))):p.hasClass("validate")&&(p.removeClass("valid"),p.removeClass("invalid"))},M.textareaAutoResize=function(p){if(p instanceof Element&&(p=c(p)),p.length){var w=c(".hiddendiv").first();w.length||(w=c('<div class="hiddendiv common"></div>'),c("body").append(w));var k=p.css("font-family"),d=p.css("font-size"),n=p.css("line-height"),s=p.css("padding-top"),a=p.css("padding-right"),h=p.css("padding-bottom"),m=p.css("padding-left");d&&w.css("font-size",d),k&&w.css("font-family",k),n&&w.css("line-height",n),s&&w.css("padding-top",s),a&&w.css("padding-right",a),h&&w.css("padding-bottom",h),m&&w.css("padding-left",m),p.data("original-height")||p.data("original-height",p.height()),p.attr("wrap")==="off"&&w.css("overflow-wrap","normal").css("white-space","pre"),w.text(p[0].value+`
`);var C=w.html().replace(/\n/g,"<br>");w.html(C),0<p[0].offsetWidth&&0<p[0].offsetHeight?w.css("width",p.width()+"px"):w.css("width",window.innerWidth/2+"px"),p.data("original-height")<=w.innerHeight()?p.css("height",w.innerHeight()+"px"):p[0].value.length<p.data("previous-length")&&p.css("height",p.data("original-height")+"px"),p.data("previous-length",p[0].value.length)}else console.error("No textarea element found")},c(document).ready(function(){var p="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";c(document).on("change",p,function(){this.value.length===0&&c(this).attr("placeholder")===null||c(this).siblings("label").addClass("active"),M.validate_field(c(this))}),c(document).ready(function(){M.updateTextFields()}),c(document).on("reset",function(k){var d=c(k.target);d.is("form")&&(d.find(p).removeClass("valid").removeClass("invalid"),d.find(p).each(function(n){this.value.length&&c(this).siblings("label").removeClass("active")}),setTimeout(function(){d.find("select").each(function(){this.M_FormSelect&&c(this).trigger("change")})},0))}),document.addEventListener("focus",function(k){c(k.target).is(p)&&c(k.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(k){var d=c(k.target);if(d.is(p)){var n=".prefix";d[0].value.length===0&&d[0].validity.badInput!==!0&&d.attr("placeholder")===null&&(n+=", label"),d.siblings(n).removeClass("active"),M.validate_field(d)}},!0),c(document).on("keyup","input[type=radio], input[type=checkbox]",function(k){if(k.which===M.keys.TAB)return c(this).addClass("tabbed"),void c(this).one("blur",function(d){c(this).removeClass("tabbed")})});var w=".materialize-textarea";c(w).each(function(){var k=c(this);k.data("original-height",k.height()),k.data("previous-length",this.value.length),M.textareaAutoResize(k)}),c(document).on("keyup",w,function(){M.textareaAutoResize(c(this))}),c(document).on("keydown",w,function(){M.textareaAutoResize(c(this))}),c(document).on("change",'.file-field input[type="file"]',function(){for(var k=c(this).closest(".file-field").find("input.file-path"),d=c(this)[0].files,n=[],s=0;s<d.length;s++)n.push(d[s].name);k[0].value=n.join(", "),k.trigger("change")})})}(cash),function(c,p){var w={indicators:!0,height:400,duration:500,interval:6e3},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_Slider=h).options=c.extend({},n.defaults,a),h.$slider=h.$el.find(".slides"),h.$slides=h.$slider.children("li"),h.activeIndex=h.$slides.filter(function(m){return c(m).hasClass("active")}).first().index(),h.activeIndex!=-1&&(h.$active=h.$slides.eq(h.activeIndex)),h._setSliderHeight(),h.$slides.find(".caption").each(function(m){h._animateCaptionIn(m,0)}),h.$slides.find("img").each(function(m){var C="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";c(m).attr("src")!==C&&(c(m).css("background-image",'url("'+c(m).attr("src")+'")'),c(m).attr("src",C))}),h._setupIndicators(),h.$active?h.$active.css("display","block"):(h.$slides.first().addClass("active"),p({targets:h.$slides.first()[0],opacity:1,duration:h.options.duration,easing:"easeOutQuad"}),h.activeIndex=0,h.$active=h.$slides.eq(h.activeIndex),h.options.indicators&&h.$indicators.eq(h.activeIndex).addClass("active")),h.$active.find("img").each(function(m){p({targets:h.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:h.options.duration,easing:"easeOutQuad"})}),h._setupEventHandlers(),h.start(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var s=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(a){a.addEventListener("click",s._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var s=this;this.options.indicators&&this.$indicators.each(function(a){a.removeEventListener("click",s._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(s){var a=c(s.target).index();this.set(a)}},{key:"_handleInterval",value:function(){var s=this.$slider.find(".active").index();this.$slides.length===s+1?s=0:s+=1,this.set(s)}},{key:"_animateCaptionIn",value:function(s,a){var h={targets:s,opacity:0,duration:a,easing:"easeOutQuad"};c(s).hasClass("center-align")?h.translateY=-100:c(s).hasClass("right-align")?h.translateX=100:c(s).hasClass("left-align")&&(h.translateX=-100),p(h)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var s=this;this.options.indicators&&(this.$indicators=c('<ul class="indicators"></ul>'),this.$slides.each(function(a,h){var m=c('<li class="indicator-item"></li>');s.$indicators.append(m[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(s){var a=this;if(s>=this.$slides.length?s=0:s<0&&(s=this.$slides.length-1),this.activeIndex!=s){this.$active=this.$slides.eq(this.activeIndex);var h=this.$active.find(".caption");this.$active.removeClass("active"),p({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){a.$slides.not(".active").each(function(m){p({targets:m,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(h[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(s).addClass("active")),p({targets:this.$slides.eq(s)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),p({targets:this.$slides.eq(s).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(s).addClass("active"),this.activeIndex=s,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var s=this.activeIndex+1;s>=this.$slides.length?s=0:s<0&&(s=this.$slides.length-1),this.set(s)}},{key:"prev",value:function(){var s=this.activeIndex-1;s>=this.$slides.length?s=0:s<0&&(s=this.$slides.length-1),this.set(s)}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Slider}},{key:"defaults",get:function(){return w}}]),n}();M.Slider=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"slider","M_Slider")}(cash,M.anime),function(c,p){c(document).on("click",".card",function(w){if(c(this).children(".card-reveal").length){var k=c(w.target).closest(".card");k.data("initialOverflow")===void 0&&k.data("initialOverflow",k.css("overflow")===void 0?"":k.css("overflow"));var d=c(this).find(".card-reveal");c(w.target).is(c(".card-reveal .card-title"))||c(w.target).is(c(".card-reveal .card-title i"))?p({targets:d[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(n){var s=n.animatables[0].target;c(s).css({display:"none"}),k.css("overflow",k.data("initialOverflow"))}}):(c(w.target).is(c(".card .activator"))||c(w.target).is(c(".card .activator i")))&&(k.css("overflow","hidden"),d.css({display:"block"}),p({targets:d[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(c){var p={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(a.el.M_Chips=a).options=c.extend({},d.defaults,s),a.$el.addClass("chips input-field"),a.chipsData=[],a.$chips=c(),a._setupInput(),a.hasAutocomplete=0<Object.keys(a.options.autocompleteOptions).length,a.$input.attr("id")||a.$input.attr("id",M.guid()),a.options.data.length&&(a.chipsData=a.options.data,a._renderChips(a.chipsData)),a.hasAutocomplete&&a._setupAutocomplete(),a._setPlaceholder(),a._setupLabel(),a._setupEventHandlers(),a}return l(d,f),i(d,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",d._handleChipsKeydown),document.addEventListener("keyup",d._handleChipsKeyup),this.el.addEventListener("blur",d._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",d._handleChipsKeydown),document.removeEventListener("keyup",d._handleChipsKeyup),this.el.removeEventListener("blur",d._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(n){var s=c(n.target).closest(".chip"),a=c(n.target).is(".close");if(s.length){var h=s.index();a?(this.deleteChip(h),this.$input[0].focus()):this.selectChip(h)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(n){if(d._keydown=!0,n.keyCode===13){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;n.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else n.keyCode!==8&&n.keyCode!==37||this.$input[0].value!==""||!this.chipsData.length||(n.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(n){if(n.tag){var s=document.createElement("div"),a=document.createElement("i");if(s.classList.add("chip"),s.textContent=n.tag,s.setAttribute("tabindex",0),c(a).addClass("material-icons close"),a.textContent="close",n.image){var h=document.createElement("img");h.setAttribute("src",n.image),s.insertBefore(h,s.firstChild)}return s.appendChild(a),s}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var n=0;n<this.chipsData.length;n++){var s=this._renderChip(this.chipsData[n]);this.$el.append(s),this.$chips.add(s)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var n=this;this.options.autocompleteOptions.onAutocomplete=function(s){n.addChip({tag:s}),n.$input[0].value="",n.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=c("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){this.chipsData!==void 0&&!this.chipsData.length&&this.options.placeholder?c(this.$input).prop("placeholder",this.options.placeholder):(this.chipsData===void 0||this.chipsData.length)&&this.options.secondaryPlaceholder&&c(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(n){if(n.hasOwnProperty("tag")&&n.tag!==""){for(var s=!1,a=0;a<this.chipsData.length;a++)if(this.chipsData[a].tag===n.tag){s=!0;break}return!s}return!1}},{key:"addChip",value:function(n){if(this._isValid(n)&&!(this.chipsData.length>=this.options.limit)){var s=this._renderChip(n);this.$chips.add(s),this.chipsData.push(n),c(this.$input).before(s),this._setPlaceholder(),typeof this.options.onChipAdd=="function"&&this.options.onChipAdd.call(this,this.$el,s)}}},{key:"deleteChip",value:function(n){var s=this.$chips.eq(n);this.$chips.eq(n).remove(),this.$chips=this.$chips.filter(function(a){return 0<=c(a).index()}),this.chipsData.splice(n,1),this._setPlaceholder(),typeof this.options.onChipDelete=="function"&&this.options.onChipDelete.call(this,this.$el,s[0])}},{key:"selectChip",value:function(n){var s=this.$chips.eq(n);(this._selectedChip=s)[0].focus(),typeof this.options.onChipSelect=="function"&&this.options.onChipSelect.call(this,this.$el,s[0])}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Chips}},{key:"_handleChipsKeydown",value:function(n){d._keydown=!0;var s=c(n.target).closest(".chips"),a=n.target&&s.length;if(!c(n.target).is("input, textarea")&&a){var h=s[0].M_Chips;if(n.keyCode===8||n.keyCode===46){n.preventDefault();var m=h.chipsData.length;if(h._selectedChip){var C=h._selectedChip.index();h.deleteChip(C),h._selectedChip=null,m=Math.max(C-1,0)}h.chipsData.length&&h.selectChip(m)}else if(n.keyCode===37){if(h._selectedChip){var O=h._selectedChip.index()-1;if(O<0)return;h.selectChip(O)}}else if(n.keyCode===39&&h._selectedChip){var I=h._selectedChip.index()+1;I>=h.chipsData.length?h.$input[0].focus():h.selectChip(I)}}}},{key:"_handleChipsKeyup",value:function(n){d._keydown=!1}},{key:"_handleChipsBlur",value:function(n){d._keydown||(c(n.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return p}}]),d}();w._keydown=!1,M.Chips=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"chips","M_Chips"),c(document).ready(function(){c(document.body).on("click",".chip .close",function(){var k=c(this).closest(".chips");k.length&&k[0].M_Chips||c(this).closest(".chip").remove()})})}(cash),function(c){var p={top:0,bottom:1/0,offset:0,onPositionChange:null},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(a.el.M_Pushpin=a).options=c.extend({},d.defaults,s),a.originalOffset=a.el.offsetTop,d._pushpins.push(a),a._setupEventHandlers(),a._updatePosition(),a}return l(d,f),i(d,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var n=d._pushpins.indexOf(this);d._pushpins.splice(n,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",d._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",d._updateElements)}},{key:"_updatePosition",value:function(){var n=M.getDocumentScrollTop()+this.options.offset;this.options.top<=n&&this.options.bottom>=n&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pinned")),n<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-top")),n>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px",typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Pushpin}},{key:"_updateElements",value:function(){for(var n in d._pushpins)d._pushpins[n]._updatePosition()}},{key:"defaults",get:function(){return p}}]),d}();w._pushpins=[],M.Pushpin=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"pushpin","M_Pushpin")}(cash),function(c,p){var w={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};c.fn.reverse=[].reverse;var k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_FloatingActionButton=h).options=c.extend({},n.defaults,a),h.isOpen=!1,h.$anchor=h.$el.children("a").first(),h.$menu=h.$el.children("ul").first(),h.$floatingBtns=h.$el.find("ul .btn-floating"),h.$floatingBtnsReverse=h.$el.find("ul .btn-floating").reverse(),h.offsetY=0,h.offsetX=0,h.$el.addClass("direction-"+h.options.direction),h.options.direction==="top"?h.offsetY=40:h.options.direction==="right"?h.offsetX=-40:h.options.direction==="bottom"?h.offsetY=-40:h.offsetX=40,h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(s){c(s.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var s=this;this.$el.addClass("active");var a=0;this.$floatingBtnsReverse.each(function(h){p({targets:h,opacity:1,scale:[.4,1],translateY:[s.offsetY,0],translateX:[s.offsetX,0],duration:275,delay:a,easing:"easeInOutQuad"}),a+=40})}},{key:"_animateOutFAB",value:function(){var s=this;this.$floatingBtnsReverse.each(function(a){p.remove(a),p({targets:a,opacity:0,scale:.4,translateY:s.offsetY,translateX:s.offsetX,duration:175,easing:"easeOutQuad",complete:function(){s.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var s,a=this,h=window.innerWidth,m=window.innerHeight,C=this.el.getBoundingClientRect(),O=c('<div class="fab-backdrop"></div>'),I=this.$anchor.css("background-color");this.$anchor.append(O),this.offsetX=C.left-h/2+C.width/2,this.offsetY=m-C.bottom,s=h/O[0].clientWidth,this.btnBottom=C.bottom,this.btnLeft=C.left,this.btnWidth=C.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),O.css({"background-color":I}),setTimeout(function(){a.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),a.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){a.$el.css({overflow:"hidden","background-color":I}),O.css({transform:"scale("+s+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),a.$menu.children("li").children("a").css({opacity:1}),a._handleDocumentClickBound=a._handleDocumentClick.bind(a),window.addEventListener("scroll",a._handleCloseBound,!0),document.body.addEventListener("click",a._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var s=this,a=window.innerWidth,h=window.innerHeight,m=this.$el.find(".fab-backdrop"),C=this.$anchor.css("background-color");this.offsetX=this.btnLeft-a/2+this.btnWidth/2,this.offsetY=h-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),m.css({transform:"scale(0)","background-color":C}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){m.remove(),s.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-s.offsetX+"px,0,0)"}),s.$anchor.css({overflow:"",transform:"translate3d(0,"+s.offsetY+"px,0)"}),setTimeout(function(){s.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),s.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_FloatingActionButton}},{key:"defaults",get:function(){return w}}]),n}();M.FloatingActionButton=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(c){var p={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"‹",nextMonth:"›",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));(a.el.M_Datepicker=a).options=c.extend({},d.defaults,s),s&&s.hasOwnProperty("i18n")&&typeof s.i18n=="object"&&(a.options.i18n=c.extend({},d.defaults.i18n,s.i18n)),a.options.minDate&&a.options.minDate.setHours(0,0,0,0),a.options.maxDate&&a.options.maxDate.setHours(0,0,0,0),a.id=M.guid(),a._setupVariables(),a._insertHTMLIntoDOM(),a._setupModal(),a._setupEventHandlers(),a.options.defaultDate||(a.options.defaultDate=new Date(Date.parse(a.el.value)));var h=a.options.defaultDate;return d._isDate(h)?a.options.setDefaultDate?(a.setDate(h,!0),a.setInputValue()):a.gotoDate(h):a.gotoDate(new Date),a.isOpen=!1,a}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),c(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var n=this.calendarEl.querySelector(".orig-select-year");n&&M.FormSelect.getInstance(n).destroy();var s=this.calendarEl.querySelector(".orig-select-month");s&&M.FormSelect.getInstance(s).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(c(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var n=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){n.isOpen=!1}})}},{key:"toString",value:function(n){var s=this;return n=n||this.options.format,d._isDate(this.date)?n.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(a){return s.formats[a]?s.formats[a]():a}).join(""):""}},{key:"setDate",value:function(n,s){if(!n)return this.date=null,this._renderDateDisplay(),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),d._isDate(n)){var a=this.options.minDate,h=this.options.maxDate;d._isDate(a)&&n<a?n=a:d._isDate(h)&&h<n&&(n=h),this.date=new Date(n.getTime()),this._renderDateDisplay(),d._setToStartOfDay(this.date),this.gotoDate(this.date),s||typeof this.options.onSelect!="function"||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var n=d._isDate(this.date)?this.date:new Date,s=this.options.i18n,a=s.weekdaysShort[n.getDay()],h=s.monthsShort[n.getMonth()],m=n.getDate();this.yearTextEl.innerHTML=n.getFullYear(),this.dateTextEl.innerHTML=a+", "+h+" "+m}},{key:"gotoDate",value:function(n){var s=!0;if(d._isDate(n)){if(this.calendars){var a=new Date(this.calendars[0].year,this.calendars[0].month,1),h=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),m=n.getTime();h.setMonth(h.getMonth()+1),h.setDate(h.getDate()-1),s=m<a.getTime()||h.getTime()<m}s&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),11<n.month&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(n,s,a){var h=this.options,m=new Date,C=d._getDaysInMonth(n,s),O=new Date(n,s,1).getDay(),I=[],R=[];d._setToStartOfDay(m),0<h.firstDay&&(O-=h.firstDay)<0&&(O+=7);for(var H=s===0?11:s-1,N=s===11?0:s+1,F=s===0?n-1:n,le=s===11?n+1:n,z=d._getDaysInMonth(F,H),Y=C+O,se=Y;7<se;)se-=7;Y+=7-se;for(var re=!1,Z=0,me=0;Z<Y;Z++){var te=new Date(n,s,Z-O+1),be=!!d._isDate(this.date)&&d._compareDates(te,this.date),We=d._compareDates(te,m),Ae=h.events.indexOf(te.toDateString())!==-1,qe=Z<O||C+O<=Z,J=Z-O+1,Se=s,xe=n,Ie=h.startRange&&d._compareDates(h.startRange,te),ue=h.endRange&&d._compareDates(h.endRange,te),Me=h.startRange&&h.endRange&&h.startRange<te&&te<h.endRange;qe&&(Z<O?(J=z+J,Se=H,xe=F):(J-=C,Se=N,xe=le));var Ue={day:J,month:Se,year:xe,hasEvent:Ae,isSelected:be,isToday:We,isDisabled:h.minDate&&te<h.minDate||h.maxDate&&te>h.maxDate||h.disableWeekends&&d._isWeekend(te)||h.disableDayFn&&h.disableDayFn(te),isEmpty:qe,isStartRange:Ie,isEndRange:ue,isInRange:Me,showDaysInNextAndPreviousMonths:h.showDaysInNextAndPreviousMonths};R.push(this.renderDay(Ue)),++me==7&&(I.push(this.renderRow(R,h.isRTL,re)),me=0,re=!(R=[]))}return this.renderTable(h,I,a)}},{key:"renderDay",value:function(n){var s=[],a="false";if(n.isEmpty){if(!n.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';s.push("is-outside-current-month"),s.push("is-selection-disabled")}return n.isDisabled&&s.push("is-disabled"),n.isToday&&s.push("is-today"),n.isSelected&&(s.push("is-selected"),a="true"),n.hasEvent&&s.push("has-event"),n.isInRange&&s.push("is-inrange"),n.isStartRange&&s.push("is-startrange"),n.isEndRange&&s.push("is-endrange"),'<td data-day="'+n.day+'" class="'+s.join(" ")+'" aria-selected="'+a+'"><button class="datepicker-day-button" type="button" data-year="'+n.year+'" data-month="'+n.month+'" data-day="'+n.day+'">'+n.day+"</button></td>"}},{key:"renderRow",value:function(n,s,a){return'<tr class="datepicker-row'+(a?" is-selected":"")+'">'+(s?n.reverse():n).join("")+"</tr>"}},{key:"renderTable",value:function(n,s,a){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+a+'">'+this.renderHead(n)+this.renderBody(s)+"</table></div>"}},{key:"renderHead",value:function(n){var s=void 0,a=[];for(s=0;s<7;s++)a.push('<th scope="col"><abbr title="'+this.renderDayName(n,s)+'">'+this.renderDayName(n,s,!0)+"</abbr></th>");return"<thead><tr>"+(n.isRTL?a.reverse():a).join("")+"</tr></thead>"}},{key:"renderBody",value:function(n){return"<tbody>"+n.join("")+"</tbody>"}},{key:"renderTitle",value:function(n,s,a,h,m,C){var O,I,R=void 0,H=void 0,N=void 0,F=this.options,le=a===F.minYear,z=a===F.maxYear,Y='<div id="'+C+'" class="datepicker-controls" role="heading" aria-live="assertive">',se=!0,re=!0;for(N=[],R=0;R<12;R++)N.push('<option value="'+(a===m?R-s:12+R-s)+'"'+(R===h?' selected="selected"':"")+(le&&R<F.minMonth||z&&R>F.maxMonth?'disabled="disabled"':"")+">"+F.i18n.months[R]+"</option>");for(O='<select class="datepicker-select orig-select-month" tabindex="-1">'+N.join("")+"</select>",c.isArray(F.yearRange)?(R=F.yearRange[0],H=F.yearRange[1]+1):(R=a-F.yearRange,H=1+a+F.yearRange),N=[];R<H&&R<=F.maxYear;R++)R>=F.minYear&&N.push('<option value="'+R+'" '+(R===a?'selected="selected"':"")+">"+R+"</option>");return I='<select class="datepicker-select orig-select-year" tabindex="-1">'+N.join("")+"</select>",Y+='<button class="month-prev'+(se?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',Y+='<div class="selects-container">',F.showMonthAfterYear?Y+=I+O:Y+=O+I,Y+="</div>",le&&(h===0||F.minMonth>=h)&&(se=!1),z&&(h===11||F.maxMonth<=h)&&(re=!1),(Y+='<button class="month-next'+(re?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(n){if(this.isOpen||n){var s,a=this.options,h=a.minYear,m=a.maxYear,C=a.minMonth,O=a.maxMonth,I="";this._y<=h&&(this._y=h,!isNaN(C)&&this._m<C&&(this._m=C)),this._y>=m&&(this._y=m,!isNaN(O)&&this._m>O&&(this._m=O)),s="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var R=0;R<1;R++)this._renderDateDisplay(),I+=this.renderTitle(this,R,this.calendars[R].year,this.calendars[R].month,this.calendars[0].year,s)+this.render(this.calendars[R].year,this.calendars[R].month,s);this.destroySelects(),this.calendarEl.innerHTML=I;var H=this.calendarEl.querySelector(".orig-select-year"),N=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(H,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(N,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),H.addEventListener("change",this._handleYearChange.bind(this)),N.addEventListener("change",this._handleMonthChange.bind(this)),typeof this.options.onDraw=="function"&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var n=this;this.$modalEl=c(d._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return n.date.getDate()},dd:function(){var s=n.date.getDate();return(s<10?"0":"")+s},ddd:function(){return n.options.i18n.weekdaysShort[n.date.getDay()]},dddd:function(){return n.options.i18n.weekdays[n.date.getDay()]},m:function(){return n.date.getMonth()+1},mm:function(){var s=n.date.getMonth()+1;return(s<10?"0":"")+s},mmm:function(){return n.options.i18n.monthsShort[n.date.getMonth()]},mmmm:function(){return n.options.i18n.months[n.date.getMonth()]},yy:function(){return(""+n.date.getFullYear()).slice(2)},yyyy:function(){return n.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(n){n.which===M.keys.ENTER&&(n.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(n){if(this.isOpen){var s=c(n.target);s.hasClass("is-disabled")||(!s.hasClass("datepicker-day-button")||s.hasClass("is-empty")||s.parent().hasClass("is-disabled")?s.closest(".month-prev").length?this.prevMonth():s.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(n.target.getAttribute("data-year"),n.target.getAttribute("data-month"),n.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(n){this.gotoMonth(n.target.value)}},{key:"_handleYearChange",value:function(n){this.gotoYear(n.target.value)}},{key:"gotoMonth",value:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())}},{key:"gotoYear",value:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(n){var s=void 0;n.firedBy!==this&&(s=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),d._isDate(s)&&this.setDate(s))}},{key:"renderDayName",value:function(n,s,a){for(s+=n.firstDay;7<=s;)s-=7;return a?n.i18n.weekdaysAbbrev[s]:n.i18n.weekdays[s]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,typeof this.options.onOpen=="function"&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,typeof this.options.onClose=="function"&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"_isDate",value:function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())}},{key:"_isWeekend",value:function(n){var s=n.getDay();return s===0||s===6}},{key:"_setToStartOfDay",value:function(n){d._isDate(n)&&n.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(n,s){return[31,d._isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][s]}},{key:"_isLeapYear",value:function(n){return n%4==0&&n%100!=0||n%400==0}},{key:"_compareDates",value:function(n,s){return n.getTime()===s.getTime()}},{key:"_setToStartOfDay",value:function(n){d._isDate(n)&&n.setHours(0,0,0,0)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Datepicker}},{key:"defaults",get:function(){return p}}]),d}();w._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"datepicker","M_Datepicker")}(cash),function(c){var p={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(a.el.M_Timepicker=a).options=c.extend({},d.defaults,s),a.id=M.guid(),a._insertHTMLIntoDOM(),a._setupModal(),a._setupVariables(),a._setupEventHandlers(),a._clockSetup(),a._pickerSetup(),a}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),c(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),c(this.spanHours).on("click",this.showView.bind(this,"hours")),c(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(n){n.which===M.keys.ENTER&&(n.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(n){n.preventDefault();var s=this.plate.getBoundingClientRect(),a=s.left,h=s.top;this.x0=a+this.options.dialRadius,this.y0=h+this.options.dialRadius,this.moved=!1;var m=d._Pos(n);this.dx=m.x-this.x0,this.dy=m.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(n){n.preventDefault();var s=d._Pos(n),a=s.x-this.x0,h=s.y-this.y0;this.moved=!0,this.setHand(a,h,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(n){var s=this;n.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var a=d._Pos(n),h=a.x-this.x0,m=a.y-this.y0;this.moved&&h===this.dx&&m===this.dy&&this.setHand(h,m),this.currentView==="hours"?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(c(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){s.done()},this.options.duration/2)),typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=c(d._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var n=document.querySelector(this.options.container);this.options.container&&n?this.$modalEl.appendTo(n):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var n=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){typeof n.options.onCloseEnd=="function"&&n.options.onCloseEnd.call(n),n.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var n=c('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&n.css({visibility:""});var s=c('<div class="confirmation-btns"></div>');c('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(s).on("click",this.close.bind(this)),c('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(s).on("click",this.done.bind(this)),s.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=c('<div class="am-btn">AM</div>'),this.$pmBtn=c('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var n=this.options.dialRadius,s=this.options.tickRadius,a=2*n,h=d._createSVGEl("svg");h.setAttribute("class","timepicker-svg"),h.setAttribute("width",a),h.setAttribute("height",a);var m=d._createSVGEl("g");m.setAttribute("transform","translate("+n+","+n+")");var C=d._createSVGEl("circle");C.setAttribute("class","timepicker-canvas-bearing"),C.setAttribute("cx",0),C.setAttribute("cy",0),C.setAttribute("r",4);var O=d._createSVGEl("line");O.setAttribute("x1",0),O.setAttribute("y1",0);var I=d._createSVGEl("circle");I.setAttribute("class","timepicker-canvas-bg"),I.setAttribute("r",s),m.appendChild(O),m.appendChild(I),m.appendChild(C),h.appendChild(m),this._canvas.appendChild(h),this.hand=O,this.bg=I,this.bearing=C,this.g=m}},{key:"_buildHoursView",value:function(){var n=c('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var s=1;s<13;s+=1){var a=n.clone(),h=s/6*Math.PI,m=this.options.outerRadius;a.css({left:this.options.dialRadius+Math.sin(h)*m-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(h)*m-this.options.tickRadius+"px"}),a.html(s===0?"00":s),this.hoursView.appendChild(a[0])}else for(var C=0;C<24;C+=1){var O=n.clone(),I=C/6*Math.PI,R=0<C&&C<13?this.options.innerRadius:this.options.outerRadius;O.css({left:this.options.dialRadius+Math.sin(I)*R-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(I)*R-this.options.tickRadius+"px"}),O.html(C===0?"00":C),this.hoursView.appendChild(O[0])}}},{key:"_buildMinutesView",value:function(){for(var n=c('<div class="timepicker-tick"></div>'),s=0;s<60;s+=5){var a=n.clone(),h=s/30*Math.PI;a.css({left:this.options.dialRadius+Math.sin(h)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(h)*this.options.outerRadius-this.options.tickRadius+"px"}),a.html(d._addLeadingZero(s)),this.minutesView.appendChild(a[0])}}},{key:"_handleAmPmClick",value:function(n){var s=c(n.target);this.amOrPm=s.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary",this.amOrPm==="AM"),this.$pmBtn.toggleClass("text-primary",this.amOrPm==="PM"))}},{key:"_updateTimeFromInput",value:function(){var n=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&n[1]!==void 0&&(0<n[1].toUpperCase().indexOf("AM")?this.amOrPm="AM":this.amOrPm="PM",n[1]=n[1].replace("AM","").replace("PM","")),n[0]==="now"){var s=new Date(+new Date+this.options.fromNow);n=[s.getHours(),s.getMinutes()],this.options.twelveHour&&(this.amOrPm=12<=n[0]&&n[0]<24?"PM":"AM")}this.hours=+n[0]||0,this.minutes=+n[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=d._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(n,s){n==="minutes"&&c(this.hoursView).css("visibility");var a=n==="hours",h=a?this.hoursView:this.minutesView,m=a?this.minutesView:this.hoursView;this.currentView=n,c(this.spanHours).toggleClass("text-primary",a),c(this.spanMinutes).toggleClass("text-primary",!a),m.classList.add("timepicker-dial-out"),c(h).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(s),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){c(m).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(n){var s=this.currentView,a=this[s],h=s==="hours",m=a*(Math.PI/(h?6:30)),C=h&&0<a&&a<13?this.options.innerRadius:this.options.outerRadius,O=Math.sin(m)*C,I=-Math.cos(m)*C,R=this;n?(c(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){c(R.canvas).removeClass("timepicker-canvas-out"),R.setHand(O,I)},n)):this.setHand(O,I)}},{key:"setHand",value:function(n,s,a){var h=this,m=Math.atan2(n,-s),C=this.currentView==="hours",O=Math.PI/(C||a?6:30),I=Math.sqrt(n*n+s*s),R=C&&I<(this.options.outerRadius+this.options.innerRadius)/2,H=R?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(H=this.options.outerRadius),m<0&&(m=2*Math.PI+m);var N=Math.round(m/O);m=N*O,this.options.twelveHour?C?N===0&&(N=12):(a&&(N*=5),N===60&&(N=0)):C?(N===12&&(N=0),N=R?N===0?12:N:N===0?0:N+12):(a&&(N*=5),N===60&&(N=0)),this[this.currentView]!==N&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){h.vibrateTimer=null},100))),this[this.currentView]=N,C?this.spanHours.innerHTML=N:this.spanMinutes.innerHTML=d._addLeadingZero(N);var F=Math.sin(m)*(H-this.options.tickRadius),le=-Math.cos(m)*(H-this.options.tickRadius),z=Math.sin(m)*H,Y=-Math.cos(m)*H;this.hand.setAttribute("x2",F),this.hand.setAttribute("y2",le),this.bg.setAttribute("cx",z),this.bg.setAttribute("cy",Y)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(n,s){var a=this.el.value,h=s?"":d._addLeadingZero(this.hours)+":"+d._addLeadingZero(this.minutes);this.time=h,!s&&this.options.twelveHour&&(h=h+" "+this.amOrPm),(this.el.value=h)!==a&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"_addLeadingZero",value:function(n){return(n<10?"0":"")+n}},{key:"_createSVGEl",value:function(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}},{key:"_Pos",value:function(n){return n.targetTouches&&1<=n.targetTouches.length?{x:n.targetTouches[0].clientX,y:n.targetTouches[0].clientY}:{x:n.clientX,y:n.clientY}}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Timepicker}},{key:"defaults",get:function(){return p}}]),d}();w._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"timepicker","M_Timepicker")}(cash),function(c){var p={},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(a.el.M_CharacterCounter=a).options=c.extend({},d.defaults,s),a.isInvalid=!1,a.isValidLength=!1,a._setupCounter(),a._setupEventHandlers(),a}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),c(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){c(this.counterEl).remove()}},{key:"updateCounter",value:function(){var n=+this.$el.attr("data-length"),s=this.el.value.length;this.isValidLength=s<=n;var a=s;n&&(a+="/"+n,this._validateInput()),c(this.counterEl).html(a)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_CharacterCounter}},{key:"defaults",get:function(){return p}}]),d}();M.CharacterCounter=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"characterCounter","M_CharacterCounter")}(cash),function(c){var p={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(a.el.M_Carousel=a).options=c.extend({},d.defaults,s),a.hasMultipleSlides=1<a.$el.find(".carousel-item").length,a.showIndicators=a.options.indicators&&a.hasMultipleSlides,a.noWrap=a.options.noWrap||!a.hasMultipleSlides,a.pressed=!1,a.dragged=!1,a.offset=a.target=0,a.images=[],a.itemWidth=a.$el.find(".carousel-item").first().innerWidth(),a.itemHeight=a.$el.find(".carousel-item").first().innerHeight(),a.dim=2*a.itemWidth+a.options.padding||1,a._autoScrollBound=a._autoScroll.bind(a),a._trackBound=a._track.bind(a),a.options.fullWidth&&(a.options.dist=0,a._setCarouselHeight(),a.showIndicators&&a.$el.find(".carousel-fixed-item").addClass("with-indicators")),a.$indicators=c('<ul class="indicators"></ul>'),a.$el.find(".carousel-item").each(function(h,m){if(a.images.push(h),a.showIndicators){var C=c('<li class="indicator-item"></li>');m===0&&C[0].classList.add("active"),a.$indicators.append(C)}}),a.showIndicators&&a.$el.append(a.$indicators),a.count=a.images.length,a.options.numVisible=Math.min(a.count,a.options.numVisible),a.xform="transform",["webkit","Moz","O","ms"].every(function(h){var m=h+"Transform";return document.body.style[m]===void 0||(a.xform=m,!1)}),a._setupEventHandlers(),a._scroll(a.offset),a}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var n=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),window.ontouchstart!==void 0&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(a,h){a.addEventListener("click",n._handleIndicatorClickBound)}));var s=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=s.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var n=this;window.ontouchstart!==void 0&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(s,a){s.removeEventListener("click",n._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(n){n.type==="mousedown"&&c(n.target).is("img")&&n.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(n),this.referenceY=this._ypos(n),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(n){var s=void 0,a=void 0,h=void 0;if(this.pressed)if(s=this._xpos(n),a=this._ypos(n),h=this.reference-s,Math.abs(this.referenceY-a)<30&&!this.verticalDragged)(2<h||h<-2)&&(this.dragged=!0,this.reference=s,this._scroll(this.offset+h));else{if(this.dragged)return n.preventDefault(),n.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return n.preventDefault(),n.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(n){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(10<this.velocity||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(n.preventDefault(),n.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(n){if(this.dragged)return n.preventDefault(),n.stopPropagation(),!1;if(!this.options.fullWidth){var s=c(n.target).closest(".carousel-item").index();this._wrap(this.center)-s!==0&&(n.preventDefault(),n.stopPropagation()),this._cycleTo(s)}}},{key:"_handleIndicatorClick",value:function(n){n.stopPropagation();var s=c(n.target).closest(".indicator-item");s.length&&this._cycleTo(s.index())}},{key:"_handleResize",value:function(n){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(n){var s=this,a=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),h=a.find("img").first();if(h.length)if(h[0].complete){var m=h.height();if(0<m)this.$el.css("height",m+"px");else{var C=h[0].naturalWidth,O=h[0].naturalHeight,I=this.$el.width()/C*O;this.$el.css("height",I+"px")}}else h.one("load",function(H,N){s.$el.css("height",H.offsetHeight+"px")});else if(!n){var R=a.height();this.$el.css("height",R+"px")}}},{key:"_xpos",value:function(n){return n.targetTouches&&1<=n.targetTouches.length?n.targetTouches[0].clientX:n.clientX}},{key:"_ypos",value:function(n){return n.targetTouches&&1<=n.targetTouches.length?n.targetTouches[0].clientY:n.clientY}},{key:"_wrap",value:function(n){return n>=this.count?n%this.count:n<0?this._wrap(this.count+n%this.count):n}},{key:"_track",value:function(){var n,s,a,h;s=(n=Date.now())-this.timestamp,this.timestamp=n,a=this.offset-this.frame,this.frame=this.offset,h=1e3*a/(1+s),this.velocity=.8*h+.2*this.velocity}},{key:"_autoScroll",value:function(){var n=void 0,s=void 0;this.amplitude&&(n=Date.now()-this.timestamp,2<(s=this.amplitude*Math.exp(-n/this.options.duration))||s<-2?(this._scroll(this.target-s),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(n){var s=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),this.scrollingTimeout!=null&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){s.$el.removeClass("scrolling")},this.options.duration);var a,h,m,C,O=void 0,I=void 0,R=void 0,H=void 0,N=void 0,F=void 0,le=this.center,z=1/this.options.numVisible;if(this.offset=typeof n=="number"?n:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),C=-(m=(h=this.offset-this.center*this.dim)<0?1:-1)*h*2/this.dim,a=this.count>>1,this.options.fullWidth?(R="translateX(0)",F=1):(R="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",R+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",F=1-z*C),this.showIndicators){var Y=this.center%this.count,se=this.$indicators.find(".indicator-item.active");se.index()!==Y&&(se.removeClass("active"),this.$indicators.find(".indicator-item").eq(Y)[0].classList.add("active"))}if(!this.noWrap||0<=this.center&&this.center<this.count){I=this.images[this._wrap(this.center)],c(I).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),I.classList.add("active"));var re=R+" translateX("+-h/2+"px) translateX("+m*this.options.shift*C*O+"px) translateZ("+this.options.dist*C+"px)";this._updateItemStyle(I,F,0,re)}for(O=1;O<=a;++O){if(this.options.fullWidth?(H=this.options.dist,N=O===a&&h<0?1-C:1):(H=this.options.dist*(2*O+C*m),N=1-z*(2*O+C*m)),!this.noWrap||this.center+O<this.count){I=this.images[this._wrap(this.center+O)];var Z=R+" translateX("+(this.options.shift+(this.dim*O-h)/2)+"px) translateZ("+H+"px)";this._updateItemStyle(I,N,-O,Z)}if(this.options.fullWidth?(H=this.options.dist,N=O===a&&0<h?1-C:1):(H=this.options.dist*(2*O-C*m),N=1-z*(2*O-C*m)),!this.noWrap||0<=this.center-O){I=this.images[this._wrap(this.center-O)];var me=R+" translateX("+(-this.options.shift+(-this.dim*O-h)/2)+"px) translateZ("+H+"px)";this._updateItemStyle(I,N,-O,me)}}if(!this.noWrap||0<=this.center&&this.center<this.count){I=this.images[this._wrap(this.center)];var te=R+" translateX("+-h/2+"px) translateX("+m*this.options.shift*C+"px) translateZ("+this.options.dist*C+"px)";this._updateItemStyle(I,F,0,te)}var be=this.$el.find(".carousel-item").eq(this._wrap(this.center));le!==this.center&&typeof this.options.onCycleTo=="function"&&this.options.onCycleTo.call(this,be[0],this.dragged),typeof this.oneTimeCallback=="function"&&(this.oneTimeCallback.call(this,be[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(n,s,a,h){n.style[this.xform]=h,n.style.zIndex=a,n.style.opacity=s,n.style.visibility="visible"}},{key:"_cycleTo",value:function(n,s){var a=this.center%this.count-n;this.noWrap||(a<0?Math.abs(a+this.count)<Math.abs(a)&&(a+=this.count):0<a&&Math.abs(a-this.count)<a&&(a-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),a<0?this.target+=this.dim*Math.abs(a):0<a&&(this.target-=this.dim*a),typeof s=="function"&&(this.oneTimeCallback=s),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(n){(n===void 0||isNaN(n))&&(n=1);var s=this.center+n;if(s>=this.count||s<0){if(this.noWrap)return;s=this._wrap(s)}this._cycleTo(s)}},{key:"prev",value:function(n){(n===void 0||isNaN(n))&&(n=1);var s=this.center-n;if(s>=this.count||s<0){if(this.noWrap)return;s=this._wrap(s)}this._cycleTo(s)}},{key:"set",value:function(n,s){if((n===void 0||isNaN(n))&&(n=0),n>this.count||n<0){if(this.noWrap)return;n=this._wrap(n)}this._cycleTo(n,s)}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_Carousel}},{key:"defaults",get:function(){return p}}]),d}();M.Carousel=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"carousel","M_Carousel")}(cash),function(c){var p={onOpen:void 0,onClose:void 0},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return(a.el.M_TapTarget=a).options=c.extend({},d.defaults,s),a.isOpen=!1,a.$origin=c("#"+a.$el.attr("data-target")),a._setup(),a._calculatePositioning(),a._setupEventHandlers(),a}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var n=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=n.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(n){this.open()}},{key:"_handleOriginClick",value:function(n){this.close()}},{key:"_handleResize",value:function(n){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(n){c(n.target).closest(".tap-target-wrapper").length||(this.close(),n.preventDefault(),n.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=c(this.wrapper).find(".tap-target-wave")[0],this.originEl=c(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],c(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(c(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var n=this.$origin.css("position")==="fixed";if(!n)for(var s=this.$origin.parents(),a=0;a<s.length&&!(n=c(s[a]).css("position")=="fixed");a++);var h=this.$origin.outerWidth(),m=this.$origin.outerHeight(),C=n?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,O=n?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,I=window.innerWidth,R=window.innerHeight,H=I/2,N=R/2,F=O<=H,le=H<O,z=C<=N,Y=N<C,se=.25*I<=O&&O<=.75*I,re=this.$el.outerWidth(),Z=this.$el.outerHeight(),me=C+m/2-Z/2,te=O+h/2-re/2,be=n?"fixed":"absolute",We=se?re:re/2+h,Ae=Z/2,qe=z?Z/2:0,J=F&&!se?re/2-h:0,Se=h,xe=Y?"bottom":"top",Ie=2*h,ue=Ie,Me=Z/2-ue/2,Ue=re/2-Ie/2,E={};E.top=z?me+"px":"",E.right=le?I-te-re+"px":"",E.bottom=Y?R-me-Z+"px":"",E.left=F?te+"px":"",E.position=be,c(this.wrapper).css(E),c(this.contentEl).css({width:We+"px",height:Ae+"px",top:qe+"px",right:"0px",bottom:"0px",left:J+"px",padding:Se+"px",verticalAlign:xe}),c(this.waveEl).css({top:Me+"px",left:Ue+"px",width:Ie+"px",height:ue+"px"})}},{key:"open",value:function(){this.isOpen||(typeof this.options.onOpen=="function"&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&(typeof this.options.onClose=="function"&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_TapTarget}},{key:"defaults",get:function(){return p}}]),d}();M.TapTarget=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"tapTarget","M_TapTarget")}(cash),function(c){var p={classes:"",dropdownOptions:{}},w=function(k){function d(n,s){u(this,d);var a=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,n,s));return a.$el.hasClass("browser-default")?r(a):((a.el.M_FormSelect=a).options=c.extend({},d.defaults,s),a.isMultiple=a.$el.prop("multiple"),a.el.tabIndex=-1,a._keysSelected={},a._valueDict={},a._setupDropdown(),a._setupEventHandlers(),a)}return l(d,f),i(d,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var n=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),c(this.dropdownOptions).find("li:not(.optgroup)").each(function(s){s.addEventListener("click",n._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var n=this;c(this.dropdownOptions).find("li:not(.optgroup)").each(function(s){s.removeEventListener("click",n._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(n){this._setValueToInput()}},{key:"_handleOptionClick",value:function(n){n.preventDefault();var s=c(n.target).closest("li")[0],a=s.id;if(!c(s).hasClass("disabled")&&!c(s).hasClass("optgroup")&&a.length){var h=!0;if(this.isMultiple){var m=c(this.dropdownOptions).find("li.disabled.selected");m.length&&(m.removeClass("selected"),m.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(m[0].id)),h=this._toggleEntryFromArray(a)}else c(this.dropdownOptions).find("li").removeClass("selected"),c(s).toggleClass("selected",h);c(this._valueDict[a].el).prop("selected")!==h&&(c(this._valueDict[a].el).prop("selected",h),this.$el.trigger("change"))}n.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var n=this;this.wrapper=document.createElement("div"),c(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(c(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),c(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(h){if(c(h).is("option")){var m=void 0;m=n.isMultiple?n._appendOptionWithIcon(n.$el,h,"multiple"):n._appendOptionWithIcon(n.$el,h),n._addOptionToValueDict(h,m)}else if(c(h).is("optgroup")){var C=c(h).children("option");c(n.dropdownOptions).append(c('<li class="optgroup"><span>'+h.getAttribute("label")+"</span></li>")[0]),C.each(function(O){var I=n._appendOptionWithIcon(n.$el,O,"optgroup-option");n._addOptionToValueDict(O,I)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),c(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&c(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var s=c('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(s[0]),!this.el.disabled){var a=c.extend({},this.options.dropdownOptions);a.onOpenEnd=function(h){var m=c(n.dropdownOptions).find(".selected").first();if(n.dropdown.isScrollable&&m.length){var C=m[0].getBoundingClientRect().top-n.dropdownOptions.getBoundingClientRect().top;C-=n.dropdownOptions.clientHeight/2,n.dropdownOptions.scrollTop=C}},this.isMultiple&&(a.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,a)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(n,s){var a=Object.keys(this._valueDict).length,h=this.dropdownOptions.id+a,m={};s.id=h,m.el=n,m.optionEl=s,this._valueDict[h]=m}},{key:"_removeDropdown",value:function(){c(this.wrapper).find(".caret").remove(),c(this.input).remove(),c(this.dropdownOptions).remove(),c(this.wrapper).before(this.$el),c(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(n,s,a){var h=s.disabled?"disabled ":"",m=a==="optgroup-option"?"optgroup-option ":"",C=this.isMultiple?'<label><input type="checkbox"'+h+'"/><span>'+s.innerHTML+"</span></label>":s.innerHTML,O=c("<li></li>"),I=c("<span></span>");I.html(C),O.addClass(h+" "+m),O.append(I);var R=s.getAttribute("data-icon");if(R){var H=c('<img alt="" src="'+R+'">');O.prepend(H)}return c(this.dropdownOptions).append(O[0]),O[0]}},{key:"_toggleEntryFromArray",value:function(n){var s=!this._keysSelected.hasOwnProperty(n),a=c(this._valueDict[n].optionEl);return s?this._keysSelected[n]=!0:delete this._keysSelected[n],a.toggleClass("selected",s),a.find('input[type="checkbox"]').prop("checked",s),a.prop("selected",s),s}},{key:"_setValueToInput",value:function(){var n=[];if(this.$el.find("option").each(function(a){if(c(a).prop("selected")){var h=c(a).text();n.push(h)}}),!n.length){var s=this.$el.find("option:disabled").eq(0);s.length&&s[0].value===""&&n.push(s.text())}this.input.value=n.join(", ")}},{key:"_setSelectedStates",value:function(){for(var n in this._keysSelected={},this._valueDict){var s=this._valueDict[n],a=c(s.el).prop("selected");c(s.optionEl).find('input[type="checkbox"]').prop("checked",a),a?(this._activateOption(c(this.dropdownOptions),c(s.optionEl)),this._keysSelected[n]=!0):c(s.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(n,s){s&&(this.isMultiple||n.find("li.selected").removeClass("selected"),c(s).addClass("selected"))}},{key:"getSelectedValues",value:function(){var n=[];for(var s in this._keysSelected)n.push(this._valueDict[s].el.value);return n}}],[{key:"init",value:function(n,s){return t(d.__proto__||Object.getPrototypeOf(d),"init",this).call(this,this,n,s)}},{key:"getInstance",value:function(n){return(n.jquery?n[0]:n).M_FormSelect}},{key:"defaults",get:function(){return p}}]),d}();M.FormSelect=w,M.jQueryLoaded&&M.initializeJqueryWrapper(w,"formSelect","M_FormSelect")}(cash),function(c,p){var w={},k=function(d){function n(s,a){u(this,n);var h=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,s,a));return(h.el.M_Range=h).options=c.extend({},n.defaults,a),h._mousedown=!1,h._setupThumb(),h._setupEventHandlers(),h}return l(n,f),i(n,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){c(this.value).html(this.$el.val()),c(this.thumb).hasClass("active")||this._showRangeBubble();var s=this._calcRangeOffset();c(this.thumb).addClass("active").css("left",s+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(s){if(c(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),c(this.thumb).hasClass("active")||this._showRangeBubble(),s.type!=="input"){var a=this._calcRangeOffset();c(this.thumb).addClass("active").css("left",a+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){c(this.thumb).hasClass("active")||this._showRangeBubble();var s=this._calcRangeOffset();c(this.thumb).addClass("active").css("left",s+"px"),c(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var s=7+parseInt(this.$el.css("padding-left"))+"px";c(this.thumb).hasClass("active")&&(p.remove(this.thumb),p({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:s,duration:100})),c(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),c(this.thumb).addClass("thumb"),c(this.value).addClass("value"),c(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){c(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var s=-7+parseInt(c(this.thumb).parent().css("padding-left"))+"px";p.remove(this.thumb),p({targets:this.thumb,height:30,width:30,top:-30,marginLeft:s,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var s=this.$el.width()-15,a=parseFloat(this.$el.attr("max"))||100,h=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-h)/(a-h)*s}}],[{key:"init",value:function(s,a){return t(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,s,a)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Range}},{key:"defaults",get:function(){return w}}]),n}();M.Range=k,M.jQueryLoaded&&M.initializeJqueryWrapper(k,"range","M_Range"),k.init(c("input[type=range]"))}(cash,M.anime)})(Oi,Oi.exports);const Ln=o=>{let e;return o?e=o:typeof fetch>"u"?e=(...t)=>Ne(async()=>{const{default:i}=await Promise.resolve().then(()=>pt);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class yi extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class $n extends yi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xi extends yi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Mi extends yi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var oi;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(oi||(oi={}));var An=function(o,e,t,i){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(b){try{_(i.next(b))}catch(T){u(T)}}function g(b){try{_(i.throw(b))}catch(T){u(T)}}function _(b){b.done?l(b.value):r(b.value).then(f,g)}_((i=i.apply(o,e||[])).next())})};class In{constructor(e,{headers:t={},customFetch:i,region:r=oi.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Ln(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return An(this,void 0,void 0,function*(){try{const{headers:r,method:l,body:u}=t;let f={},{region:g}=t;g||(g=this.region);const _=new URL(`${this.url}/${e}`);g&&g!=="any"&&(f["x-region"]=g,_.searchParams.set("forceFunctionRegion",g));let b;u&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",b=u):typeof u=="string"?(f["Content-Type"]="text/plain",b=u):typeof FormData<"u"&&u instanceof FormData?b=u:(f["Content-Type"]="application/json",b=JSON.stringify(u)));const T=yield this.fetch(_.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),r),body:b}).catch(c=>{throw new $n(c)}),L=T.headers.get("x-relay-error");if(L&&L==="true")throw new xi(T);if(!T.ok)throw new Mi(T);let A=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),W;return A==="application/json"?W=yield T.json():A==="application/octet-stream"?W=yield T.blob():A==="text/event-stream"?W=T:A==="multipart/form-data"?W=yield T.formData():W=yield T.text(),{data:W,error:null,response:T}}catch(r){return{data:null,error:r,response:r instanceof Mi||r instanceof xi?r.context:void 0}}})}}var Ee={},_i={},Wt={},Ot={},qt={},Ut={},Bn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},dt=Bn();const Dn=dt.fetch,en=dt.fetch.bind(dt),tn=dt.Headers,Pn=dt.Request,Rn=dt.Response,pt=Object.freeze(Object.defineProperty({__proto__:null,Headers:tn,Request:Pn,Response:Rn,default:en,fetch:Dn},Symbol.toStringTag,{value:"Module"})),jn=Mn(pt);var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});let Hn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ft.default=Hn;var nn=ge&&ge.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ut,"__esModule",{value:!0});const Nn=nn(jn),Wn=nn(Ft);let qn=class{constructor(e){var t,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(i=e.isMaybeSingle)!==null&&i!==void 0?i:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,f,g,_;let b=null,T=null,L=null,A=l.status,W=l.statusText;if(l.ok){if(this.method!=="HEAD"){const k=await l.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?T=k:T=JSON.parse(k))}const p=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),w=(g=l.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");p&&w&&w.length>1&&(L=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(b={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,L=null,A=406,W="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const p=await l.text();try{b=JSON.parse(p),Array.isArray(b)&&l.status===404&&(T=[],b=null,A=200,W="OK")}catch{l.status===404&&p===""?(A=204,W="No Content"):b={message:p}}if(b&&this.isMaybeSingle&&(!((_=b==null?void 0:b.details)===null||_===void 0)&&_.includes("0 rows"))&&(b=null,A=200,W="OK"),b&&this.shouldThrowOnError)throw new Wn.default(b)}return{error:b,data:T,count:L,status:A,statusText:W}});return this.shouldThrowOnError||(r=r.catch(l=>{var u,f,g;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(f=l==null?void 0:l.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(g=l==null?void 0:l.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};Ut.default=qn;var Un=ge&&ge.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(qt,"__esModule",{value:!0});const Fn=Un(Ut);let zn=class extends Fn.default{select(e){let t=!1;const i=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:r,referencedTable:l=r}={}){const u=l?`${l}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:r=i}={}){const l=typeof r>"u"?"offset":`${r}.offset`,u=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(u,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:r=!1,wal:l=!1,format:u="text"}={}){var f;const g=[e?"analyze":null,t?"verbose":null,i?"settings":null,r?"buffers":null,l?"wal":null].filter(Boolean).join("|"),_=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${_}"; options=${g};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};qt.default=zn;var Vn=ge&&ge.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ot,"__esModule",{value:!0});const Kn=Vn(qt);let Jn=class extends Kn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const i=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:r}={}){let l="";r==="plain"?l="pl":r==="phrase"?l="ph":r==="websearch"&&(l="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${l}fts${u}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};Ot.default=Jn;var Qn=ge&&ge.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Wt,"__esModule",{value:!0});const mt=Qn(Ot);let Xn=class{constructor(e,{headers:t={},schema:i,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=i,this.fetch=r}select(e,{head:t=!1,count:i}={}){const r=t?"HEAD":"GET";let l=!1;const u=(e??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),i&&this.headers.append("Prefer",`count=${i}`),new mt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:i=!0}={}){var r;const l="POST";if(t&&this.headers.append("Prefer",`count=${t}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(u.length>0){const f=[...new Set(u)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new mt.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:r,defaultToNull:l=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const g=e.reduce((_,b)=>_.concat(Object.keys(b)),[]);if(g.length>0){const _=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",_.join(","))}}return new mt.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(e,{count:t}={}){var i;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new mt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:e}={}){var t;const i="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new mt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Wt.default=Xn;var sn=ge&&ge.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(_i,"__esModule",{value:!0});const Gn=sn(Wt),Yn=sn(Ot);let Zn=class rn{constructor(e,{headers:t={},schema:i,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=i,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Gn.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new rn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:r=!1,count:l}={}){var u;let f;const g=new URL(`${this.url}/rpc/${e}`);let _;i||r?(f=i?"HEAD":"GET",Object.entries(t).filter(([T,L])=>L!==void 0).map(([T,L])=>[T,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([T,L])=>{g.searchParams.append(T,L)})):(f="POST",_=t);const b=new Headers(this.headers);return l&&b.set("Prefer",`count=${l}`),new Yn.default({method:f,url:g,headers:b,schema:this.schemaName,body:_,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};_i.default=Zn;var vt=ge&&ge.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.PostgrestError=Ee.PostgrestBuilder=Ee.PostgrestTransformBuilder=Ee.PostgrestFilterBuilder=Ee.PostgrestQueryBuilder=Ee.PostgrestClient=void 0;const on=vt(_i);Ee.PostgrestClient=on.default;const an=vt(Wt);Ee.PostgrestQueryBuilder=an.default;const ln=vt(Ot);Ee.PostgrestFilterBuilder=ln.default;const hn=vt(qt);Ee.PostgrestTransformBuilder=hn.default;const un=vt(Ut);Ee.PostgrestBuilder=un.default;const cn=vt(Ft);Ee.PostgrestError=cn.default;var es=Ee.default={PostgrestClient:on.default,PostgrestQueryBuilder:an.default,PostgrestFilterBuilder:ln.default,PostgrestTransformBuilder:hn.default,PostgrestBuilder:un.default,PostgrestError:cn.default};const{PostgrestClient:ts,PostgrestQueryBuilder:Po,PostgrestFilterBuilder:Ro,PostgrestTransformBuilder:jo,PostgrestBuilder:Ho,PostgrestError:No}=es;class is{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=t.node,r=parseInt(i.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ns="2.15.5",ss=`realtime-js/${ns}`,rs="1.0.0",ai=1e4,os=1e3,as=100;var wt;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(wt||(wt={}));var pe;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(pe||(pe={}));var $e;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})($e||($e={}));var li;(function(o){o.websocket="websocket"})(li||(li={}));var et;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(et||(et={}));class ls{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const r=t.getUint8(1),l=t.getUint8(2);let u=this.HEADER_LENGTH+2;const f=i.decode(e.slice(u,u+r));u=u+r;const g=i.decode(e.slice(u,u+l));u=u+l;const _=JSON.parse(i.decode(e.slice(u,e.byteLength)));return{ref:null,topic:f,event:g,payload:_}}}class dn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(ae||(ae={}));const Li=(o,e,t={})=>{var i;const r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,u)=>(l[u]=hs(u,o,e,r),l),{})},hs=(o,e,t,i)=>{const r=e.find(f=>f.name===o),l=r==null?void 0:r.type,u=t[o];return l&&!i.includes(l)?fn(l,u):hi(u)},fn=(o,e)=>{if(o.charAt(0)==="_"){const t=o.slice(1,o.length);return fs(e,t)}switch(o){case ae.bool:return us(e);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return cs(e);case ae.json:case ae.jsonb:return ds(e);case ae.timestamp:return ps(e);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return hi(e);default:return hi(e)}},hi=o=>o,us=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},cs=o=>{if(typeof o=="string"){const e=parseFloat(o);if(!Number.isNaN(e))return e}return o},ds=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(e){return console.log(`JSON parse error: ${e}`),o}return o},fs=(o,e)=>{if(typeof o!="string")return o;const t=o.length-1,i=o[t];if(o[0]==="{"&&i==="}"){let l;const u=o.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>fn(e,f))}return o},ps=o=>typeof o=="string"?o.replace(" ","T"):o,pn=o=>{let e=o;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Kt{constructor(e,t,i={},r=ai){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $i;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})($i||($i={}));class bt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bt.syncState(this.state,r,l,u),this.pendingDiffs.forEach(g=>{this.state=bt.syncDiff(this.state,g,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},r=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=bt.syncDiff(this.state,r,l,u),f())}),this.onJoin((r,l,u)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:u})}),this.onLeave((r,l,u)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){const l=this.cloneDeep(e),u=this.transformState(t),f={},g={};return this.map(l,(_,b)=>{u[_]||(g[_]=b)}),this.map(u,(_,b)=>{const T=l[_];if(T){const L=b.map(p=>p.presence_ref),A=T.map(p=>p.presence_ref),W=b.filter(p=>A.indexOf(p.presence_ref)<0),c=T.filter(p=>L.indexOf(p.presence_ref)<0);W.length>0&&(f[_]=W),c.length>0&&(g[_]=c)}else f[_]=b}),this.syncDiff(l,{joins:f,leaves:g},i,r)}static syncDiff(e,t,i,r){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(l,(f,g)=>{var _;const b=(_=e[f])!==null&&_!==void 0?_:[];if(e[f]=this.cloneDeep(g),b.length>0){const T=e[f].map(A=>A.presence_ref),L=b.filter(A=>T.indexOf(A.presence_ref)<0);e[f].unshift(...L)}i(f,b,g)}),this.map(u,(f,g)=>{let _=e[f];if(!_)return;const b=g.map(T=>T.presence_ref);_=_.filter(T=>b.indexOf(T.presence_ref)<0),e[f]=_,r(f,_,g),_.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const r=e[i];return"metas"in r?t[i]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ai;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Ai||(Ai={}));var kt;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(kt||(kt={}));var He;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(He||(He={}));class wi{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Kt(this,$e.join,this.params,this.timeout),this.rejoinTimer=new dn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on($e.reply,{},(r,l)=>{this._trigger(this._replyEventName(l),r)}),this.presence=new bt(this),this.broadcastEndpointURL=pn(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==pe.closed){const{config:{broadcast:u,presence:f,private:g}}=this.params,_=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(A=>A.filter))!==null&&r!==void 0?r:[],b=!!this.bindings[kt.PRESENCE]&&this.bindings[kt.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,T={},L={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:b}),postgres_changes:_,private:g};this.socket.accessTokenValue&&(T.access_token=this.socket.accessTokenValue),this._onError(A=>e==null?void 0:e(He.CHANNEL_ERROR,A)),this._onClose(()=>e==null?void 0:e(He.CLOSED)),this.updateJoinPayload(Object.assign({config:L},T)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:A})=>{var W;if(this.socket.setAuth(),A===void 0){e==null||e(He.SUBSCRIBED);return}else{const c=this.bindings.postgres_changes,p=(W=c==null?void 0:c.length)!==null&&W!==void 0?W:0,w=[];for(let k=0;k<p;k++){const d=c[k],{filter:{event:n,schema:s,table:a,filter:h}}=d,m=A&&A[k];if(m&&m.event===n&&m.schema===s&&m.table===a&&m.filter===h)w.push(Object.assign(Object.assign({},d),{id:m.id}));else{this.unsubscribe(),this.state=pe.errored,e==null||e(He.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(He.SUBSCRIBED);return}}).receive("error",A=>{this.state=pe.errored,e==null||e(He.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(He.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===pe.joined&&e===kt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,i)}async send(e,t={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const _=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=_.body)===null||r===void 0?void 0:r.cancel()),_.ok?"ok":"error"}catch(_){return _.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,g;const _=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),_.receive("ok",()=>l("ok")),_.receive("error",()=>l("error")),_.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($e.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new Kt(this,$e.leave,{},e),i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pe.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const r=new AbortController,l=setTimeout(()=>r.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(l),u}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Kt(this,e,t,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>as){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,l;const u=e.toLocaleLowerCase(),{close:f,error:g,leave:_,join:b}=$e;if(i&&[f,g,_,b].indexOf(u)>=0&&i!==this._joinRef())return;let L=this._onMessage(u,t,i);if(t&&!L)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(A=>{var W,c,p;return((W=A.filter)===null||W===void 0?void 0:W.event)==="*"||((p=(c=A.filter)===null||c===void 0?void 0:c.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===u}).map(A=>A.callback(L,i)):(l=this.bindings[u])===null||l===void 0||l.filter(A=>{var W,c,p,w,k,d;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in A){const n=A.id,s=(W=A.filter)===null||W===void 0?void 0:W.event;return n&&((c=t.ids)===null||c===void 0?void 0:c.includes(n))&&(s==="*"||(s==null?void 0:s.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const n=(k=(w=A==null?void 0:A.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return n==="*"||n===((d=t==null?void 0:t.event)===null||d===void 0?void 0:d.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===u}).map(A=>{if(typeof L=="object"&&"ids"in L){const W=L.data,{schema:c,table:p,commit_timestamp:w,type:k,errors:d}=W;L=Object.assign(Object.assign({},{schema:c,table:p,commit_timestamp:w,eventType:k,new:{},old:{},errors:d}),this._getPayloadRecords(W))}A.callback(L,i)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const r=e.toLocaleLowerCase(),l={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&wi.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($e.close,{},e)}_onError(e){this._on($e.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Li(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Li(e.columns,e.old_record)),t}}const Jt=()=>{},Lt={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vs=[1e3,2e3,5e3,1e4],gs=1e4,ms=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ys{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ai,this.transport=null,this.heartbeatIntervalMs=Lt.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jt,this.ref=0,this.reconnectTimer=null,this.logger=Jt,this.conn=null,this.sendBuffer=[],this.serializer=new ls,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let l;return r?l=r:typeof fetch>"u"?l=(...u)=>Ne(async()=>{const{default:f}=await Promise.resolve().then(()=>pt);return{default:f}},void 0).then(({default:f})=>f(...u)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${li.websocket}`,this.httpEndpoint=pn(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=is.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rs}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case wt.connecting:return et.Connecting;case wt.open:return et.Open;case wt.closing:return et.Closing;default:return et.Closed}}isConnected(){return this.connectionState()===et.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===i);if(r)return r;{const l=new wi(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:i,payload:r,ref:l}=e,u=()=>{this.encode(e,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${t} ${i} (${l})`,r),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(os,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Lt.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(_){this.log("error","error in heartbeat callback",_)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:r,payload:l,ref:u}=t,f=u?`(${u})`:"",g=l.status||"";this.log("receive",`${g} ${i} ${r} ${f}`.trim(),l),this.channels.filter(_=>_._isMember(i)).forEach(_=>_._trigger(r,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger($e.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${i}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([ms],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const r={access_token:t,version:ss};t&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push($e.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new dn(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lt.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,r,l,u,f,g,_,b;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:ai,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Lt.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:Jt,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:T=>vs[T-1]||gs,this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:(T,L)=>L(JSON.stringify(T)),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class bi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ve(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class _s extends bi{constructor(e,t,i){super(e),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ui extends bi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ws=function(o,e,t,i){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(b){try{_(i.next(b))}catch(T){u(T)}}function g(b){try{_(i.throw(b))}catch(T){u(T)}}function _(b){b.done?l(b.value):r(b.value).then(f,g)}_((i=i.apply(o,e||[])).next())})};const vn=o=>{let e;return o?e=o:typeof fetch>"u"?e=(...t)=>Ne(async()=>{const{default:i}=await Promise.resolve().then(()=>pt);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},bs=()=>ws(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ne(()=>Promise.resolve().then(()=>pt),void 0)).Response:Response}),ci=o=>{if(Array.isArray(o))return o.map(t=>ci(t));if(typeof o=="function"||o!==Object(o))return o;const e={};return Object.entries(o).forEach(([t,i])=>{const r=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=ci(i)}),e},ks=o=>{if(typeof o!="object"||o===null)return!1;const e=Object.getPrototypeOf(o);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var tt=function(o,e,t,i){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(b){try{_(i.next(b))}catch(T){u(T)}}function g(b){try{_(i.throw(b))}catch(T){u(T)}}function _(b){b.done?l(b.value):r(b.value).then(f,g)}_((i=i.apply(o,e||[])).next())})};const Qt=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Es=(o,e,t)=>tt(void 0,void 0,void 0,function*(){const i=yield bs();o instanceof i&&!(t!=null&&t.noResolveJson)?o.json().then(r=>{const l=o.status||500,u=(r==null?void 0:r.statusCode)||l+"";e(new _s(Qt(r),l,u))}).catch(r=>{e(new ui(Qt(r),r))}):e(new ui(Qt(o),o))}),Cs=(o,e,t,i)=>{const r={method:o,headers:(e==null?void 0:e.headers)||{}};return o==="GET"||!i?r:(ks(i)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function xt(o,e,t,i,r,l){return tt(this,void 0,void 0,function*(){return new Promise((u,f)=>{o(t,Cs(e,i,r,l)).then(g=>{if(!g.ok)throw g;return i!=null&&i.noResolveJson?g:g.json()}).then(g=>u(g)).catch(g=>Es(g,f,i))})})}function Rt(o,e,t,i){return tt(this,void 0,void 0,function*(){return xt(o,"GET",e,t,i)})}function Be(o,e,t,i,r){return tt(this,void 0,void 0,function*(){return xt(o,"POST",e,i,r,t)})}function di(o,e,t,i,r){return tt(this,void 0,void 0,function*(){return xt(o,"PUT",e,i,r,t)})}function Ts(o,e,t,i){return tt(this,void 0,void 0,function*(){return xt(o,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function gn(o,e,t,i,r){return tt(this,void 0,void 0,function*(){return xt(o,"DELETE",e,i,r,t)})}var _e=function(o,e,t,i){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(b){try{_(i.next(b))}catch(T){u(T)}}function g(b){try{_(i.throw(b))}catch(T){u(T)}}function _(b){b.done?l(b.value):r(b.value).then(f,g)}_((i=i.apply(o,e||[])).next())})};const Ss={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ii={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Os{constructor(e,t={},i,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=i,this.fetch=vn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,i,r){return _e(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Ii),r);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",this.encodeMetadata(g))):(l=i,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,g&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),r!=null&&r.headers&&(f=Object.assign(Object.assign({},f),r.headers));const _=this._removeEmptyFolders(t),b=this._getFinalPath(_),T=yield(e=="PUT"?di:Be)(this.fetch,`${this.url}/object/${b}`,l,Object.assign({headers:f},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:_,id:T.Id,fullPath:T.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ve(l))return{data:null,error:l};throw l}})}upload(e,t,i){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,r){return _e(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",t);try{let g;const _=Object.assign({upsert:Ii.upsert},r),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(_.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",_.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",_.cacheControl)):(g=i,b["cache-control"]=`max-age=${_.cacheControl}`,b["content-type"]=_.contentType);const T=yield di(this.fetch,f.toString(),g,{headers:b});return{data:{path:l,fullPath:T.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(ve(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return _e(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const l=yield Be(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new bi("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:f},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}update(e,t,i){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return _e(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}copy(e,t,i){return _e(this,void 0,void 0,function*(){try{return{data:{path:(yield Be(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,i){return _e(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),l=yield Be(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,i){return _e(this,void 0,void 0,function*(){try{const r=yield Be(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}download(e,t){return _e(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=l?`?${l}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield Rt(this.fetch,`${this.url}/${r}/${f}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(ve(f))return{data:null,error:f};throw f}})}info(e){return _e(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield Rt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ci(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}exists(e){return _e(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ts(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i)&&i instanceof ui){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),r=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&r.push(l);const f=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&r.push(g);let _=r.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${_}`)}}}remove(e){return _e(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}})}list(e,t,i){return _e(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Ss),t),{prefix:e||""});return{data:yield Be(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}listV2(e,t){return _e(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Be(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},t),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const xs="2.12.1",Ms={"X-Client-Info":`storage-js/${xs}`};var nt=function(o,e,t,i){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(b){try{_(i.next(b))}catch(T){u(T)}}function g(b){try{_(i.throw(b))}catch(T){u(T)}}function _(b){b.done?l(b.value):r(b.value).then(f,g)}_((i=i.apply(o,e||[])).next())})};class Ls{constructor(e,t={},i,r){this.shouldThrowOnError=!1;const l=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},Ms),t),this.fetch=vn(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return nt(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ve(e))return{data:null,error:e};throw e}})}getBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return nt(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return nt(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}emptyBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}})}deleteBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}})}}class $s extends Ls{constructor(e,t={},i,r){super(e,t,i,r)}from(e){return new Os(this.url,this.headers,e,this.fetch)}}const As="2.57.4";let _t="";typeof Deno<"u"?_t="deno":typeof document<"u"?_t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_t="react-native":_t="node";const Is={"X-Client-Info":`supabase-js-${_t}/${As}`},Bs={headers:Is},Ds={schema:"public"},Ps={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Rs={};var js=function(o,e,t,i){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(b){try{_(i.next(b))}catch(T){u(T)}}function g(b){try{_(i.throw(b))}catch(T){u(T)}}function _(b){b.done?l(b.value):r(b.value).then(f,g)}_((i=i.apply(o,e||[])).next())})};const Hs=o=>{let e;return o?e=o:typeof fetch>"u"?e=en:e=fetch,(...t)=>e(...t)},Ns=()=>typeof Headers>"u"?tn:Headers,Ws=(o,e,t)=>{const i=Hs(t),r=Ns();return(l,u)=>js(void 0,void 0,void 0,function*(){var f;const g=(f=yield e())!==null&&f!==void 0?f:o;let _=new r(u==null?void 0:u.headers);return _.has("apikey")||_.set("apikey",o),_.has("Authorization")||_.set("Authorization",`Bearer ${g}`),i(l,Object.assign(Object.assign({},u),{headers:_}))})};var qs=function(o,e,t,i){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(b){try{_(i.next(b))}catch(T){u(T)}}function g(b){try{_(i.throw(b))}catch(T){u(T)}}function _(b){b.done?l(b.value):r(b.value).then(f,g)}_((i=i.apply(o,e||[])).next())})};function Us(o){return o.endsWith("/")?o:o+"/"}function Fs(o,e){var t,i;const{db:r,auth:l,realtime:u,global:f}=o,{db:g,auth:_,realtime:b,global:T}=e,L={db:Object.assign(Object.assign({},g),r),auth:Object.assign(Object.assign({},_),l),realtime:Object.assign(Object.assign({},b),u),storage:{},global:Object.assign(Object.assign(Object.assign({},T),f),{headers:Object.assign(Object.assign({},(t=T==null?void 0:T.headers)!==null&&t!==void 0?t:{}),(i=f==null?void 0:f.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>qs(this,void 0,void 0,function*(){return""})};return o.accessToken?L.accessToken=o.accessToken:delete L.accessToken,L}function zs(o){const e=o==null?void 0:o.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Us(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const mn="2.71.1",lt=30*1e3,fi=3,Xt=fi*lt,Vs="http://localhost:9999",Ks="supabase.auth.token",Js={"X-Client-Info":`gotrue-js/${mn}`},pi="X-Supabase-Api-Version",yn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qs=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xs=10*60*1e3;class ki extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function G(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class Gs extends ki{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function Ys(o){return G(o)&&o.name==="AuthApiError"}class _n extends ki{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Je extends ki{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}}class Ve extends Je{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zs(o){return G(o)&&o.name==="AuthSessionMissingError"}class $t extends Je{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class At extends Je{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class It extends Je{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function er(o){return G(o)&&o.name==="AuthImplicitGrantRedirectError"}class Bi extends Je{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vi extends Je{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Gt(o){return G(o)&&o.name==="AuthRetryableFetchError"}class Di extends Je{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class gi extends Je{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const jt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pi=` 	
\r=`.split(""),tr=(()=>{const o=new Array(128);for(let e=0;e<o.length;e+=1)o[e]=-1;for(let e=0;e<Pi.length;e+=1)o[Pi[e].charCodeAt(0)]=-2;for(let e=0;e<jt.length;e+=1)o[jt[e].charCodeAt(0)]=e;return o})();function Ri(o,e,t){if(o!==null)for(e.queue=e.queue<<8|o,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(jt[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(jt[i]),e.queuedBits-=6}}function wn(o,e,t){const i=tr[o];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function ji(o){const e=[],t=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=u=>{sr(u,i,t)};for(let u=0;u<o.length;u+=1)wn(o.charCodeAt(u),r,l);return e.join("")}function ir(o,e){if(o<=127){e(o);return}else if(o<=2047){e(192|o>>6),e(128|o&63);return}else if(o<=65535){e(224|o>>12),e(128|o>>6&63),e(128|o&63);return}else if(o<=1114111){e(240|o>>18),e(128|o>>12&63),e(128|o>>6&63),e(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function nr(o,e){for(let t=0;t<o.length;t+=1){let i=o.charCodeAt(t);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(o.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}ir(i,e)}}function sr(o,e,t){if(e.utf8seq===0){if(o<=127){t(o);return}for(let i=1;i<6;i+=1)if(!(o>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=o&31;else if(e.utf8seq===3)e.codepoint=o&15;else if(e.utf8seq===4)e.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|o&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function rr(o){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<o.length;r+=1)wn(o.charCodeAt(r),t,i);return new Uint8Array(e)}function or(o){const e=[];return nr(o,t=>e.push(t)),new Uint8Array(e)}function ar(o){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};return o.forEach(r=>Ri(r,t,i)),Ri(null,t,i),e.join("")}function lr(o){return Math.round(Date.now()/1e3)+o}function hr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const e=Math.random()*16|0;return(o=="x"?e:e&3|8).toString(16)})}const Le=()=>typeof window<"u"&&typeof document<"u",Ge={tested:!1,writable:!1},bn=()=>{if(!Le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ge.tested)return Ge.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Ge.tested=!0,Ge.writable=!0}catch{Ge.tested=!0,Ge.writable=!1}return Ge.writable};function ur(o){const e={},t=new URL(o);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}const kn=o=>{let e;return o?e=o:typeof fetch>"u"?e=(...t)=>Ne(async()=>{const{default:i}=await Promise.resolve().then(()=>pt);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},cr=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",ht=async(o,e,t)=>{await o.setItem(e,JSON.stringify(t))},Ye=async(o,e)=>{const t=await o.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Fe=async(o,e)=>{await o.removeItem(e)};class zt{constructor(){this.promise=new zt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}zt.promiseConstructor=Promise;function Yt(o){const e=o.split(".");if(e.length!==3)throw new gi("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Qs.test(e[i]))throw new gi("JWT not in base64url format");return{header:JSON.parse(ji(e[0])),payload:JSON.parse(ji(e[1])),signature:rr(e[2]),raw:{header:e[0],payload:e[1]}}}async function dr(o){return await new Promise(e=>{setTimeout(()=>e(null),o)})}function fr(o,e){return new Promise((i,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await o(l);if(!e(l,null,u)){i(u);return}}catch(u){if(!e(l,u)){r(u);return}}})()})}function pr(o){return("0"+o.toString(16)).substr(-2)}function vr(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let r="";for(let l=0;l<56;l++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,pr).join("")}async function gr(o){const t=new TextEncoder().encode(o),i=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function mr(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const t=await gr(o);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function st(o,e,t=!1){const i=vr();let r=i;t&&(r+="/PASSWORD_RECOVERY"),await ht(o,`${e}-code-verifier`,r);const l=await mr(i);return[l,i===l?"plain":"s256"]}const yr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _r(o){const e=o.headers.get(pi);if(!e||!e.match(yr))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function wr(o){if(!o)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(o<=e)throw new Error("JWT has expired")}function br(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function rt(o){if(!kr.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zt(){const o={};return new Proxy(o,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hi(o){return JSON.parse(JSON.stringify(o))}var Er=function(o,e){var t={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&e.indexOf(i)<0&&(t[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(o);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(o,i[r])&&(t[i[r]]=o[i[r]]);return t};const Ze=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Cr=[502,503,504];async function Ni(o){var e;if(!cr(o))throw new vi(Ze(o),0);if(Cr.includes(o.status))throw new vi(Ze(o),o.status);let t;try{t=await o.json()}catch(l){throw new _n(Ze(l),l)}let i;const r=_r(o);if(r&&r.getTime()>=yn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new Di(Ze(t),o.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Ve}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Di(Ze(t),o.status,t.weak_password.reasons);throw new Gs(Ze(t),o.status||500,i)}const Tr=(o,e,t,i)=>{const r={method:o,headers:(e==null?void 0:e.headers)||{}};return o==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};async function ee(o,e,t,i){var r;const l=Object.assign({},i==null?void 0:i.headers);l[pi]||(l[pi]=yn["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await Sr(o,e,t+f,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(g):{data:Object.assign({},g),error:null}}async function Sr(o,e,t,i,r,l){const u=Tr(e,i,r,l);let f;try{f=await o(t,Object.assign({},u))}catch(g){throw console.error(g),new vi(Ze(g),0)}if(f.ok||await Ni(f),i!=null&&i.noResolveJson)return f;try{return await f.json()}catch(g){await Ni(g)}}function je(o){var e;let t=null;Lr(o)&&(t=Object.assign({},o),o.expires_at||(t.expires_at=lr(o.expires_in)));const i=(e=o.user)!==null&&e!==void 0?e:o;return{data:{session:t,user:i},error:null}}function Wi(o){const e=je(o);return!e.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=o.weak_password),e}function Ke(o){var e;return{data:{user:(e=o.user)!==null&&e!==void 0?e:o},error:null}}function Or(o){return{data:o,error:null}}function xr(o){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:l}=o,u=Er(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:l},g=Object.assign({},u);return{data:{properties:f,user:g},error:null}}function Mr(o){return o}function Lr(o){return o.access_token&&o.refresh_token&&o.expires_in}const ei=["global","local","others"];var $r=function(o,e){var t={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&e.indexOf(i)<0&&(t[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(o);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(o,i[r])&&(t[i[r]]=o[i[r]]);return t};class Ar{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=kn(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ei[0]){if(ei.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ei.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ke})}catch(i){if(G(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=$r(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:xr,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(G(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ke})}catch(t){if(G(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,r,l,u,f,g;try{const _={nextPage:null,lastPage:0,total:0},b=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:Mr});if(b.error)throw b.error;const T=await b.json(),L=(u=b.headers.get("x-total-count"))!==null&&u!==void 0?u:0,A=(g=(f=b.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return A.length>0&&(A.forEach(W=>{const c=parseInt(W.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(W.split(";")[1].split("=")[1]);_[`${p}Page`]=c}),_.total=parseInt(L)),{data:Object.assign(Object.assign({},T),_),error:null}}catch(_){if(G(_))return{data:{users:[]},error:_};throw _}}async getUserById(e){rt(e);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ke})}catch(t){if(G(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){rt(e);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ke})}catch(i){if(G(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){rt(e);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ke})}catch(i){if(G(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){rt(e.userId);try{const{data:t,error:i}=await ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(G(t))return{data:null,error:t};throw t}}async _deleteFactor(e){rt(e.userId),rt(e.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}}}function qi(o={}){return{getItem:e=>o[e]||null,setItem:(e,t)=>{o[e]=t},removeItem:e=>{delete o[e]}}}function Ir(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ot={debug:!!(globalThis&&bn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class En extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Br extends En{}async function Dr(o,e,t){ot.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),ot.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){ot.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,r.name);try{return await t()}finally{ot.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,r.name)}}else{if(e===0)throw ot.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Br(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(ot.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Ir();const Pr={url:Vs,storageKey:Ks,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Js,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ui(o,e,t){return await t()}const at={};class Ct{constructor(e){var t,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ct.nextInstanceID,Ct.nextInstanceID+=1,this.instanceID>0&&Le()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Pr),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Ar({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=kn(r.fetch),this.lock=r.lock||Ui,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Le()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Dr:this.lock=Ui,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:bn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qi(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=qi(this.memoryStorage)),Le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=at[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){at[this.storageKey]=Object.assign(Object.assign({},at[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=at[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){at[this.storageKey]=Object.assign(Object.assign({},at[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${mn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=ur(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),Le()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:l}=await this._getSessionFromURL(t,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),er(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=r;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return G(t)?{error:t}:{error:new _n("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,r;try{const l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:je}),{data:u,error:f}=l;if(f||!u)return{data:{user:null,session:null},error:f};const g=u.session,_=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:_,session:g},error:null}}catch(l){if(G(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,i,r;try{let l;if("email"in e){const{email:b,password:T,options:L}=e;let A=null,W=null;this.flowType==="pkce"&&([A,W]=await st(this.storage,this.storageKey)),l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:L==null?void 0:L.emailRedirectTo,body:{email:b,password:T,data:(t=L==null?void 0:L.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:L==null?void 0:L.captchaToken},code_challenge:A,code_challenge_method:W},xform:je})}else if("phone"in e){const{phone:b,password:T,options:L}=e;l=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:T,data:(i=L==null?void 0:L.data)!==null&&i!==void 0?i:{},channel:(r=L==null?void 0:L.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:L==null?void 0:L.captchaToken}},xform:je})}else throw new At("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return{data:{user:null,session:null},error:f};const g=u.session,_=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:_,session:g},error:null}}catch(l){if(G(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:f}=e;t=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Wi})}else if("phone"in e){const{phone:l,password:u,options:f}=e;t=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Wi})}else throw new At("You must provide either an email or phone number and a password");const{data:i,error:r}=t;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new $t}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,i,r,l,u,f,g,_,b,T,L,A;let W,c;if("message"in e)W=e.message,c=e.signature;else{const{chain:p,wallet:w,statement:k,options:d}=e;let n;if(Le())if(typeof w=="object")n=w;else{const a=window;if("solana"in a&&typeof a.solana=="object"&&("signIn"in a.solana&&typeof a.solana.signIn=="function"||"signMessage"in a.solana&&typeof a.solana.signMessage=="function"))n=a.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(d!=null&&d.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");n=w}const s=new URL((t=d==null?void 0:d.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in n&&n.signIn){const a=await n.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},d==null?void 0:d.signInWithSolana),{version:"1",domain:s.host,uri:s.href}),k?{statement:k}:null));let h;if(Array.isArray(a)&&a[0]&&typeof a[0]=="object")h=a[0];else if(a&&typeof a=="object"&&"signedMessage"in a&&"signature"in a)h=a;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in h&&"signature"in h&&(typeof h.signedMessage=="string"||h.signedMessage instanceof Uint8Array)&&h.signature instanceof Uint8Array)W=typeof h.signedMessage=="string"?h.signedMessage:new TextDecoder().decode(h.signedMessage),c=h.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in n)||typeof n.signMessage!="function"||!("publicKey"in n)||typeof n!="object"||!n.publicKey||!("toBase58"in n.publicKey)||typeof n.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");W=[`${s.host} wants you to sign in with your Solana account:`,n.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${s.href}`,`Issued At: ${(r=(i=d==null?void 0:d.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=d==null?void 0:d.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${d.signInWithSolana.notBefore}`]:[],...!((u=d==null?void 0:d.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${d.signInWithSolana.expirationTime}`]:[],...!((f=d==null?void 0:d.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${d.signInWithSolana.chainId}`]:[],...!((g=d==null?void 0:d.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${d.signInWithSolana.nonce}`]:[],...!((_=d==null?void 0:d.signInWithSolana)===null||_===void 0)&&_.requestId?[`Request ID: ${d.signInWithSolana.requestId}`]:[],...!((T=(b=d==null?void 0:d.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||T===void 0)&&T.length?["Resources",...d.signInWithSolana.resources.map(h=>`- ${h}`)]:[]].join(`
`);const a=await n.signMessage(new TextEncoder().encode(W),"utf8");if(!a||!(a instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");c=a}}try{const{data:p,error:w}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:W,signature:ar(c)},!((L=e.options)===null||L===void 0)&&L.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:je});if(w)throw w;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new $t}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:w})}catch(p){if(G(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await Ye(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(t??"").split("/");try{const{data:l,error:u}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:je});if(await Fe(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new $t}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:u})}catch(l){if(G(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:i,token:r,access_token:l,nonce:u}=e,f=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:je}),{data:g,error:_}=f;return _?{data:{user:null,session:null},error:_}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new $t}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:_})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,r,l,u;try{if("email"in e){const{email:f,options:g}=e;let _=null,b=null;this.flowType==="pkce"&&([_,b]=await st(this.storage,this.storageKey));const{error:T}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(i=g==null?void 0:g.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:_,code_challenge_method:b},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in e){const{phone:f,options:g}=e,{data:_,error:b}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(u=g==null?void 0:g.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:_==null?void 0:_.message_id},error:b}}throw new At("You must provide either an email or phone number.")}catch(f){if(G(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var t,i;try{let r,l;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:f}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:je});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,_=u.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:_,session:g},error:null}}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,i,r;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await st(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:Or})}catch(l){if(G(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Ve;const{error:r}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(G(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:l}=e,{error:u}=await ee(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:i,type:r,options:l}=e,{data:u,error:f}=await ee(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new At("You must provide either an email or phone number and a type")}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ye(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Xt:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await Ye(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Zt()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,_,b)=>(!u&&_==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,_,b))})}return{data:{session:e},error:null}}const{session:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ke}):await this._useSession(async t=>{var i,r,l;const{data:u,error:f}=t;if(f)throw f;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ve}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:Ke})})}catch(t){if(G(t))return Zs(t)&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:r,error:l}=i;if(l)throw l;if(!r.session)throw new Ve;const u=r.session;let f=null,g=null;this.flowType==="pkce"&&e.email!=null&&([f,g]=await st(this.storage,this.storageKey));const{data:_,error:b}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:g}),jwt:u.access_token,xform:Ke});if(b)throw b;return u.user=_.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(G(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ve;const t=Date.now()/1e3;let i=t,r=!0,l=null;const{payload:u}=Yt(e.access_token);if(u.exp&&(i=u.exp,r=i<=t),r){const{session:f,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(G(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:u,error:f}=t;if(f)throw f;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Ve;const{session:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Le())throw new It("No browser detected.");if(e.error||e.error_description||e.error_code)throw new It(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Bi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new It("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bi("No code detected.");const{data:k,error:d}=await this._exchangeCodeForSession(e.code);if(d)throw d;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:l,refresh_token:u,expires_in:f,expires_at:g,token_type:_}=e;if(!l||!f||!u||!_)throw new It("No session defined in URL");const b=Math.round(Date.now()/1e3),T=parseInt(f);let L=b+T;g&&(L=parseInt(g));const A=L-b;A*1e3<=lt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${T}s`);const W=L-T;b-W>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",W,L,b):b-W<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",W,L,b);const{data:c,error:p}=await this._getUser(l);if(p)throw p;const w={provider_token:i,provider_refresh_token:r,access_token:l,expires_in:T,expires_at:L,refresh_token:u,token_type:_,user:c.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(i){if(G(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ye(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:r,error:l}=t;if(l)return{error:l};const u=(i=r.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:f}=await this.admin.signOut(u,e);if(f&&!(Ys(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=hr(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,r;try{const{data:{session:l},error:u}=t;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await st(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(G(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:r}=await this._useSession(async l=>{var u,f,g,_,b;const{data:T,error:L}=l;if(L)throw L;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",A,{headers:this.headers,jwt:(b=(_=T.session)===null||_===void 0?void 0:_.access_token)!==null&&b!==void 0?b:void 0})});if(r)throw r;return Le()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(G(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,r;const{data:l,error:u}=t;if(u)throw u;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await fr(async r=>(r>0&&await dr(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:je})),(r,l)=>{const u=200*Math.pow(2,r);return l&&Gt(l)&&Date.now()+u-i<lt})}catch(i){if(this._debug(t,"error",i),G(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),Le()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await Ye(this.storage,this.storageKey);if(r&&this.userStorage){let u=await Ye(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:r.user},await ht(this.userStorage,this.storageKey+"-user",u)),r.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Zt()}else if(r&&!r.user&&!r.user){const u=await Ye(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(r.user=u.user,await Fe(this.storage,this.storageKey+"-user"),await ht(this.storage,this.storageKey,r)):r.user=Zt()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const l=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Xt;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Xt}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),Gt(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(r.access_token);!f&&(u!=null&&u.user)?(r.user=u.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new zt;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Ve;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={session:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(r,"error",l),G(l)){const u={session:null,error:l};return Gt(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await ht(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const l=Hi(r);await ht(this.storage,this.storageKey,l)}else{const r=Hi(t);await ht(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Fe(this.storage,this.storageKey),await Fe(this.storage,this.storageKey+"-code-verifier"),await Fe(this.storage,this.storageKey+"-user"),this.userStorage&&await Fe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/lt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${lt}ms, refresh threshold is ${fi} ticks`),r<=fi&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof En)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const r=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await st(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});r.push(f.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);r.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:r,error:l}=t;return l?{data:null,error:l}:await ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,r;const{data:l,error:u}=t;if(u)return{data:null,error:u};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:_}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return _?{data:null,error:_}:(e.factorType==="totp"&&(!((r=g==null?void 0:g.totp)===null||r===void 0)&&r.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:l}=t;if(l)return{data:null,error:l};const{data:u,error:f}=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(t){if(G(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:l}=t;return l?{data:null,error:l}:await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(G(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=(e==null?void 0:e.factors)||[],r=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:r,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:r},error:l}=e;if(l)return{data:null,error:l};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Yt(r.access_token);let f=null;u.aal&&(f=u.aal);let g=f;((i=(t=r.user.factors)===null||t===void 0?void 0:t.filter(T=>T.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const b=u.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:b},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(f=>f.kid===e);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+Xs>r)return i;const{data:l,error:u}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=r,i=l.keys.find(f=>f.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:A,error:W}=await this.getSession();if(W||!A.session)return{data:null,error:W};i=A.session.access_token}const{header:r,payload:l,signature:u,raw:{header:f,payload:g}}=Yt(i);t!=null&&t.allowExpired||wr(l.exp);const _=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!_){const{error:A}=await this.getUser(i);if(A)throw A;return{data:{claims:l,header:r,signature:u},error:null}}const b=br(r.alg),T=await crypto.subtle.importKey("jwk",_,b,!0,["verify"]);if(!await crypto.subtle.verify(b,T,u,or(`${f}.${g}`)))throw new gi("Invalid JWT signature");return{data:{claims:l,header:r,signature:u},error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}}}Ct.nextInstanceID=0;const Rr=Ct;class jr extends Rr{constructor(e){super(e)}}var Hr=function(o,e,t,i){function r(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(b){try{_(i.next(b))}catch(T){u(T)}}function g(b){try{_(i.throw(b))}catch(T){u(T)}}function _(b){b.done?l(b.value):r(b.value).then(f,g)}_((i=i.apply(o,e||[])).next())})};class Nr{constructor(e,t,i){var r,l,u;this.supabaseUrl=e,this.supabaseKey=t;const f=zs(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const g=`sb-${f.hostname.split(".")[0]}-auth-token`,_={db:Ds,realtime:Rs,auth:Object.assign(Object.assign({},Ps),{storageKey:g}),global:Bs},b=Fs(i??{},_);this.storageKey=(r=b.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(l=b.global.headers)!==null&&l!==void 0?l:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(T,L)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(L)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=b.auth)!==null&&u!==void 0?u:{},this.headers,b.global.fetch),this.fetch=Ws(t,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new ts(new URL("rest/v1",f).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new $s(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new In(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Hr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,userStorage:l,storageKey:u,flowType:f,lock:g,debug:_},b,T){const L={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jr({url:this.authUrl.href,headers:Object.assign(Object.assign({},L),b),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,userStorage:l,flowType:f,lock:g,debug:_,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ys(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wr=(o,e,t)=>new Nr(o,e,t);function qr(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const e=o.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}qr()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ur="https://wxlhidzlwsfcuqzlixzq.supabase.co",Fr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4bGhpZHpsd3NmY3VxemxpeHpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4NzY5ODQsImV4cCI6MjA3MzQ1Mjk4NH0.x5zPd5H6tJB1lMjfVQMVo-LswNOOSJuyqXGmSks-Uc4",Ce=Wr(Ur,Fr,{auth:{persistSession:!0,autoRefreshToken:!0}});const zr=Object.freeze(Object.defineProperty({__proto__:null,supabase:Ce},Symbol.toStringTag,{value:"Module"}));const Vr=new Set(["Code","Title","Amount","Zone","Type","Supplier","Opened","sheet","Description","Notes","Comment"]);function Cn(o){const e={sheet:o.sheet||o.Sheet||"raw"},t={};for(const[i,r]of Object.entries(o||{}))Vr.has(i)?e[i]=r:i!=="_isNew"&&(t[i]=r);return Object.keys(t).length&&(e.extra=t),e}function Kr(o){const{extra:e,...t}=o||{};return{...e||{},...t}}async function Jr(o="raw"){const{data:e,error:t}=await Ce.from("items").select("*").eq("sheet",o).order("Title",{ascending:!0});if(t)throw console.error("Supabase fetchItems error",{sheetName:o,error:t}),t;return console.log("Supabase fetchItems ok",{sheetName:o,count:(e||[]).length}),(e||[]).map(Kr)}async function Qr(o,e){const t=Cn(e),{data:i,error:r}=await Ce.from("items").update(t).eq("Code",o).select("Code");if(r)throw console.error("Supabase updateRow error",{code:o,row:t,error:r}),r;if(!i||i.length===0)throw new Error("No rows updated. Check permissions (RLS) or Code match.");console.log("Supabase updateRow ok",{code:o,affected:i.length})}async function Xr(o){const{data:e,error:t}=await Ce.from("items").delete().eq("Code",o).select("Code");if(t)throw console.error("Supabase deleteItem error",{code:o,error:t}),t;if(!e||e.length===0)throw new Error("No rows deleted. Check permissions (RLS) or Code match.");console.log("Supabase deleteItem ok",{code:o,affected:e.length})}async function Gr(o){var r;const e=Cn(o),{data:t,error:i}=await Ce.from("items").insert(e).select("Code");if(i)throw console.error("Supabase createItem error",{row:e,error:i}),i;if(!t||t.length===0)throw new Error("Insert blocked by RLS. Sign in as editor/admin.");console.log("Supabase createItem ok",{code:(r=t[0])==null?void 0:r.Code})}const Yr="inventory-cache";let Oe={items:[],filter:{Zone:[],Type:[]},selected:null};function Ht(o){Oe.items=o,localStorage.setItem(Yr,JSON.stringify(o))}function Et(){return Oe.items}function Zr(o){Oe.selected=Oe.items.find(e=>e.Code===o)||null}function Fi(o,e){const t=Oe.filter[o]||[];t.includes(e)?Oe.filter[o]=t.filter(i=>i!==e):Oe.filter[o]=[...t,e]}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var eo=Object.prototype.toString,gt=Array.isArray||function(e){return eo.call(e)==="[object Array]"};function Ei(o){return typeof o=="function"}function to(o){return gt(o)?"array":typeof o}function ti(o){return o.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function zi(o,e){return o!=null&&typeof o=="object"&&e in o}function io(o,e){return o!=null&&typeof o!="object"&&o.hasOwnProperty&&o.hasOwnProperty(e)}var no=RegExp.prototype.test;function so(o,e){return no.call(o,e)}var ro=/\S/;function oo(o){return!so(ro,o)}var ao={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function lo(o){return String(o).replace(/[&<>"'`=\/]/g,function(t){return ao[t]})}var ho=/\s*/,uo=/\s+/,Vi=/\s*=/,co=/\s*\}/,fo=/#|\^|\/|>|\{|&|=|!/;function po(o,e){if(!o)return[];var t=!1,i=[],r=[],l=[],u=!1,f=!1,g="",_=0;function b(){if(u&&!f)for(;l.length;)delete r[l.pop()];else l=[];u=!1,f=!1}var T,L,A;function W(m){if(typeof m=="string"&&(m=m.split(uo,2)),!gt(m)||m.length!==2)throw new Error("Invalid tags: "+m);T=new RegExp(ti(m[0])+"\\s*"),L=new RegExp("\\s*"+ti(m[1])),A=new RegExp("\\s*"+ti("}"+m[1]))}W(e||Te.tags);for(var c=new Mt(o),p,w,k,d,n,s;!c.eos();){if(p=c.pos,k=c.scanUntil(T),k)for(var a=0,h=k.length;a<h;++a)d=k.charAt(a),oo(d)?(l.push(r.length),g+=d):(f=!0,t=!0,g+=" "),r.push(["text",d,p,p+1]),p+=1,d===`
`&&(b(),g="",_=0,t=!1);if(!c.scan(T))break;if(u=!0,w=c.scan(fo)||"name",c.scan(ho),w==="="?(k=c.scanUntil(Vi),c.scan(Vi),c.scanUntil(L)):w==="{"?(k=c.scanUntil(A),c.scan(co),c.scanUntil(L),w="&"):k=c.scanUntil(L),!c.scan(L))throw new Error("Unclosed tag at "+c.pos);if(w==">"?n=[w,k,p,c.pos,g,_,t]:n=[w,k,p,c.pos],_++,r.push(n),w==="#"||w==="^")i.push(n);else if(w==="/"){if(s=i.pop(),!s)throw new Error('Unopened section "'+k+'" at '+p);if(s[1]!==k)throw new Error('Unclosed section "'+s[1]+'" at '+p)}else w==="name"||w==="{"||w==="&"?f=!0:w==="="&&W(k)}if(b(),s=i.pop(),s)throw new Error('Unclosed section "'+s[1]+'" at '+c.pos);return go(vo(r))}function vo(o){for(var e=[],t,i,r=0,l=o.length;r<l;++r)t=o[r],t&&(t[0]==="text"&&i&&i[0]==="text"?(i[1]+=t[1],i[3]=t[3]):(e.push(t),i=t));return e}function go(o){for(var e=[],t=e,i=[],r,l,u=0,f=o.length;u<f;++u)switch(r=o[u],r[0]){case"#":case"^":t.push(r),i.push(r),t=r[4]=[];break;case"/":l=i.pop(),l[5]=r[2],t=i.length>0?i[i.length-1][4]:e;break;default:t.push(r)}return e}function Mt(o){this.string=o,this.tail=o,this.pos=0}Mt.prototype.eos=function(){return this.tail===""};Mt.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i};Mt.prototype.scanUntil=function(e){var t=this.tail.search(e),i;switch(t){case-1:i=this.tail,this.tail="";break;case 0:i="";break;default:i=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=i.length,i};function ft(o,e){this.view=o,this.cache={".":this.view},this.parent=e}ft.prototype.push=function(e){return new ft(e,this)};ft.prototype.lookup=function(e){var t=this.cache,i;if(t.hasOwnProperty(e))i=t[e];else{for(var r=this,l,u,f,g=!1;r;){if(e.indexOf(".")>0)for(l=r.view,u=e.split("."),f=0;l!=null&&f<u.length;)f===u.length-1&&(g=zi(l,u[f])||io(l,u[f])),l=l[u[f++]];else l=r.view[e],g=zi(r.view,e);if(g){i=l;break}r=r.parent}t[e]=i}return Ei(i)&&(i=i.call(this.view)),i};function we(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}we.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};we.prototype.parse=function(e,t){var i=this.templateCache,r=e+":"+(t||Te.tags).join(":"),l=typeof i<"u",u=l?i.get(r):void 0;return u==null&&(u=po(e,t),l&&i.set(r,u)),u};we.prototype.render=function(e,t,i,r){var l=this.getConfigTags(r),u=this.parse(e,l),f=t instanceof ft?t:new ft(t,void 0);return this.renderTokens(u,f,i,e,r)};we.prototype.renderTokens=function(e,t,i,r,l){for(var u="",f,g,_,b=0,T=e.length;b<T;++b)_=void 0,f=e[b],g=f[0],g==="#"?_=this.renderSection(f,t,i,r,l):g==="^"?_=this.renderInverted(f,t,i,r,l):g===">"?_=this.renderPartial(f,t,i,l):g==="&"?_=this.unescapedValue(f,t):g==="name"?_=this.escapedValue(f,t,l):g==="text"&&(_=this.rawValue(f)),_!==void 0&&(u+=_);return u};we.prototype.renderSection=function(e,t,i,r,l){var u=this,f="",g=t.lookup(e[1]);function _(L){return u.render(L,t,i,l)}if(g){if(gt(g))for(var b=0,T=g.length;b<T;++b)f+=this.renderTokens(e[4],t.push(g[b]),i,r,l);else if(typeof g=="object"||typeof g=="string"||typeof g=="number")f+=this.renderTokens(e[4],t.push(g),i,r,l);else if(Ei(g)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");g=g.call(t.view,r.slice(e[3],e[5]),_),g!=null&&(f+=g)}else f+=this.renderTokens(e[4],t,i,r,l);return f}};we.prototype.renderInverted=function(e,t,i,r,l){var u=t.lookup(e[1]);if(!u||gt(u)&&u.length===0)return this.renderTokens(e[4],t,i,r,l)};we.prototype.indentPartial=function(e,t,i){for(var r=t.replace(/[^ \t]/g,""),l=e.split(`
`),u=0;u<l.length;u++)l[u].length&&(u>0||!i)&&(l[u]=r+l[u]);return l.join(`
`)};we.prototype.renderPartial=function(e,t,i,r){if(i){var l=this.getConfigTags(r),u=Ei(i)?i(e[1]):i[e[1]];if(u!=null){var f=e[6],g=e[5],_=e[4],b=u;g==0&&_&&(b=this.indentPartial(u,_,f));var T=this.parse(b,l);return this.renderTokens(T,t,i,b,r)}}};we.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(i!=null)return i};we.prototype.escapedValue=function(e,t,i){var r=this.getConfigEscape(i)||Te.escape,l=t.lookup(e[1]);if(l!=null)return typeof l=="number"&&r===Te.escape?String(l):r(l)};we.prototype.rawValue=function(e){return e[1]};we.prototype.getConfigTags=function(e){return gt(e)?e:e&&typeof e=="object"?e.tags:void 0};we.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!gt(e))return e.escape};var Te={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(o){Tt.templateCache=o},get templateCache(){return Tt.templateCache}},Tt=new we;Te.clearCache=function(){return Tt.clearCache()};Te.parse=function(e,t){return Tt.parse(e,t)};Te.render=function(e,t,i,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+to(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Tt.render(e,t,i,r)};Te.escape=lo;Te.Scanner=Mt;Te.Context=ft;Te.Writer=we;const mo=`<div class="card">
  <div class="card-content">
    <span class="card-title">{{item.Title}}</span>

    {{#longTexts.length}}
    <div class="section">
      {{#longTexts}}
      <p>
        <span class="grey-text text-darken-1">{{label}}:</span>
        <span class="editable" data-field="{{key}}">{{value}}</span>
      </p>
      {{/longTexts}}
      <div class="divider"></div>
    </div>
    {{/longTexts.length}}

    <div class="section">
      <table class="striped highlight">
        <thead>
          <tr><th>Параметр</th><th>Значение</th></tr>
        </thead>
        <tbody>
          {{#mainFields}}
          <tr>
            <td class="grey-text text-darken-1">{{label}}</td>
            <td><span class="editable" data-field="{{key}}">{{value}}</span></td>
          </tr>
          {{/mainFields}}
          {{#otherFields}}
          <tr>
            <td class="grey-text text-darken-1">{{label}}</td>
            <td><span class="editable" data-field="{{key}}">{{value}}</span></td>
          </tr>
          {{/otherFields}}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card-action">
    <a id="saveBtn" class="btn waves-effect waves-light"><i class="material-icons left"></i>save</a>
    <a id="deleteBtn" class="btn-flat red-text text-darken-1"><i class="material-icons left"></i>delete</a>
  </div>
</div>
`,ye={user:null,role:"viewer"};async function Tn(o){if(!o)return"viewer";const{data:e,error:t}=await Ce.from("profiles").select("role").eq("id",o).maybeSingle();return t?"viewer":(e==null?void 0:e.role)||"viewer"}async function ct(){let{data:{user:o}}=await Ce.auth.getUser();if(!o)try{const t=`sb-${new URL("https://wxlhidzlwsfcuqzlixzq.supabase.co").host.split(".")[0]}-auth-token`,i=localStorage.getItem(t);if(i){const r=JSON.parse(i);if(r!=null&&r.access_token&&(r!=null&&r.refresh_token)){const{error:l}=await Ce.auth.setSession({access_token:r.access_token,refresh_token:r.refresh_token});l||({data:{user:o}}=await Ce.auth.getUser())}}}catch(e){console.debug("Auth bootstrap from storage failed",e)}return ye.user=o||null,ye.role=await Tn(o==null?void 0:o.id),console.debug("Auth refresh",{user:!!o,role:ye.role}),ye}function yo(o){ct().then(()=>o==null?void 0:o(ye)),Ce.auth.onAuthStateChange(async(e,t)=>{var i;console.debug("Auth state change",{event:e,session:t}),ye.user=(t==null?void 0:t.user)||ye.user,(i=ye.user)!=null&&i.id?ye.role=await Tn(ye.user.id):await ct(),o==null||o(ye)})}async function _o(o){const{data:e,error:t}=await Ce.auth.signInWithOtp({email:o,options:{emailRedirectTo:`${window.location.origin}${window.location.pathname}`,shouldCreateUser:!0}});if(console.debug("Auth signInWithOtp response",{data:e,error:t}),t)throw t}async function wo(){const{error:o}=await Ce.auth.signOut();if(console.debug("Auth signOut",{error:o}),o)throw o}async function bo(){var o;try{const t=new URLSearchParams(window.location.search).get("code");if(t){const{data:i,error:r}=await Ce.auth.exchangeCodeForSession(t);console.debug("Auth exchangeCodeForSession",{data:i,error:r}),r||await ct()}if(window.location.hash&&window.location.hash.includes("access_token")){const i=new URLSearchParams(window.location.hash.slice(1)),r=i.get("access_token"),l=i.get("refresh_token");if(r&&l){const{data:u,error:f}=await Ce.auth.setSession({access_token:r,refresh_token:l});console.debug("Auth setSession from hash",{ok:!f,data:u,error:f}),f||await ct()}else await ct()}}catch(e){console.error("Auth redirect handling error",e)}finally{const e=new URL(window.location.href);e.searchParams.delete("code"),e.hash="",window.history.replaceState({},document.title,e.toString());try{ye.user&&((o=window.M)!=null&&o.toast)&&window.M.toast({html:`Signed in as ${ye.user.email}`,displayLength:2e3})}catch{}}}const ii=Object.freeze(Object.defineProperty({__proto__:null,authState:ye,handleAuthRedirect:bo,onAuthChange:yo,refreshAuth:ct,signInWithOtp:_o,signOut:wo},Symbol.toStringTag,{value:"Module"})),De=Object.create(null),ko=new Set(["Description","Notes","Comment","Note","Remarks"]);function ni(o){return{Code:"Code",Title:"Title",Amount:"Amount",Opened:"Opened",Supplier:"Supplier",Zone:"Zone",Type:"Type",Description:"Description",Notes:"Notes",Comment:"Comment"}[o]||o}function Ki(o){const e=o==null?void 0:o.Code,t=e&&De[e]?De[e]:{},i={...o,...t},r=["Description","Notes","Comment"],l=["Title","Amount","Zone","Type","Supplier","Opened","Code"],u=r.filter(_=>i[_]).map(_=>({key:_,label:ni(_),value:String(i[_]??"")})),f=l.filter(_=>_!=="Title"&&i[_]!==void 0).map(_=>({key:_,label:ni(_),value:String(i[_]??"")})),g=Object.keys(i).filter(_=>!r.includes(_)&&!l.includes(_)).sort().map(_=>({key:_,label:ni(_),value:String(i[_]??"")}));return{item:i,longTexts:u,mainFields:f,otherFields:g}}function Ji(o,e,t,i,r){const l=t.Code,u=o.querySelector(`.editable[data-field="${CSS.escape(i)}"]`);if(!u)return;const f=document.createElement("span");f.className="inline-edit",f.setAttribute("data-field",i);let g;if(ko.has(i)){const L=document.createElement("textarea");L.className="inline-input materialize-textarea",L.value=r??"";const A=()=>{L.style.height="auto",L.style.height=L.scrollHeight+"px";try{window.M&&typeof window.M.textareaAutoResize=="function"&&window.M.textareaAutoResize(L)}catch{}};A(),L.addEventListener("input",A),g=L}else{const L=document.createElement("input");L.type=i.toLowerCase().includes("amount")?"number":"text",L.value=r??"",L.className="inline-input",g=L}const _=document.createElement("button");_.textContent="✓",_.className="inline-ok";const b=document.createElement("button");b.textContent="✕",b.className="inline-cancel",f.append(g,_,b),u.replaceWith(f),g.focus();const T=L=>{L&&(De[l]||(De[l]={}),De[l][i]=g.value)};_.addEventListener("click",()=>T(!0)),b.addEventListener("click",()=>T(!1)),_.addEventListener("click",()=>ut(e,o,t)),b.addEventListener("click",()=>ut(e,o,t)),g.addEventListener("keydown",L=>{(g.tagName==="INPUT"&&L.key==="Enter"||g.tagName==="TEXTAREA"&&L.key==="Enter"&&(L.ctrlKey||L.metaKey))&&(L.preventDefault(),T(!0),ut(e,o,t)),L.key==="Escape"&&(L.preventDefault(),T(!1),ut(e,o,t))})}function ut(o,e,t){if(!t){e.innerHTML="";return}const i=Ki(t);e.innerHTML=Te.render(o,i),e.querySelectorAll(".editable[data-field]").forEach(u=>{u.addEventListener("click",()=>{const f=u.getAttribute("data-field"),g=u.textContent||"";Ji(e,o,t,f,g)})}),e.querySelectorAll("table td").forEach(u=>{const f=u.querySelector(".editable[data-field]");f&&u.addEventListener("click",()=>{if(u.querySelector(".inline-edit"))return;const g=f.getAttribute("data-field"),_=f.textContent||"";Ji(e,o,t,g,_)})});const r=e.querySelector("#saveBtn");r&&(ye.user?r.addEventListener("click",async()=>{var _,b,T,L,A;const u=t.Code;e.querySelectorAll(".inline-edit").forEach(W=>{const c=W.getAttribute("data-field"),p=W.querySelector("input,textarea");c&&p&&(De[u]||(De[u]={}),De[u][c]=p.value)});const f=De[u]||{};if(Object.keys(f).length===0){(_=window.M)!=null&&_.toast&&window.M.toast({html:"Нет изменений",displayLength:1500});return}let g;try{r.classList.add("disabled"),g=document.createElement("div"),g.className="preloader-wrapper small active",g.innerHTML='<div class="spinner-layer spinner-blue-only"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div>',(b=r.parentNode)==null||b.insertBefore(g,r.nextSibling);const W={...t,...f};delete W._isNew,t._isNew?await Gr(W):await Qr(u,W),Ht(Et().map(w=>w.Code===u?W:w)),delete De[u];try{const w=document.querySelector(`tr[data-code="${CSS.escape(u)}"]`);if(w){const d=w.querySelectorAll("td");d[0]&&(d[0].textContent=String(W.Title??"")),d[1]&&(d[1].textContent=String(W.Amount??"")),d[2]&&(d[2].textContent=String(W.Opened??""))}St();const k=document.getElementById("quick-search");k&&k.dispatchEvent(new Event("input"))}catch{}const c=Et().find(w=>w.Code===u)||W,p=Ki(c);e.innerHTML=Te.render(o,p),ut(o,e,c),(T=window.M)!=null&&T.toast&&window.M.toast({html:"Сохранено",displayLength:1500})}catch(W){console.error(W);const c=(W==null?void 0:W.message)||"Ошибка сохранения";(L=window.M)!=null&&L.toast&&window.M.toast({html:c,displayLength:3e3})}finally{(A=g==null?void 0:g.parentNode)==null||A.removeChild(g),r.classList.remove("disabled")}}):(r.classList.add("disabled"),r.addEventListener("click",u=>{var f;u.preventDefault(),(f=window.M)!=null&&f.toast&&window.M.toast({html:"Войдите, чтобы сохранять изменения",displayLength:2e3})},{once:!0})));const l=e.querySelector("#deleteBtn");l&&(ye.user?l.addEventListener("click",async()=>{await Xr(t.Code),Ht(Et().filter(u=>u.Code!==t.Code)),e.innerHTML=""}):(l.classList.add("disabled"),l.addEventListener("click",u=>{var f;u.preventDefault(),(f=window.M)!=null&&f.toast&&window.M.toast({html:"Войдите, чтобы удалять записи",displayLength:2e3})},{once:!0})))}function Qi(o,e,t){e.innerHTML=Te.render(o,{items:Et()});const i=e.querySelectorAll("tr[data-code]");i.forEach(r=>{r.addEventListener("click",()=>{i.forEach(l=>l.classList.remove("active","selected")),r.classList.add("active","selected"),Zr(r.dataset.code),ut(mo,t,Oe.selected)})})}function St(){document.querySelectorAll("tr[data-code]").forEach(e=>{const t=e.dataset.code,i=Oe.items.find(l=>l.Code===t);let r=!0;for(const l in Oe.filter){const u=Oe.filter[l];if(u.length>0&&!u.includes(i[l])){r=!1;break}}r?e.classList.remove("hide"):e.classList.add("hide")})}function Eo(o){const e=[...new Set(o.map(i=>i.Zone).filter(Boolean))].sort().map(i=>({kind:"Zone",value:i,label:`${i}`})),t=[...new Set(o.map(i=>i.Type).filter(Boolean))].sort().map(i=>({kind:"Type",value:i,label:`${i}`}));return{zones:e,types:t}}function mi(o){return o.map(e=>{var i;const t=(i=Oe.filter[e.kind])==null?void 0:i.includes(e.value);return`
      <a href="#"
         class="${e.kind} chip ${t?"active selected":""}"
         data-kind="${e.kind}" data-value="${e.value}">
        ${e.label}
      </a>
    `}).join("")}function Xi(o,e){const t=mi(e);return`
    <div class="tag-group">
      <div class="tag-title">${o}</div>
      <div class="tag-chips">${t}</div>
    </div>
  `}function Nt(o){const{zones:e,types:t}=Eo(Oe.items);if(o&&o.zoneEl&&o.typeEl){o.zoneEl.innerHTML=mi(e),o.typeEl.innerHTML=mi(t);const i=r=>{r.querySelectorAll(".chip").forEach(l=>{l.addEventListener("click",u=>{u.preventDefault();const f=l.dataset.kind,g=l.dataset.value;Fi(f,g),Nt(o),St()})})};i(o.zoneEl),i(o.typeEl)}else o instanceof Element&&(o.innerHTML=`
      ${Xi("Zone",e)}
      ${Xi("Type",t)}
      <div class="section">
        <div class="input-field">
          <input id="quick-search" type="text" class="validate" />
          <label for="quick-search">Search rows</label>
        </div>
      </div>
    `,o.querySelectorAll(".chip").forEach(i=>{i.addEventListener("click",r=>{r.preventDefault();const l=i.dataset.kind,u=i.dataset.value;Fi(l,u),Nt(o),St()})}))}const Gi=`<table class="highlight striped">
  <thead>
    <tr>
      <th>Title</th>
      <th>Amount</th>
      <th>Opened</th>
    </tr>
  </thead>
  <tbody>
    {{#items}}
      <tr data-code="{{Code}}">
        <td>{{Title}}</td>
        <td>{{Amount}}</td>
        <td>{{Opened}}</td>
      </tr>
    {{/items}}
  </tbody>
</table>
`,yt=document.getElementById("table-container"),Bt=document.getElementById("card-container"),ze=document.getElementById("tags-container"),Yi=document.getElementById("sheet-title"),Dt=document.getElementById("sheet-links"),Zi={raw:"Raw materials",office:"Office",our:"Our products"};function Ci(){return new URLSearchParams(window.location.search).get("sheet")||"raw"}function Co(){const o=document.querySelectorAll(".collapsible");window.M&&o.length&&window.M.Collapsible.init(o)}function To(){if(window.__modalsInited)return;const o=document.querySelectorAll(".modal");window.M&&o.length&&(window.M.Modal.init(o,{}),window.__modalsInited=!0)}function So(){const o=document.getElementById("auth-email-label"),e=document.getElementById("auth-signed-out"),t=document.getElementById("auth-signed-in"),i=document.getElementById("auth-email"),r=document.getElementById("auth-signin"),l=document.getElementById("auth-signout");if(!o&&!r&&!l)return;let u=null;function f(){const g=!!u;o&&(o.textContent=g?u.email||"User":"Guest"),e&&(e.style.display=g?"none":""),t&&(t.style.display=g?"":"none")}r&&r.addEventListener("click",async()=>{var _,b;const g=((i==null?void 0:i.value)||"").trim();if(g)try{await(await Ne(()=>Promise.resolve().then(()=>ii),void 0)).signInWithOtp(g),console.log("Auth: magic link requested for",g),(_=window.M)!=null&&_.toast&&window.M.toast({html:`Ссылка для входа отправлена на ${g}`,displayLength:3e3})}catch(T){console.error("Auth: signInWithOtp error",T),(b=window.M)!=null&&b.toast&&window.M.toast({html:"Ошибка отправки ссылки",displayLength:3e3})}}),l&&l.addEventListener("click",async()=>{try{await(await Ne(()=>Promise.resolve().then(()=>ii),void 0)).signOut()}catch(g){console.error("Auth: signOut error",g)}f()}),Ne(async()=>{const{onAuthChange:g}=await Promise.resolve().then(()=>ii);return{onAuthChange:g}},void 0).then(({onAuthChange:g})=>{g(_=>{u=_.user,f();try{Vt(Ci())}catch{}})}).catch(g=>{console.debug("Auth init skipped",g)}),f()}function si(o="",e=""){const t=document.getElementById("add-extra-list");if(!t)return;const i=document.createElement("div");i.className="col s12",i.innerHTML=`
    <div class="row" style="margin-bottom:0;">
      <div class="input-field col s5">
        <input type="text" class="extra-name" value="${o}" />
        <label class="active">Field</label>
      </div>
      <div class="input-field col s7">
        <input type="text" class="extra-value" value="${e}" />
        <label class="active">Value</label>
      </div>
    </div>
  `,t.appendChild(i)}function Oo(o){let e={};const t=(o||"").trim();if(!t)return e;try{const i=JSON.parse(t);if(i&&typeof i=="object")return i}catch{}return t.split(/\n+/).forEach(i=>{const r=i.match(/^\s*([^:]+)\s*:\s*(.*)$/);if(r){const l=r[1].trim(),u=r[2].trim();l&&(e[l]=u)}}),e}function xo(){return"tmp-"+Date.now().toString(36)+"-"+Math.random().toString(36).slice(2,6)}function Pt(){const o=document.getElementById("quick-search"),e=((o==null?void 0:o.value)||"").toLowerCase().trim();document.querySelectorAll("tr[data-code]").forEach(i=>{var l;const r=((l=i.textContent)==null?void 0:l.toLowerCase())||"";!e||r.includes(e)?i.classList.remove("search-hide"):i.classList.add("search-hide")})}function Mo(){const o=document.getElementById("quick-search");o&&o.addEventListener("input",Pt)}function Lo(){var o;(o=document.getElementById("preloader-wrapper"))==null||o.classList.remove("hide")}function ri(){var o;(o=document.getElementById("preloader-wrapper"))==null||o.classList.add("hide")}async function Vt(o){var f,g;Lo();try{const{supabase:_}=await Ne(async()=>{const{supabase:T}=await Promise.resolve().then(()=>zr);return{supabase:T}},void 0),{data:{user:b}}=await _.auth.getUser();if(!b){ri(),yt.innerHTML='<div class="card-panel yellow lighten-4">Войдите, чтобы увидеть данные.</div>',Bt.innerHTML="",ze&&(ze.innerHTML="");return}}catch{ri(),yt.innerHTML='<div class="card-panel yellow lighten-4">Войдите, чтобы увидеть данные.</div>',Bt.innerHTML="",ze&&(ze.innerHTML="");return}Yi&&(Yi.innerHTML=`<a href="?sheet=${o}">${Zi[o]||o}</a>`),Dt&&(Dt.innerHTML=Object.entries(Zi).filter(([_])=>_!==o).map(([_,b])=>`<a href="?sheet=${_}" data-sheet="${_}">${b}</a>`).join(" "));try{const _=await Jr(o);if(Ht(_),Qi(Gi,yt,Bt),ze){const b=((f=document.getElementById("quick-search"))==null?void 0:f.value)||"";Nt(ze),Mo();const T=document.getElementById("quick-search");T&&(T.value=b,window.M&&window.M.updateTextFields&&window.M.updateTextFields())}St(),Pt(),Co(),To()}catch(_){console.error("Load error:",_);const b=(_==null?void 0:_.message)||"Ошибка загрузки данных";(g=window.M)!=null&&g.toast&&window.M.toast({html:b,displayLength:3e3})}finally{ri()}Dt&&Dt.querySelectorAll("a").forEach(_=>{_.addEventListener("click",b=>{b.preventDefault();const T=_.dataset.sheet;history.pushState({sheet:T},"",`?sheet=${T}`),Vt(T)})});const e=document.getElementById("quick-search");e&&(e.addEventListener("input",Pt),["click","mousedown","keydown"].forEach(_=>{e.addEventListener(_,b=>b.stopPropagation())}));const t=document.getElementById("add-item-btn"),i=document.getElementById("add-item-modal"),r=document.getElementById("add-item-form"),l=document.getElementById("add-extra-add"),u=document.getElementById("add-tds-parse");if(!window.__addUiBound&&t&&i&&window.M){window.__addUiBound=!0;const _=window.M.Modal.getInstance(i)||window.M.Modal.init(i);t.addEventListener("click",()=>{r&&typeof r.reset=="function"&&r.reset();const b=document.getElementById("add-extra-list");b&&(b.innerHTML=""),si(),_.open()})}l&&l.addEventListener("click",()=>si()),u&&!u.__bound&&(u.__bound=!0,u.addEventListener("click",()=>{const _=document.getElementById("add-tds"),b=_&&"value"in _?_.value:"",T=Oo(b);Object.entries(T).forEach(([L,A])=>si(String(L),String(A))),_&&"value"in _&&(_.value=""),window.M&&window.M.updateTextFields&&window.M.updateTextFields()})),r&&!r.__bound&&(r.__bound=!0,r.addEventListener("submit",_=>{_.preventDefault();const b=m=>{const C=document.getElementById(m);return C&&"value"in C?C.value:""},T=m=>(m||"").toString().trim(),L=T(b("add-title")),A=b("add-amount"),W=T(b("add-zone")),c=T(b("add-type")),p=T(b("add-supplier")),w=T(b("add-opened")),k=document.getElementById("add-extra-list"),d={};if(k){const m=k.querySelectorAll(".extra-name"),C=k.querySelectorAll(".extra-value");m.forEach((O,I)=>{const R="value"in O?O.value.trim():"",H=C[I]&&"value"in C[I]?C[I].value:"";R&&(d[R]=H)})}const n=xo(),s={Code:n,Title:L,Amount:A,Zone:W,Type:c,Supplier:p,Opened:w,sheet:o,_isNew:!0,...d},a=Et();Ht([...a||[],s]),Qi(Gi,yt,Bt),ze&&Nt(ze),St(),Pt();const h=yt.querySelector(`tr[data-code="${n}"]`);h&&"click"in h&&h.click();try{const m=document.getElementById("add-item-modal");if(m&&window.M){let O=window.M.Modal.getInstance(m);O||(O=window.M.Modal.init(m,{})),setTimeout(()=>{try{O&&O.close()}catch{}},0)}r&&typeof r.reset=="function"&&r.reset();const C=document.getElementById("add-extra-list");C&&(C.innerHTML="")}catch(m){console.debug("Modal close fallback",m)}}))}window.addEventListener("popstate",o=>{var t;const e=((t=o.state)==null?void 0:t.sheet)||Ci();Vt(e)});So();Vt(Ci());
